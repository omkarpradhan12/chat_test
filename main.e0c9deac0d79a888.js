"use strict";var _0=Object.defineProperty,y0=Object.defineProperties,v0=Object.getOwnPropertyDescriptors,pE=Object.getOwnPropertySymbols,C0=Object.prototype.hasOwnProperty,D0=Object.prototype.propertyIsEnumerable,gE=(ke,ce,R)=>ce in ke?_0(ke,ce,{enumerable:!0,configurable:!0,writable:!0,value:R}):ke[ce]=R,mE=(ke,ce)=>{for(var R in ce||(ce={}))C0.call(ce,R)&&gE(ke,R,ce[R]);if(pE)for(var R of pE(ce))D0.call(ce,R)&&gE(ke,R,ce[R]);return ke},_E=(ke,ce)=>y0(ke,v0(ce));(self.webpackChunkchat_test=self.webpackChunkchat_test||[]).push([[179],{773:(ke,ce,R)=>{R.d(ce,{hO:()=>vs});var v=R(223),V=R(90),ae=R(859),Z=R(681),he=R(877);class Re{constructor(y,E){this._delegate=y,this.firebase=E,(0,Z._addComponent)(y,new ae.wA("app-compat",()=>this,"PUBLIC")),this.container=y.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(y){this._delegate.automaticDataCollectionEnabled=y}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(y=>{this._delegate.checkDestroyed(),y()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(y,E=Z._DEFAULT_ENTRY_NAME){var T;this._delegate.checkDestroyed();const k=this._delegate.container.getProvider(y);return!k.isInitialized()&&"EXPLICIT"===(null===(T=k.getComponent())||void 0===T?void 0:T.instantiationMode)&&k.initialize(),k.getImmediate({identifier:E})}_removeServiceInstance(y,E=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(y).clearInstance(E)}_addComponent(y){(0,Z._addComponent)(this._delegate,y)}_addOrOverwriteComponent(y){(0,Z._addOrOverwriteComponent)(this._delegate,y)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new V.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function B(){const g=function De(g){const y={},E={__esModule:!0,initializeApp:function W(be,Fe={}){const Ie=Z.initializeApp(be,Fe);if((0,V.r3)(y,Ie.name))return y[Ie.name];const ct=new g(Ie,E);return y[Ie.name]=ct,ct},app:k,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function ue(be){const Fe=be.name,Ie=Fe.replace("-compat","");if(Z._registerComponent(be)&&"PUBLIC"===be.type){const ct=(pt=k())=>{if("function"!=typeof pt[Ie])throw Me.create("invalid-app-argument",{appName:Fe});return pt[Ie]()};void 0!==be.serviceProps&&(0,V.ZB)(ct,be.serviceProps),E[Ie]=ct,g.prototype[Ie]=function(...pt){return this._getService.bind(this,Fe).apply(this,be.multipleInstances?pt:[])}}return"PUBLIC"===be.type?E[Ie]:null},removeApp:function T(be){delete y[be]},useAsService:function xe(be,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:Z}};function k(be){if(!(0,V.r3)(y,be=be||Z._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:be});return y[be]}return E.default=E,Object.defineProperty(E,"apps",{get:function ee(){return Object.keys(y).map(be=>y[be])}}),k.App=g,E}(Re);return g.INTERNAL=Object.assign(Object.assign({},g.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function y(E){(0,V.ZB)(g,E)},createSubscribe:V.ne,ErrorFactory:V.LL,deepExtend:V.ZB}),g}(),ie=new he.Yd("@firebase/app-compat");if((0,V.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ge=L;!function ze(g){(0,Z.registerVersion)("@firebase/app-compat","0.1.32",g)}(),ge.registerVersion("firebase","9.9.3","app-compat"),R(867);var Q=R(861),Ee=R(766);const me="@firebase/installations",_e="0.5.12",oe=`w:${_e}`,q="FIS_v2",Y=new V.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(g){return g instanceof V.ZR&&g.code.includes("request-failed")}function Le({projectId:g}){return`https://firebaseinstallations.googleapis.com/v1/projects/${g}/installations`}function qe(g){return{token:g.token,requestStatus:2,expiresIn:pn(g.expiresIn),creationTime:Date.now()}}function xt(g,y){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Q.Z)(function*(g,y){const T=(yield y.json()).error;return Y.create("request-failed",{requestName:g,serverCode:T.code,serverMessage:T.message,serverStatus:T.status})})).apply(this,arguments)}function It({apiKey:g}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":g})}function wn(g,{refreshToken:y}){const E=It(g);return E.append("Authorization",function gr(g){return`${q} ${g}`}(y)),E}function Mt(g){return sn.apply(this,arguments)}function sn(){return(sn=(0,Q.Z)(function*(g){const y=yield g();return y.status>=500&&y.status<600?g():y})).apply(this,arguments)}function pn(g){return Number(g.replace("s","000"))}function gt(g,y){return lt.apply(this,arguments)}function lt(){return(lt=(0,Q.Z)(function*({appConfig:g,heartbeatServiceProvider:y},{fid:E}){const T=Le(g),k=It(g),W=y.getImmediate({optional:!0});if(W){const be=yield W.getHeartbeatsHeader();be&&k.append("x-firebase-client",be)}const ue={method:"POST",headers:k,body:JSON.stringify({fid:E,authVersion:q,appId:g.appId,sdkVersion:oe})},xe=yield Mt(()=>fetch(T,ue));if(xe.ok){const be=yield xe.json();return{fid:be.fid||E,registrationStatus:2,refreshToken:be.refreshToken,authToken:qe(be.authToken)}}throw yield xt("Create Installation",xe)})).apply(this,arguments)}function Bs(g){return new Promise(y=>{setTimeout(y,g)})}const hu=/^[cdef][\w-]{21}$/;function ka(){try{const g=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(g),g[0]=112+g[0]%16;const E=function Kr(g){return function er(g){return btoa(String.fromCharCode(...g)).replace(/\+/g,"-").replace(/\//g,"_")}(g).substr(0,22)}(g);return hu.test(E)?E:""}catch(g){return""}}function Vn(g){return`${g.appName}!${g.appId}`}const tr=new Map;function vi(g,y){const E=Vn(g);nr(E,y),function Ki(g,y){const E=function Tr(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=g=>{nr(g.data.key,g.data.fid)}),gn}();E&&E.postMessage({key:g,fid:y}),function Oe(){0===tr.size&&gn&&(gn.close(),gn=null)}()}(E,y)}function nr(g,y){const E=tr.get(g);if(E)for(const T of E)T(y)}let gn=null;const Te="firebase-installations-store";let We=null;function Qr(){return We||(We=(0,Ee.X3)("firebase-installations-database",1,{upgrade:(g,y)=>{0===y&&g.createObjectStore(Te)}})),We}function Gt(g,y){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Q.Z)(function*(g,y){const E=Vn(g),k=(yield Qr()).transaction(Te,"readwrite"),W=k.objectStore(Te),ee=yield W.get(E);return yield W.put(y,E),yield k.done,(!ee||ee.fid!==y.fid)&&vi(g,y.fid),y})).apply(this,arguments)}function Sr(g){return on.apply(this,arguments)}function on(){return(on=(0,Q.Z)(function*(g){const y=Vn(g),T=(yield Qr()).transaction(Te,"readwrite");yield T.objectStore(Te).delete(y),yield T.done})).apply(this,arguments)}function Qt(g,y){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,Q.Z)(function*(g,y){const E=Vn(g),k=(yield Qr()).transaction(Te,"readwrite"),W=k.objectStore(Te),ee=yield W.get(E),ue=y(ee);return void 0===ue?yield W.delete(E):yield W.put(ue,E),yield k.done,ue&&(!ee||ee.fid!==ue.fid)&&vi(g,ue.fid),ue})).apply(this,arguments)}function Di(g){return x.apply(this,arguments)}function x(){return(x=(0,Q.Z)(function*(g){let y;const E=yield Qt(g.appConfig,T=>{const k=N(T),W=S(g,k);return y=W.registrationPromise,W.installationEntry});return""===E.fid?{installationEntry:yield y}:{installationEntry:E,registrationPromise:y}})).apply(this,arguments)}function N(g){return ft(g||{fid:ka(),registrationStatus:0})}function S(g,y){if(0===y.registrationStatus){if(!navigator.onLine)return{installationEntry:y,registrationPromise:Promise.reject(Y.create("app-offline"))};const E={fid:y.fid,registrationStatus:1,registrationTime:Date.now()},T=function F(g,y){return P.apply(this,arguments)}(g,E);return{installationEntry:E,registrationPromise:T}}return 1===y.registrationStatus?{installationEntry:y,registrationPromise:re(g)}:{installationEntry:y}}function P(){return(P=(0,Q.Z)(function*(g,y){try{const E=yield gt(g,y);return Gt(g.appConfig,E)}catch(E){throw pe(E)&&409===E.customData.serverCode?yield Sr(g.appConfig):yield Gt(g.appConfig,{fid:y.fid,registrationStatus:0}),E}})).apply(this,arguments)}function re(g){return le.apply(this,arguments)}function le(){return(le=(0,Q.Z)(function*(g){let y=yield Be(g.appConfig);for(;1===y.registrationStatus;)yield Bs(100),y=yield Be(g.appConfig);if(0===y.registrationStatus){const{installationEntry:E,registrationPromise:T}=yield Di(g);return T||E}return y})).apply(this,arguments)}function Be(g){return Qt(g,y=>{if(!y)throw Y.create("installation-not-found");return ft(y)})}function ft(g){return function mt(g){return 1===g.registrationStatus&&g.registrationTime+1e4<Date.now()}(g)?{fid:g.fid,registrationStatus:0}:g}function rr(g,y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Q.Z)(function*({appConfig:g,heartbeatServiceProvider:y},E){const T=mn(g,E),k=wn(g,E),W=y.getImmediate({optional:!0});if(W){const be=yield W.getHeartbeatsHeader();be&&k.append("x-firebase-client",be)}const ue={method:"POST",headers:k,body:JSON.stringify({installation:{sdkVersion:oe,appId:g.appId}})},xe=yield Mt(()=>fetch(T,ue));if(xe.ok)return qe(yield xe.json());throw yield xt("Generate Auth Token",xe)})).apply(this,arguments)}function mn(g,{fid:y}){return`${Le(g)}/${y}/authTokens:generate`}function Jr(g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,Q.Z)(function*(g,y=!1){let E;const T=yield Qt(g.appConfig,W=>{if(!Zi(W))throw Y.create("not-registered");const ee=W.authToken;if(!y&&pu(ee))return W;if(1===ee.requestStatus)return E=id(g,y),W;{if(!navigator.onLine)throw Y.create("app-offline");const ue=Po(W);return E=Ba(g,ue),ue}});return E?yield E:T.authToken})).apply(this,arguments)}function id(g,y){return js.apply(this,arguments)}function js(){return(js=(0,Q.Z)(function*(g,y){let E=yield La(g.appConfig);for(;1===E.authToken.requestStatus;)yield Bs(100),E=yield La(g.appConfig);const T=E.authToken;return 0===T.requestStatus?Jr(g,y):T})).apply(this,arguments)}function La(g){return Qt(g,y=>{if(!Zi(y))throw Y.create("not-registered");return function Jt(g){return 1===g.requestStatus&&g.requestTime+1e4<Date.now()}(y.authToken)?Object.assign(Object.assign({},y),{authToken:{requestStatus:0}}):y})}function Ba(g,y){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,Q.Z)(function*(g,y){try{const E=yield rr(g,y),T=Object.assign(Object.assign({},y),{authToken:E});return yield Gt(g.appConfig,T),E}catch(E){if(!pe(E)||401!==E.customData.serverCode&&404!==E.customData.serverCode){const T=Object.assign(Object.assign({},y),{authToken:{requestStatus:0}});yield Gt(g.appConfig,T)}else yield Sr(g.appConfig);throw E}})).apply(this,arguments)}function Zi(g){return void 0!==g&&2===g.registrationStatus}function pu(g){return 2===g.requestStatus&&!function gu(g){const y=Date.now();return y<g.creationTime||g.creationTime+g.expiresIn<y+36e5}(g)}function Po(g){const y={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},g),{authToken:y})}function ir(){return(ir=(0,Q.Z)(function*(g){const y=g,{installationEntry:E,registrationPromise:T}=yield Di(y);return T?T.catch(console.error):Jr(y).catch(console.error),E.fid})).apply(this,arguments)}function Qi(){return(Qi=(0,Q.Z)(function*(g,y=!1){const E=g;return yield ja(E),(yield Jr(E,y)).token})).apply(this,arguments)}function ja(g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Q.Z)(function*(g){const{registrationPromise:y}=yield Di(g);y&&(yield y)})).apply(this,arguments)}function _n(g){return Y.create("missing-app-config-values",{valueName:g})}const ti="installations",wi=g=>{const y=g.getProvider("app").getImmediate(),E=function Pt(g){if(!g||!g.options)throw _n("App Configuration");if(!g.name)throw _n("App Name");const y=["projectId","apiKey","appId"];for(const E of y)if(!g.options[E])throw _n(E);return{appName:g.name,projectId:g.options.projectId,apiKey:g.options.apiKey,appId:g.options.appId}}(y);return{app:y,appConfig:E,heartbeatServiceProvider:(0,Z._getProvider)(y,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=g=>{const y=g.getProvider("app").getImmediate(),E=(0,Z._getProvider)(y,ti).getImmediate();return{getId:()=>function ei(g){return ir.apply(this,arguments)}(E),getToken:k=>function Hn(g){return Qi.apply(this,arguments)}(E,k)}};(function Ji(){(0,Z._registerComponent)(new ae.wA(ti,wi,"PUBLIC")),(0,Z._registerComponent)(new ae.wA("installations-internal",Ft,"PRIVATE"))})(),(0,Z.registerVersion)(me,_e),(0,Z.registerVersion)(me,_e,"esm2017");const bi="@firebase/remote-config",Ut=new V.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Oh{constructor(y,E,T,k){this.client=y,this.storage=E,this.storageCache=T,this.logger=k}isCachedDataFresh(y,E){if(!E)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const T=Date.now()-E,k=T<=y;return this.logger.debug(`Config fetch cache check. Cache age millis: ${T}. Cache max age millis (minimumFetchIntervalMillis setting): ${y}. Is cache hit: ${k}.`),k}fetch(y){var E=this;return(0,Q.Z)(function*(){const[T,k]=yield Promise.all([E.storage.getLastSuccessfulFetchTimestampMillis(),E.storage.getLastSuccessfulFetchResponse()]);if(k&&E.isCachedDataFresh(y.cacheMaxAgeMillis,T))return k;y.eTag=k&&k.eTag;const W=yield E.client.fetch(y),ee=[E.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&ee.push(E.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(ee),W})()}}function Fh(g=navigator){return g.languages&&g.languages[0]||g.language}class kh{constructor(y,E,T,k,W,ee){this.firebaseInstallations=y,this.sdkVersion=E,this.namespace=T,this.projectId=k,this.apiKey=W,this.appId=ee}fetch(y){var E=this;return(0,Q.Z)(function*(){var T,k,W;const[ee,ue]=yield Promise.all([E.firebaseInstallations.getId(),E.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${E.projectId}/namespaces/${E.namespace}:fetch?key=${E.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":y.eTag||"*"},Ie={sdk_version:E.sdkVersion,app_instance_id:ee,app_instance_id_token:ue,app_id:E.appId,language_code:Fh()},ct={method:"POST",headers:Fe,body:JSON.stringify(Ie)},pt=fetch(be,ct),Fr=new Promise((Li,Yn)=>{y.signal.addEventListener(()=>{const ao=new Error("The operation was aborted.");ao.name="AbortError",Yn(ao)})});let Fi;try{yield Promise.race([pt,Fr]),Fi=yield pt}catch(Li){let Yn="fetch-client-network";throw"AbortError"===(null===(T=Li)||void 0===T?void 0:T.name)&&(Yn="fetch-timeout"),Ut.create(Yn,{originalErrorMessage:null===(k=Li)||void 0===k?void 0:k.message})}let ki=Fi.status;const np=Fi.headers.get("ETag")||void 0;let kr,Cs;if(200===Fi.status){let Li;try{Li=yield Fi.json()}catch(Yn){throw Ut.create("fetch-client-parse",{originalErrorMessage:null===(W=Yn)||void 0===W?void 0:W.message})}kr=Li.entries,Cs=Li.state}if("INSTANCE_STATE_UNSPECIFIED"===Cs?ki=500:"NO_CHANGE"===Cs?ki=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(kr={}),304!==ki&&200!==ki)throw Ut.create("fetch-status",{httpStatus:ki});return{status:ki,eTag:np,config:kr}})()}}class jh{constructor(y,E){this.client=y,this.storage=E}fetch(y){var E=this;return(0,Q.Z)(function*(){const T=(yield E.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return E.attemptFetch(y,T)})()}attemptFetch(y,{throttleEndTimeMillis:E,backoffCount:T}){var k=this;return(0,Q.Z)(function*(){yield function Lh(g,y){return new Promise((E,T)=>{const k=Math.max(y-Date.now(),0),W=setTimeout(E,k);g.addEventListener(()=>{clearTimeout(W),T(Ut.create("fetch-throttle",{throttleEndTimeMillis:y}))})})}(y.signal,E);try{const W=yield k.client.fetch(y);return yield k.storage.deleteThrottleMetadata(),W}catch(W){if(!function Bh(g){if(!(g instanceof V.ZR&&g.customData))return!1;const y=Number(g.customData.httpStatus);return 429===y||500===y||503===y||504===y}(W))throw W;const ee={throttleEndTimeMillis:Date.now()+(0,V.$s)(T),backoffCount:T+1};return yield k.storage.setThrottleMetadata(ee),k.attemptFetch(y,ee)}})()}}class Vh{constructor(y,E,T,k,W){this.app=y,this._client=E,this._storageCache=T,this._storage=k,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ha(g,y){var E;const T=g.target.error||void 0;return Ut.create(y,{originalErrorMessage:T&&(null===(E=T)||void 0===E?void 0:E.message)})}const es="app_namespace_store";class qm{constructor(y,E,T,k=function $a(){return new Promise((g,y)=>{var E;try{const T=indexedDB.open("firebase_remote_config",1);T.onerror=k=>{y(Ha(k,"storage-open"))},T.onsuccess=k=>{g(k.target.result)},T.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(es,{keyPath:"compositeKey"})}}catch(T){y(Ut.create("storage-open",{originalErrorMessage:null===(E=T)||void 0===E?void 0:E.message}))}})}()){this.appId=y,this.appName=E,this.namespace=T,this.openDbPromise=k}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(y){return this.set("last_fetch_status",y)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(y){return this.set("last_successful_fetch_timestamp_millis",y)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(y){return this.set("last_successful_fetch_response",y)}getActiveConfig(){return this.get("active_config")}setActiveConfig(y){return this.set("active_config",y)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(y){return this.set("active_config_etag",y)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(y){return this.set("throttle_metadata",y)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(y){var E=this;return(0,Q.Z)(function*(){const T=yield E.openDbPromise;return new Promise((k,W)=>{var ee;const xe=T.transaction([es],"readonly").objectStore(es),be=E.createCompositeKey(y);try{const Fe=xe.get(be);Fe.onerror=Ie=>{W(Ha(Ie,"storage-get"))},Fe.onsuccess=Ie=>{const ct=Ie.target.result;k(ct?ct.value:void 0)}}catch(Fe){W(Ut.create("storage-get",{originalErrorMessage:null===(ee=Fe)||void 0===ee?void 0:ee.message}))}})})()}set(y,E){var T=this;return(0,Q.Z)(function*(){const k=yield T.openDbPromise;return new Promise((W,ee)=>{var ue;const be=k.transaction([es],"readwrite").objectStore(es),Fe=T.createCompositeKey(y);try{const Ie=be.put({compositeKey:Fe,value:E});Ie.onerror=ct=>{ee(Ha(ct,"storage-set"))},Ie.onsuccess=()=>{W()}}catch(Ie){ee(Ut.create("storage-set",{originalErrorMessage:null===(ue=Ie)||void 0===ue?void 0:ue.message}))}})})()}delete(y){var E=this;return(0,Q.Z)(function*(){const T=yield E.openDbPromise;return new Promise((k,W)=>{var ee;const xe=T.transaction([es],"readwrite").objectStore(es),be=E.createCompositeKey(y);try{const Fe=xe.delete(be);Fe.onerror=Ie=>{W(Ha(Ie,"storage-delete"))},Fe.onsuccess=()=>{k()}}catch(Fe){W(Ut.create("storage-delete",{originalErrorMessage:null===(ee=Fe)||void 0===ee?void 0:ee.message}))}})})()}createCompositeKey(y){return[this.appId,this.appName,this.namespace,y].join()}}class Hh{constructor(y){this.storage=y}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var y=this;return(0,Q.Z)(function*(){const E=y.storage.getLastFetchStatus(),T=y.storage.getLastSuccessfulFetchTimestampMillis(),k=y.storage.getActiveConfig(),W=yield E;W&&(y.lastFetchStatus=W);const ee=yield T;ee&&(y.lastSuccessfulFetchTimestampMillis=ee);const ue=yield k;ue&&(y.activeConfig=ue)})()}setLastFetchStatus(y){return this.lastFetchStatus=y,this.storage.setLastFetchStatus(y)}setLastSuccessfulFetchTimestampMillis(y){return this.lastSuccessfulFetchTimestampMillis=y,this.storage.setLastSuccessfulFetchTimestampMillis(y)}setActiveConfig(y){return this.activeConfig=y,this.storage.setActiveConfig(y)}}function Ga(){return za.apply(this,arguments)}function za(){return(za=(0,Q.Z)(function*(){if(!(0,V.hl)())return!1;try{return yield(0,V.eu)()}catch(g){return!1}})).apply(this,arguments)}!function od(){(0,Z._registerComponent)(new ae.wA("remote-config",function g(y,{instanceIdentifier:E}){const T=y.getProvider("app").getImmediate(),k=y.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ut.create("registration-window");if(!(0,V.hl)())throw Ut.create("indexed-db-unavailable");const{projectId:W,apiKey:ee,appId:ue}=T.options;if(!W)throw Ut.create("registration-project-id");if(!ee)throw Ut.create("registration-api-key");if(!ue)throw Ut.create("registration-app-id");const xe=new qm(ue,T.name,E=E||"firebase"),be=new Hh(xe),Fe=new he.Yd(bi);Fe.logLevel=he.in.ERROR;const Ie=new kh(k,Z.SDK_VERSION,E,W,ee,ue),ct=new jh(Ie,xe),pt=new Oh(ct,xe,be,Fe),Fr=new Vh(T,pt,be,xe,Fe);return function Va(g){const y=(0,V.m9)(g);y._initializePromise||(y._initializePromise=y._storageCache.loadFromStorage().then(()=>{y._isInitializationComplete=!0}))}(Fr),Fr},"PUBLIC").setMultipleInstances(!0)),(0,Z.registerVersion)(bi,"0.3.11"),(0,Z.registerVersion)(bi,"0.3.11","esm2017")}();const $h="/firebase-messaging-sw.js",Wh="/firebase-cloud-messaging-push-scope",yu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vu="google.c.a.c_id",Ya="google.c.a.c_l",Cu="google.c.a.ts",$n="google.c.a.e";var ns=(()=>{return(g=ns||(ns={})).PUSH_RECEIVED="push-received",g.NOTIFICATION_CLICKED="notification-clicked",ns;var g})();function sr(g){const y=new Uint8Array(g);return btoa(String.fromCharCode(...y)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qa(g){const E=(g+"=".repeat((4-g.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),T=atob(E),k=new Uint8Array(T.length);for(let W=0;W<T.length;++W)k[W]=T.charCodeAt(W);return k}const Ii="fcm_token_details_db",$s="fcm_token_object_Store";function Za(g){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,Q.Z)(function*(g){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Ii))return null;let y=null;return(yield(0,Ee.X3)(Ii,5,{upgrade:(T=(0,Q.Z)(function*(k,W,ee,ue){var xe;if(W<2||!k.objectStoreNames.contains($s))return;const be=ue.objectStore($s),Fe=yield be.index("fcmSenderId").get(g);if(yield be.clear(),Fe)if(2===W){const Ie=Fe;if(!Ie.auth||!Ie.p256dh||!Ie.endpoint)return;y={token:Ie.fcmToken,createTime:null!==(xe=Ie.createTime)&&void 0!==xe?xe:Date.now(),subscriptionOptions:{auth:Ie.auth,p256dh:Ie.p256dh,endpoint:Ie.endpoint,swScope:Ie.swScope,vapidKey:"string"==typeof Ie.vapidKey?Ie.vapidKey:sr(Ie.vapidKey)}}}else if(3===W){const Ie=Fe;y={token:Ie.fcmToken,createTime:Ie.createTime,subscriptionOptions:{auth:sr(Ie.auth),p256dh:sr(Ie.p256dh),endpoint:Ie.endpoint,swScope:Ie.swScope,vapidKey:sr(Ie.vapidKey)}}}else if(4===W){const Ie=Fe;y={token:Ie.fcmToken,createTime:Ie.createTime,subscriptionOptions:{auth:sr(Ie.auth),p256dh:sr(Ie.p256dh),endpoint:Ie.endpoint,swScope:Ie.swScope,vapidKey:sr(Ie.vapidKey)}}}}),function(W,ee,ue,xe){return T.apply(this,arguments)})})).close(),yield(0,Ee.Lj)(Ii),yield(0,Ee.Lj)("fcm_vapid_details_db"),yield(0,Ee.Lj)("undefined"),kt(y)?y:null;var T}),Qa.apply(this,arguments)}function kt(g){if(!g||!g.subscriptionOptions)return!1;const{subscriptionOptions:y}=g;return"number"==typeof g.createTime&&g.createTime>0&&"string"==typeof g.token&&g.token.length>0&&"string"==typeof y.auth&&y.auth.length>0&&"string"==typeof y.p256dh&&y.p256dh.length>0&&"string"==typeof y.endpoint&&y.endpoint.length>0&&"string"==typeof y.swScope&&y.swScope.length>0&&"string"==typeof y.vapidKey&&y.vapidKey.length>0}const Et="firebase-messaging-store";let rs=null;function Ws(){return rs||(rs=(0,Ee.X3)("firebase-messaging-database",1,{upgrade:(g,y)=>{0===y&&g.createObjectStore(Et)}})),rs}function is(g){return yn.apply(this,arguments)}function yn(){return(yn=(0,Q.Z)(function*(g){const y=Gs(g),T=yield(yield Ws()).transaction(Et).objectStore(Et).get(y);if(T)return T;{const k=yield Za(g.appConfig.senderId);if(k)return yield Ti(g,k),k}})).apply(this,arguments)}function Ti(g,y){return ss.apply(this,arguments)}function ss(){return(ss=(0,Q.Z)(function*(g,y){const E=Gs(g),k=(yield Ws()).transaction(Et,"readwrite");return yield k.objectStore(Et).put(y,E),yield k.done,y})).apply(this,arguments)}function ri(g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,Q.Z)(function*(g){const y=Gs(g),T=(yield Ws()).transaction(Et,"readwrite");yield T.objectStore(Et).delete(y),yield T.done})).apply(this,arguments)}function Gs({appConfig:g}){return g.appId}const en=new V.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ii(g,y){return jo.apply(this,arguments)}function jo(){return(jo=(0,Q.Z)(function*(g,y){var E;const T=yield Ys(g),k=el(y),W={method:"POST",headers:T,body:JSON.stringify(k)};let ee;try{ee=yield(yield fetch(zs(g.appConfig),W)).json()}catch(ue){throw en.create("token-subscribe-failed",{errorInfo:null===(E=ue)||void 0===E?void 0:E.toString()})}if(ee.error)throw en.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw en.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Xa(g,y){return je.apply(this,arguments)}function je(){return(je=(0,Q.Z)(function*(g,y){var E;const T=yield Ys(g),k=el(y.subscriptionOptions),W={method:"PATCH",headers:T,body:JSON.stringify(k)};let ee;try{ee=yield(yield fetch(`${zs(g.appConfig)}/${y.token}`,W)).json()}catch(ue){throw en.create("token-update-failed",{errorInfo:null===(E=ue)||void 0===E?void 0:E.toString()})}if(ee.error)throw en.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw en.create("token-update-no-token");return ee.token})).apply(this,arguments)}function Eu(g,y){return wu.apply(this,arguments)}function wu(){return(wu=(0,Q.Z)(function*(g,y){var E;const k={method:"DELETE",headers:yield Ys(g)};try{const ee=yield(yield fetch(`${zs(g.appConfig)}/${y}`,k)).json();if(ee.error)throw en.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(W){throw en.create("token-unsubscribe-failed",{errorInfo:null===(E=W)||void 0===E?void 0:E.toString()})}})).apply(this,arguments)}function zs({projectId:g}){return`https://fcmregistrations.googleapis.com/v1/projects/${g}/registrations`}function Ys(g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,Q.Z)(function*({appConfig:g,installations:y}){const E=yield y.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":g.apiKey,"x-goog-firebase-installations-auth":`FIS ${E}`})})).apply(this,arguments)}function el({p256dh:g,auth:y,endpoint:E,vapidKey:T}){const k={web:{endpoint:E,auth:y,p256dh:g}};return T!==yu&&(k.web.applicationPubKey=T),k}const ud=6048e5;function se(g){return st.apply(this,arguments)}function st(){return(st=(0,Q.Z)(function*(g){const y=yield tl(g.swRegistration,g.vapidKey),E={vapidKey:g.vapidKey,swScope:g.swRegistration.scope,endpoint:y.endpoint,auth:sr(y.getKey("auth")),p256dh:sr(y.getKey("p256dh"))},T=yield is(g.firebaseDependencies);if(T){if(cd(T.subscriptionOptions,E))return Date.now()>=T.createTime+ud?bu(g,{token:T.token,createTime:Date.now(),subscriptionOptions:E}):T.token;try{yield Eu(g.firebaseDependencies,T.token)}catch(k){console.warn(k)}return or(g.firebaseDependencies,E)}return or(g.firebaseDependencies,E)})).apply(this,arguments)}function Vo(g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,Q.Z)(function*(g){const y=yield is(g.firebaseDependencies);y&&(yield Eu(g.firebaseDependencies,y.token),yield ri(g.firebaseDependencies));const E=yield g.swRegistration.pushManager.getSubscription();return!E||E.unsubscribe()})).apply(this,arguments)}function bu(g,y){return si.apply(this,arguments)}function si(){return(si=(0,Q.Z)(function*(g,y){try{const E=yield Xa(g.firebaseDependencies,y),T=Object.assign(Object.assign({},y),{token:E,createTime:Date.now()});return yield Ti(g.firebaseDependencies,T),E}catch(E){throw yield Vo(g),E}})).apply(this,arguments)}function or(g,y){return qs.apply(this,arguments)}function qs(){return(qs=(0,Q.Z)(function*(g,y){const T={token:yield ii(g,y),createTime:Date.now(),subscriptionOptions:y};return yield Ti(g,T),T.token})).apply(this,arguments)}function tl(g,y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,Q.Z)(function*(g,y){return(yield g.pushManager.getSubscription())||g.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qa(y)})})).apply(this,arguments)}function cd(g,y){return y.vapidKey===g.vapidKey&&y.endpoint===g.endpoint&&y.auth===g.auth&&y.p256dh===g.p256dh}function Ks(g){const y={from:g.from,collapseKey:g.collapse_key,messageId:g.fcmMessageId};return function Ho(g,y){if(!y.notification)return;g.notification={};const E=y.notification.title;E&&(g.notification.title=E);const T=y.notification.body;T&&(g.notification.body=T);const k=y.notification.image;k&&(g.notification.image=k)}(y,g),function vn(g,y){!y.data||(g.data=y.data)}(y,g),function Rr(g,y){var E,T,k,W,ee;if(!y.fcmOptions&&!(null===(E=y.notification)||void 0===E?void 0:E.click_action))return;g.fcmOptions={};const ue=null!==(k=null===(T=y.fcmOptions)||void 0===T?void 0:T.link)&&void 0!==k?k:null===(W=y.notification)||void 0===W?void 0:W.click_action;ue&&(g.fcmOptions.link=ue);const xe=null===(ee=y.fcmOptions)||void 0===ee?void 0:ee.analytics_label;xe&&(g.fcmOptions.analyticsLabel=xe)}(y,g),y}function Tu(g){return"object"==typeof g&&!!g&&vu in g}function os(g,y){const E=[];for(let T=0;T<g.length;T++)E.push(g.charAt(T)),T<y.length&&E.push(y.charAt(T));return E.join("")}function Su(g){return en.create("missing-app-config-values",{valueName:g})}os("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),os("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dd{constructor(y,E,T){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const k=function Pr(g){if(!g||!g.options)throw Su("App Configuration Object");if(!g.name)throw Su("App Name");const y=["projectId","apiKey","appId","messagingSenderId"],{options:E}=g;for(const T of y)if(!E[T])throw Su(T);return{appName:g.name,projectId:E.projectId,apiKey:E.apiKey,appId:E.appId,senderId:E.messagingSenderId}}(y);this.firebaseDependencies={app:y,appConfig:k,installations:E,analyticsProvider:T}}_delete(){return Promise.resolve()}}function Au(g){return nl.apply(this,arguments)}function nl(){return(nl=(0,Q.Z)(function*(g){var y;try{g.swRegistration=yield navigator.serviceWorker.register($h,{scope:Wh}),g.swRegistration.update().catch(()=>{})}catch(E){throw en.create("failed-service-worker-registration",{browserErrorMessage:null===(y=E)||void 0===y?void 0:y.message})}})).apply(this,arguments)}function rl(g,y){return $o.apply(this,arguments)}function $o(){return($o=(0,Q.Z)(function*(g,y){if(!y&&!g.swRegistration&&(yield Au(g)),y||!g.swRegistration){if(!(y instanceof ServiceWorkerRegistration))throw en.create("invalid-sw-registration");g.swRegistration=y}})).apply(this,arguments)}function fd(g,y){return as.apply(this,arguments)}function as(){return(as=(0,Q.Z)(function*(g,y){y?g.vapidKey=y:g.vapidKey||(g.vapidKey=yu)})).apply(this,arguments)}function Wo(){return(Wo=(0,Q.Z)(function*(g,y){if(!navigator)throw en.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw en.create("permission-blocked");return yield fd(g,null==y?void 0:y.vapidKey),yield rl(g,null==y?void 0:y.serviceWorkerRegistration),se(g)})).apply(this,arguments)}function Go(g,y,E){return ls.apply(this,arguments)}function ls(){return(ls=(0,Q.Z)(function*(g,y,E){const T=il(y);(yield g.firebaseDependencies.analyticsProvider.get()).logEvent(T,{message_id:E[vu],message_name:E[Ya],message_time:E[Cu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(g){switch(g){case ns.NOTIFICATION_CLICKED:return"notification_open";case ns.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sl(){return(sl=(0,Q.Z)(function*(g,y){const E=y.data;if(!E.isFirebaseMessaging)return;g.onMessageHandler&&E.messageType===ns.PUSH_RECEIVED&&("function"==typeof g.onMessageHandler?g.onMessageHandler(Ks(E)):g.onMessageHandler.next(Ks(E)));const T=E.data;Tu(T)&&"1"===T[$n]&&(yield Go(g,E.messageType,T))})).apply(this,arguments)}const zo="@firebase/messaging",Gh=g=>{const y=new dd(g.getProvider("app").getImmediate(),g.getProvider("installations-internal").getImmediate(),g.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",E=>function hd(g,y){return sl.apply(this,arguments)}(y,E)),y},Cn=g=>{const y=g.getProvider("messaging").getImmediate();return{getToken:T=>function Nr(g,y){return Wo.apply(this,arguments)}(y,T)}};function Lt(){return xu.apply(this,arguments)}function xu(){return(xu=(0,Q.Z)(function*(){try{yield(0,V.eu)()}catch(g){return!1}return"undefined"!=typeof window&&(0,V.hl)()&&(0,V.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Si(){(0,Z._registerComponent)(new ae.wA("messaging",Gh,"PUBLIC")),(0,Z._registerComponent)(new ae.wA("messaging-internal",Cn,"PRIVATE")),(0,Z.registerVersion)(zo,"0.9.16"),(0,Z.registerVersion)(zo,"0.9.16","esm2017")}();const Qs="analytics",Ou="firebase_id",zt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",us="https://www.googletagmanager.com/gtag/js",Pe=new he.Yd("@firebase/analytics");function ar(g){return Promise.all(g.map(y=>y.catch(E=>E)))}function Fn(g,y){const E=document.createElement("script");E.src=`${us}?l=${g}&id=${y}`,E.async=!0,document.head.appendChild(E)}function gd(g,y,E,T,k,W){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,Q.Z)(function*(g,y,E,T,k,W){const ee=T[k];try{if(ee)yield y[ee];else{const xe=(yield ar(E)).find(be=>be.measurementId===k);xe&&(yield y[xe.appId])}}catch(ue){Pe.error(ue)}g("config",k,W)})).apply(this,arguments)}function qh(g,y,E,T,k){return cs.apply(this,arguments)}function cs(){return(cs=(0,Q.Z)(function*(g,y,E,T,k){try{let W=[];if(k&&k.send_to){let ee=k.send_to;Array.isArray(ee)||(ee=[ee]);const ue=yield ar(E);for(const xe of ee){const be=ue.find(Ie=>Ie.measurementId===xe),Fe=be&&y[be.appId];if(!Fe){W=[];break}W.push(Fe)}}0===W.length&&(W=Object.values(y)),yield Promise.all(W),g("event",T,k||{})}catch(W){Pe.error(W)}})).apply(this,arguments)}function ai(){const g=window.document.getElementsByTagName("script");for(const y of Object.values(g))if(y.src&&y.src.includes(us))return y;return null}const In=new V.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),un=new class fs{constructor(y={},E=1e3){this.throttleMetadata=y,this.intervalMillis=E}getThrottleMetadata(y){return this.throttleMetadata[y]}setThrottleMetadata(y,E){this.throttleMetadata[y]=E}deleteThrottleMetadata(y){delete this.throttleMetadata[y]}};function Yo(g){return new Headers({Accept:"application/json","x-goog-api-key":g})}function Kh(g){return qo.apply(this,arguments)}function qo(){return(qo=(0,Q.Z)(function*(g){var y;const{appId:E,apiKey:T}=g,k={method:"GET",headers:Yo(T)},W=zt.replace("{app-id}",E),ee=yield fetch(W,k);if(200!==ee.status&&304!==ee.status){let ue="";try{const xe=yield ee.json();(null===(y=xe.error)||void 0===y?void 0:y.message)&&(ue=xe.error.message)}catch(xe){}throw In.create("config-fetch-failed",{httpStatus:ee.status,responseMessage:ue})}return ee.json()})).apply(this,arguments)}function al(g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,Q.Z)(function*(g,y=un,E){const{appId:T,apiKey:k,measurementId:W}=g.options;if(!T)throw In.create("no-app-id");if(!k){if(W)return{measurementId:W,appId:T};throw In.create("no-api-key")}const ee=y.getThrottleMetadata(T)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ue=new Ko;return setTimeout((0,Q.Z)(function*(){ue.abort()}),void 0!==E?E:6e4),eo({appId:T,apiKey:k,measurementId:W},ee,ue,y)})).apply(this,arguments)}function eo(g,y,E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,Q.Z)(function*(g,{throttleEndTimeMillis:y,backoffCount:E},T,k=un){var W,ee;const{appId:ue,measurementId:xe}=g;try{yield hs(T,y)}catch(be){if(xe)return Pe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${null===(W=be)||void 0===W?void 0:W.message}]`),{appId:ue,measurementId:xe};throw be}try{const be=yield Kh(g);return k.deleteThrottleMetadata(ue),be}catch(be){const Fe=be;if(!ps(Fe)){if(k.deleteThrottleMetadata(ue),xe)return Pe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${null==Fe?void 0:Fe.message}]`),{appId:ue,measurementId:xe};throw be}const Ie=503===Number(null===(ee=null==Fe?void 0:Fe.customData)||void 0===ee?void 0:ee.httpStatus)?(0,V.$s)(E,k.intervalMillis,30):(0,V.$s)(E,k.intervalMillis),ct={throttleEndTimeMillis:Date.now()+Ie,backoffCount:E+1};return k.setThrottleMetadata(ue,ct),Pe.debug(`Calling attemptFetch again in ${Ie} millis`),eo(g,ct,T,k)}})).apply(this,arguments)}function hs(g,y){return new Promise((E,T)=>{const k=Math.max(y-Date.now(),0),W=setTimeout(E,k);g.addEventListener(()=>{clearTimeout(W),T(In.create("fetch-throttle",{throttleEndTimeMillis:y}))})})}function ps(g){if(!(g instanceof V.ZR&&g.customData))return!1;const y=Number(g.customData.httpStatus);return 429===y||500===y||503===y||504===y}class Ko{constructor(){this.listeners=[]}addEventListener(y){this.listeners.push(y)}abort(){this.listeners.forEach(y=>y())}}let li,Qo;function to(){return(to=(0,Q.Z)(function*(g,y,E,T,k){if(k&&k.global)g("event",E,T);else{const W=yield y;g("event",E,Object.assign(Object.assign({},T),{send_to:W}))}})).apply(this,arguments)}function Jo(g){Qo=g}function Gn(g){li=g}function ci(){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,Q.Z)(function*(){var g;if(!(0,V.hl)())return Pe.warn(In.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,V.eu)()}catch(y){return Pe.warn(In.create("indexeddb-unavailable",{errorInfo:null===(g=y)||void 0===g?void 0:g.toString()}).message),!1}return!0})).apply(this,arguments)}function _r(){return(_r=(0,Q.Z)(function*(g,y,E,T,k,W,ee){var ue;const xe=al(g);xe.then(pt=>{E[pt.measurementId]=pt.appId,g.options.measurementId&&pt.measurementId!==g.options.measurementId&&Pe.warn(`The measurement ID in the local Firebase config (${g.options.measurementId}) does not match the measurement ID fetched from the server (${pt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pt=>Pe.error(pt)),y.push(xe);const be=ci().then(pt=>{if(pt)return T.getId()}),[Fe,Ie]=yield Promise.all([xe,be]);ai()||Fn(W,Fe.measurementId),Qo&&(k("consent","default",Qo),Jo(void 0)),k("js",new Date);const ct=null!==(ue=null==ee?void 0:ee.config)&&void 0!==ue?ue:{};return ct.origin="firebase",ct.update=!0,null!=Ie&&(ct[Ou]=Ie),k("config",Fe.measurementId,ct),li&&(k("set",li),Gn(void 0)),Fe.measurementId})).apply(this,arguments)}class Ri{constructor(y){this.app=y}_delete(){return delete Sn[this.app.options.appId],Promise.resolve()}}let Sn={},Xo=[];const ea={};let Lu,nt,An="dataLayer",ro=!1;function Zh(g,y,E){!function yd(){const g=[];if((0,V.ru)()&&g.push("This is a browser extension environment."),(0,V.zI)()||g.push("Cookies are not available."),g.length>0){const y=g.map((T,k)=>`(${k+1}) ${T}`).join(" "),E=In.create("invalid-analytics-context",{errorInfo:y});Pe.warn(E.message)}}();const T=g.options.appId;if(!T)throw In.create("no-app-id");if(!g.options.apiKey){if(!g.options.measurementId)throw In.create("no-api-key");Pe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${g.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sn[T])throw In.create("already-exists",{id:T});if(!ro){!function Js(g){let y=[];Array.isArray(window[g])?y=window[g]:window[g]=y}(An);const{wrappedGtag:W,gtagCore:ee}=function ol(g,y,E,T,k){let W=function(...ee){window[T].push(arguments)};return window[k]&&"function"==typeof window[k]&&(W=window[k]),window[k]=function ku(g,y,E,T){function W(){return(W=(0,Q.Z)(function*(ee,ue,xe){try{"event"===ee?yield qh(g,y,E,ue,xe):"config"===ee?yield gd(g,y,E,T,ue,xe):"consent"===ee?g("consent","update",xe):g("set",ue)}catch(be){Pe.error(be)}})).apply(this,arguments)}return function k(ee,ue,xe){return W.apply(this,arguments)}}(W,g,y,E),{gtagCore:W,wrappedGtag:window[k]}}(Sn,Xo,ea,An,"gtag");nt=W,Lu=ee,ro=!0}return Sn[T]=function xi(g,y,E,T,k,W,ee){return _r.apply(this,arguments)}(g,Xo,ea,y,Lu,An,E),new Ri(g)}function Jh(){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,Q.Z)(function*(){if((0,V.ru)()||!(0,V.zI)()||!(0,V.hl)())return!1;try{return yield(0,V.eu)()}catch(g){return!1}})).apply(this,arguments)}const zn="@firebase/analytics";!function na(){(0,Z._registerComponent)(new ae.wA(Qs,(y,{options:E})=>Zh(y.getProvider("app").getImmediate(),y.getProvider("installations-internal").getImmediate(),E),"PUBLIC")),(0,Z._registerComponent)(new ae.wA("analytics-internal",function g(y){try{const E=y.getProvider(Qs).getImmediate();return{logEvent:(T,k,W)=>function vd(g,y,E,T){g=(0,V.m9)(g),function ll(g,y,E,T,k){return to.apply(this,arguments)}(nt,Sn[g.app.options.appId],y,E,T).catch(k=>Pe.error(k))}(E,T,k,W)}}catch(E){throw In.create("interop-component-reg-failed",{reason:E})}},"PRIVATE")),(0,Z.registerVersion)(zn,"0.8.0"),(0,Z.registerVersion)(zn,"0.8.0","esm2017")}();const ur=new v.GfV("7.4.1"),io="__angularfire_symbol__analyticsIsSupportedValue",so="__angularfire_symbol__analyticsIsSupported",fl="__angularfire_symbol__remoteConfigIsSupportedValue",Bu="__angularfire_symbol__remoteConfigIsSupported",ju="__angularfire_symbol__messagingIsSupportedValue",Ln="__angularfire_symbol__messagingIsSupported";globalThis[so]||(globalThis[so]=Jh().then(g=>globalThis[io]=g).catch(()=>globalThis[io]=!1)),globalThis[Ln]||(globalThis[Ln]=Lt().then(g=>globalThis[ju]=g).catch(()=>globalThis[ju]=!1)),globalThis[Bu]||(globalThis[Bu]=Ga().then(g=>globalThis[fl]=g).catch(()=>globalThis[fl]=!1)),ke=R.hmd(ke);class Oi{constructor(y){return y}}const sa=new v.OlP("angularfire2.app.options"),Vu=new v.OlP("angularfire2.app.name"),Hu={provide:Oi,useFactory:function Ht(g,y,E){const k="object"==typeof E&&E||{};k.name=k.name||"string"==typeof E&&E||"[DEFAULT]";const ee=ge.apps.filter(ue=>ue&&ue.name===k.name)[0]||y.runOutsideAngular(()=>ge.initializeApp(g,k));try{JSON.stringify(g)!==JSON.stringify(ee.options)&&((g,...y)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[g](...y)})("error",`${ee.name} Firebase App already initialized with different options${ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ue){}return new Oi(ee)},deps:[sa,v.R0b,[new v.FiY,Vu]]};let vs=(()=>{class g{constructor(E){ge.registerVersion("angularfire",ur.full,"core"),ge.registerVersion("angularfire",ur.full,"app-compat"),ge.registerVersion("angular",v.q4F.full,E.toString())}static initializeApp(E,T){return{ngModule:g,providers:[{provide:sa,useValue:E},{provide:Vu,useValue:T}]}}}return g.\u0275fac=function(E){return new(E||g)(v.LFG(v.Lbi))},g.\u0275mod=v.oAB({type:g}),g.\u0275inj=v.cJS({providers:[Hu]}),g})();globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},90:(ke,ce,R)=>{R.d(ce,{BH:()=>Ae,LL:()=>Y,ZR:()=>K,gQ:()=>Vn,zI:()=>j,hu:()=>V,g5:()=>ae,US:()=>Re,h$:()=>ve,L:()=>Me,$s:()=>on,r3:()=>pn,ne:()=>tr,p$:()=>B,vZ:()=>Bs,ZB:()=>L,gK:()=>gn,m9:()=>Di,GJ:()=>sn,jU:()=>He,ru:()=>it,xb:()=>gt,hl:()=>q,uI:()=>ge,Yr:()=>et,b$:()=>Q,w9:()=>Mt,cI:()=>qe,UI:()=>lt,xO:()=>jt,DV:()=>gr,ug:()=>Te,dS:()=>Rt,Pz:()=>xt,eu:()=>de});const V=function(x,N){if(!x)throw ae(N)},ae=function(x){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+x)},Z=function(x){const N=[];let S=0;for(let F=0;F<x.length;F++){let P=x.charCodeAt(F);P<128?N[S++]=P:P<2048?(N[S++]=P>>6|192,N[S++]=63&P|128):55296==(64512&P)&&F+1<x.length&&56320==(64512&x.charCodeAt(F+1))?(P=65536+((1023&P)<<10)+(1023&x.charCodeAt(++F)),N[S++]=P>>18|240,N[S++]=P>>12&63|128,N[S++]=P>>6&63|128,N[S++]=63&P|128):(N[S++]=P>>12|224,N[S++]=P>>6&63|128,N[S++]=63&P|128)}return N},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(x,N){if(!Array.isArray(x))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,F=[];for(let P=0;P<x.length;P+=3){const re=x[P],le=P+1<x.length,Be=le?x[P+1]:0,ft=P+2<x.length,mt=ft?x[P+2]:0;let mn=(15&Be)<<2|mt>>6,Jr=63&mt;ft||(Jr=64,le||(mn=64)),F.push(S[re>>2],S[(3&re)<<4|Be>>4],S[mn],S[Jr])}return F.join("")},encodeString(x,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(x):this.encodeByteArray(Z(x),N)},decodeString(x,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(x):function(x){const N=[];let S=0,F=0;for(;S<x.length;){const P=x[S++];if(P<128)N[F++]=String.fromCharCode(P);else if(P>191&&P<224){const re=x[S++];N[F++]=String.fromCharCode((31&P)<<6|63&re)}else if(P>239&&P<365){const ft=((7&P)<<18|(63&x[S++])<<12|(63&x[S++])<<6|63&x[S++])-65536;N[F++]=String.fromCharCode(55296+(ft>>10)),N[F++]=String.fromCharCode(56320+(1023&ft))}else{const re=x[S++],le=x[S++];N[F++]=String.fromCharCode((15&P)<<12|(63&re)<<6|63&le)}}return N.join("")}(this.decodeStringToByteArray(x,N))},decodeStringToByteArray(x,N){this.init_();const S=N?this.charToByteMapWebSafe_:this.charToByteMap_,F=[];for(let P=0;P<x.length;){const re=S[x.charAt(P++)],Be=P<x.length?S[x.charAt(P)]:0;++P;const mt=P<x.length?S[x.charAt(P)]:64;++P;const Ze=P<x.length?S[x.charAt(P)]:64;if(++P,null==re||null==Be||null==mt||null==Ze)throw Error();F.push(re<<2|Be>>4),64!==mt&&(F.push(Be<<4&240|mt>>2),64!==Ze&&F.push(mt<<6&192|Ze))}return F},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let x=0;x<this.ENCODED_VALS.length;x++)this.byteToCharMap_[x]=this.ENCODED_VALS.charAt(x),this.charToByteMap_[this.byteToCharMap_[x]]=x,this.byteToCharMapWebSafe_[x]=this.ENCODED_VALS_WEBSAFE.charAt(x),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[x]]=x,x>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(x)]=x,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(x)]=x)}}},ve=function(x){const N=Z(x);return Re.encodeByteArray(N,!0)},Me=function(x){return ve(x).replace(/\./g,"")},De=function(x){try{return Re.decodeString(x,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function B(x){return L(void 0,x)}function L(x,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:return new Date(N.getTime());case Object:void 0===x&&(x={});break;case Array:x=[];break;default:return N}for(const S in N)!N.hasOwnProperty(S)||!ie(S)||(x[S]=L(x[S],N[S]));return x}function ie(x){return"__proto__"!==x}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((N,S)=>{this.resolve=N,this.reject=S})}wrapCallback(N){return(S,F)=>{S?this.reject(S):this.resolve(F),"function"==typeof N&&(this.promise.catch(()=>{}),1===N.length?N(S):N(S,F))}}}function ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function He(){return"object"==typeof self&&self.self===self}function it(){const x="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof x&&void 0!==x.id}function Q(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){return!1}function q(){return"object"==typeof indexedDB}function de(){return new Promise((x,N)=>{try{let S=!0;const F="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(F);P.onsuccess=()=>{P.result.close(),S||self.indexedDB.deleteDatabase(F),x(!0)},P.onupgradeneeded=()=>{S=!1},P.onerror=()=>{var re;N((null===(re=P.error)||void 0===re?void 0:re.message)||"")}}catch(S){N(S)}})}function j(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class K extends Error{constructor(N,S,F){super(S),this.code=N,this.customData=F,this.name="FirebaseError",Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(N,S,F){this.service=N,this.serviceName=S,this.errors=F}create(N,...S){const F=S[0]||{},P=`${this.service}/${N}`,re=this.errors[N],le=re?function pe(x,N){return x.replace(Le,(S,F)=>{const P=N[F];return null!=P?String(P):`<${F}?>`})}(re,F):"Error";return new K(P,`${this.serviceName}: ${le} (${P}).`,F)}}const Le=/\{\$([^}]+)}/g;function qe(x){return JSON.parse(x)}function xt(x){return JSON.stringify(x)}const Ge=function(x){let N={},S={},F={},P="";try{const re=x.split(".");N=qe(De(re[0])||""),S=qe(De(re[1])||""),P=re[2],F=S.d||{},delete S.d}catch(re){}return{header:N,claims:S,data:F,signature:P}},Mt=function(x){const S=Ge(x).claims;return!!S&&"object"==typeof S&&S.hasOwnProperty("iat")},sn=function(x){const N=Ge(x).claims;return"object"==typeof N&&!0===N.admin};function pn(x,N){return Object.prototype.hasOwnProperty.call(x,N)}function gr(x,N){if(Object.prototype.hasOwnProperty.call(x,N))return x[N]}function gt(x){for(const N in x)if(Object.prototype.hasOwnProperty.call(x,N))return!1;return!0}function lt(x,N,S){const F={};for(const P in x)Object.prototype.hasOwnProperty.call(x,P)&&(F[P]=N.call(S,x[P],P,x));return F}function Bs(x,N){if(x===N)return!0;const S=Object.keys(x),F=Object.keys(N);for(const P of S){if(!F.includes(P))return!1;const re=x[P],le=N[P];if(er(re)&&er(le)){if(!Bs(re,le))return!1}else if(re!==le)return!1}for(const P of F)if(!S.includes(P))return!1;return!0}function er(x){return null!==x&&"object"==typeof x}function jt(x){const N=[];for(const[S,F]of Object.entries(x))Array.isArray(F)?F.forEach(P=>{N.push(encodeURIComponent(S)+"="+encodeURIComponent(P))}):N.push(encodeURIComponent(S)+"="+encodeURIComponent(F));return N.length?"&"+N.join("&"):""}class Vn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let N=1;N<this.blockSize;++N)this.pad_[N]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(N,S){S||(S=0);const F=this.W_;if("string"==typeof N)for(let Ze=0;Ze<16;Ze++)F[Ze]=N.charCodeAt(S)<<24|N.charCodeAt(S+1)<<16|N.charCodeAt(S+2)<<8|N.charCodeAt(S+3),S+=4;else for(let Ze=0;Ze<16;Ze++)F[Ze]=N[S]<<24|N[S+1]<<16|N[S+2]<<8|N[S+3],S+=4;for(let Ze=16;Ze<80;Ze++){const mn=F[Ze-3]^F[Ze-8]^F[Ze-14]^F[Ze-16];F[Ze]=4294967295&(mn<<1|mn>>>31)}let mt,rr,P=this.chain_[0],re=this.chain_[1],le=this.chain_[2],Be=this.chain_[3],ft=this.chain_[4];for(let Ze=0;Ze<80;Ze++){Ze<40?Ze<20?(mt=Be^re&(le^Be),rr=1518500249):(mt=re^le^Be,rr=1859775393):Ze<60?(mt=re&le|Be&(re|le),rr=2400959708):(mt=re^le^Be,rr=3395469782);const mn=(P<<5|P>>>27)+mt+ft+rr+F[Ze]&4294967295;ft=Be,Be=le,le=4294967295&(re<<30|re>>>2),re=P,P=mn}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+re&4294967295,this.chain_[2]=this.chain_[2]+le&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+ft&4294967295}update(N,S){if(null==N)return;void 0===S&&(S=N.length);const F=S-this.blockSize;let P=0;const re=this.buf_;let le=this.inbuf_;for(;P<S;){if(0===le)for(;P<=F;)this.compress_(N,P),P+=this.blockSize;if("string"==typeof N){for(;P<S;)if(re[le]=N.charCodeAt(P),++le,++P,le===this.blockSize){this.compress_(re),le=0;break}}else for(;P<S;)if(re[le]=N[P],++le,++P,le===this.blockSize){this.compress_(re),le=0;break}}this.inbuf_=le,this.total_+=S}digest(){const N=[];let S=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&S,S/=256;this.compress_(this.buf_);let F=0;for(let P=0;P<5;P++)for(let re=24;re>=0;re-=8)N[F]=this.chain_[P]>>re&255,++F;return N}}function tr(x,N){const S=new vi(x,N);return S.subscribe.bind(S)}class vi{constructor(N,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{N(this)}).catch(F=>{this.error(F)})}next(N){this.forEachObserver(S=>{S.next(N)})}error(N){this.forEachObserver(S=>{S.error(N)}),this.close(N)}complete(){this.forEachObserver(N=>{N.complete()}),this.close()}subscribe(N,S,F){let P;if(void 0===N&&void 0===S&&void 0===F)throw new Error("Missing Observer.");P=function Zr(x,N){if("object"!=typeof x||null===x)return!1;for(const S of N)if(S in x&&"function"==typeof x[S])return!0;return!1}(N,["next","error","complete"])?N:{next:N,error:S,complete:F},void 0===P.next&&(P.next=nr),void 0===P.error&&(P.error=nr),void 0===P.complete&&(P.complete=nr);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch(le){}}),this.observers.push(P),re}unsubscribeOne(N){void 0===this.observers||void 0===this.observers[N]||(delete this.observers[N],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(N){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,N)}sendOne(N,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[N])try{S(this.observers[N])}catch(F){"undefined"!=typeof console&&console.error&&console.error(F)}})}close(N){this.finalized||(this.finalized=!0,void 0!==N&&(this.finalError=N),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}function gn(x,N){return`${x} failed: ${N} argument `}const Rt=function(x){const N=[];let S=0;for(let F=0;F<x.length;F++){let P=x.charCodeAt(F);if(P>=55296&&P<=56319){const re=P-55296;F++,V(F<x.length,"Surrogate pair missing trail surrogate."),P=65536+(re<<10)+(x.charCodeAt(F)-56320)}P<128?N[S++]=P:P<2048?(N[S++]=P>>6|192,N[S++]=63&P|128):P<65536?(N[S++]=P>>12|224,N[S++]=P>>6&63|128,N[S++]=63&P|128):(N[S++]=P>>18|240,N[S++]=P>>12&63|128,N[S++]=P>>6&63|128,N[S++]=63&P|128)}return N},Te=function(x){let N=0;for(let S=0;S<x.length;S++){const F=x.charCodeAt(S);F<128?N++:F<2048?N+=2:F>=55296&&F<=56319?(N+=4,S++):N+=3}return N};function on(x,N=1e3,S=2){const F=N*Math.pow(S,x),P=Math.round(.5*F*(Math.random()-.5)*2);return Math.min(144e5,F+P)}function Di(x){return x&&x._delegate?x._delegate:x}},832:(ke,ce,R)=>{var v=R(223);let V=null;function ae(){return V}const ve=new v.OlP("DocumentToken");let Me=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=v.Yz7({token:i,factory:function(){return function De(){return(0,v.LFG)(L)}()},providedIn:"platform"}),i})();const B=new v.OlP("Location Initialized");let L=(()=>{class i extends Me{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState(e){const o=ae().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=ae().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,l){ie()?this._history.pushState(e,o,l):this.location.hash=l}replaceState(e,o,l){ie()?this._history.replaceState(e,o,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(ve))},i.\u0275prov=v.Yz7({token:i,factory:function(){return function Ae(){return new L((0,v.LFG)(ve))}()},providedIn:"platform"}),i})();function ie(){return!!window.history.pushState}function ne(i,r){if(0==i.length)return r;if(0==r.length)return i;let e=0;return i.endsWith("/")&&e++,r.startsWith("/")&&e++,2==e?i+r.substring(1):1==e?i+r:i+"/"+r}function ze(i){const r=i.match(/#|\?|$/),e=r&&r.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ge(i){return i&&"?"!==i[0]?"?"+i:i}let Ne=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=v.Yz7({token:i,factory:function(){return function He(i){const r=(0,v.LFG)(ve).location;return new Q((0,v.LFG)(Me),r&&r.origin||"")}()},providedIn:"root"}),i})();const it=new v.OlP("appBaseHref");let Q=(()=>{class i extends Ne{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ne(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+ge(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${o}${l}`:o}pushState(e,o,l,d){const h=this.prepareExternalUrl(l+ge(d));this._platformLocation.pushState(e,o,h)}replaceState(e,o,l,d){const h=this.prepareExternalUrl(l+ge(d));this._platformLocation.replaceState(e,o,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformLocation).historyGo)||void 0===l||l.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(Me),v.LFG(it,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),Ee=(()=>{class i extends Ne{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=ne(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,l,d){let h=this.prepareExternalUrl(l+ge(d));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(e,o,h)}replaceState(e,o,l,d){let h=this.prepareExternalUrl(l+ge(d));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformLocation).historyGo)||void 0===l||l.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(Me),v.LFG(it,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),me=(()=>{class i{constructor(e,o){this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const l=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=ze(oe(l)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+ge(o))}normalize(e){return i.stripTrailingSlash(function et(i,r){return i&&r.startsWith(i)?r.substring(i.length):r}(this._baseHref,oe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",l=null){this._platformStrategy.pushState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ge(o)),l)}replaceState(e,o="",l=null){this._platformStrategy.replaceState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ge(o)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformStrategy).historyGo)||void 0===l||l.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(l=>l(e,o))}subscribe(e,o,l){return this._subject.subscribe({next:e,error:o,complete:l})}}return i.normalizeQueryParams=ge,i.joinWithSlash=ne,i.stripTrailingSlash=ze,i.\u0275fac=function(e){return new(e||i)(v.LFG(Ne),v.LFG(Me))},i.\u0275prov=v.Yz7({token:i,factory:function(){return function _e(){return new me((0,v.LFG)(Ne),(0,v.LFG)(Me))}()},providedIn:"root"}),i})();function oe(i){return i.replace(/\/index.html$/,"")}class wi{constructor(r,e,o,l){this.$implicit=r,this.ngForOf=e,this.index=o,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ft=(()=>{class i{constructor(e,o,l){this._viewContainer=e,this._template=o,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=this._viewContainer;e.forEachOperation((l,d,h)=>{if(null==l.previousIndex)o.createEmbeddedView(this._template,new wi(l.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)o.remove(null===d?void 0:d);else if(null!==d){const m=o.get(d);o.move(m,h),Ji(m,l)}});for(let l=0,d=o.length;l<d;l++){const m=o.get(l).context;m.index=l,m.count=d,m.ngForOf=this._ngForOf}e.forEachIdentityChange(l=>{Ji(o.get(l.currentIndex),l)})}static ngTemplateContextGuard(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function Ji(i,r){i.context.$implicit=r.item}let Hh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i})();let vu=(()=>{class i{}return i.\u0275prov=(0,v.Yz7)({token:i,providedIn:"root",factory:()=>new Ya((0,v.LFG)(ve),window)}),i})();class Ya{constructor(r,e){this.document=r,this.window=e,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const e=function $n(i,r){const e=i.getElementById(r)||i.getElementsByName(r)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=o.currentNode;for(;l;){const d=l.shadowRoot;if(d){const h=d.getElementById(r)||d.querySelector(`[name="${r}"]`);if(h)return h}l=o.nextNode()}}return null}(this.document,r);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=r)}}scrollToElement(r){const e=r.getBoundingClientRect(),o=e.left+this.window.pageXOffset,l=e.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(o-d[0],l-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=Cu(this.window.history)||Cu(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch(r){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(r){return!1}}}function Cu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class qa extends class sr extends class Re{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(i){V||(V=i)}(new qa)}onAndCancel(r,e,o){return r.addEventListener(e,o,!1),()=>{r.removeEventListener(e,o,!1)}}dispatchEvent(r,e){r.dispatchEvent(e)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,e){return(e=e||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,e){return"window"===e?window:"document"===e?r:"body"===e?r.body:null}getBaseHref(r){const e=function Ka(){return Ii=Ii||document.querySelector("base"),Ii?Ii.getAttribute("href"):null}();return null==e?null:function Za(i){$s=$s||document.createElement("a"),$s.setAttribute("href",i);const r=$s.pathname;return"/"===r.charAt(0)?r:`/${r}`}(e)}resetBaseElement(){Ii=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return function _n(i,r){r=encodeURIComponent(r);for(const e of i.split(";")){const o=e.indexOf("="),[l,d]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(l.trim()===r)return decodeURIComponent(d)}return null}(document.cookie,r)}}let $s,Ii=null;const Qa=new v.OlP("TRANSITION_ID"),Du=[{provide:v.ip1,useFactory:function kt(i,r,e){return()=>{e.get(v.CZH).donePromise.then(()=>{const o=ae(),l=r.querySelectorAll(`style[ng-transition="${i}"]`);for(let d=0;d<l.length;d++)o.remove(l[d])})}},deps:[Qa,ve,v.zs3],multi:!0}];class Ja{static init(){(0,v.VLi)(new Ja)}addToWindow(r){v.dqk.getAngularTestability=(o,l=!0)=>{const d=r.findTestabilityInTree(o,l);if(null==d)throw new Error("Could not find testability for element.");return d},v.dqk.getAllAngularTestabilities=()=>r.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>r.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(o=>{const l=v.dqk.getAllAngularTestabilities();let d=l.length,h=!1;const m=function(D){h=h||D,d--,0==d&&o(h)};l.forEach(function(D){D.whenStable(m)})})}findTestabilityInTree(r,e,o){if(null==e)return null;const l=r.getTestability(e);return null!=l?l:o?ae().isShadowRoot(e)?this.findTestabilityInTree(r,e.host,!0):this.findTestabilityInTree(r,e.parentElement,!0):null}}let Et=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const rs=new v.OlP("EventManagerPlugins");let Ws=(()=>{class i{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,l){return this._findPluginFor(o).addEventListener(e,o,l)}addGlobalEventListener(e,o,l){return this._findPluginFor(o).addGlobalEventListener(e,o,l)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const l=this._plugins;for(let d=0;d<l.length;d++){const h=l[d];if(h.supports(e))return this._eventNameToPlugin.set(e,h),h}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(rs),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();class is{constructor(r){this._doc=r}addGlobalEventListener(r,e,o){const l=ae().getGlobalEventTarget(this._doc,r);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,o)}}let yn=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),o.add(l))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),Ti=(()=>{class i extends yn{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,l){e.forEach(d=>{const h=this._doc.createElement("style");h.textContent=d,l.push(o.appendChild(h))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(ss),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,l)=>{this._addStylesToHost(e,l,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ss))}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(ve))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function ss(i){ae().remove(i)}const ri={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xt=/%COMP%/g;function je(i,r,e){for(let o=0;o<r.length;o++){let l=r[o];Array.isArray(l)?je(i,l,e):(l=l.replace(Xt,i),e.push(l))}return e}function Eu(i){return r=>{if("__ngUnwrap__"===r)return i;!1===i(r)&&(r.preventDefault(),r.returnValue=!1)}}let zs=(()=>{class i{constructor(e,o,l){this.eventManager=e,this.sharedStylesHost=o,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new Ys(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case v.ifc.Emulated:{let l=this.rendererByCompId.get(o.id);return l||(l=new ud(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,l)),l.applyToHost(e),l}case 1:case v.ifc.ShadowDom:return new se(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const l=je(o.id,o.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(Ws),v.LFG(Ti),v.LFG(v.AFp))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();class Ys{constructor(r){this.eventManager=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(r,e){return e?document.createElementNS(ri[e]||e,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,e){r.appendChild(e)}insertBefore(r,e,o){r&&r.insertBefore(e,o)}removeChild(r,e){r&&r.removeChild(e)}selectRootElement(r,e){let o="string"==typeof r?document.querySelector(r):r;if(!o)throw new Error(`The selector "${r}" did not match any elements`);return e||(o.textContent=""),o}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,e,o,l){if(l){e=l+":"+e;const d=ri[l];d?r.setAttributeNS(d,e,o):r.setAttribute(e,o)}else r.setAttribute(e,o)}removeAttribute(r,e,o){if(o){const l=ri[o];l?r.removeAttributeNS(l,e):r.removeAttribute(`${o}:${e}`)}else r.removeAttribute(e)}addClass(r,e){r.classList.add(e)}removeClass(r,e){r.classList.remove(e)}setStyle(r,e,o,l){l&(v.JOm.DashCase|v.JOm.Important)?r.style.setProperty(e,o,l&v.JOm.Important?"important":""):r.style[e]=o}removeStyle(r,e,o){o&v.JOm.DashCase?r.style.removeProperty(e):r.style[e]=""}setProperty(r,e,o){r[e]=o}setValue(r,e){r.nodeValue=e}listen(r,e,o){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,e,Eu(o)):this.eventManager.addEventListener(r,e,Eu(o))}}class ud extends Ys{constructor(r,e,o,l){super(r),this.component=o;const d=je(l+"-"+o.id,o.styles,[]);e.addStyles(d),this.contentAttr=function jo(i){return"_ngcontent-%COMP%".replace(Xt,i)}(l+"-"+o.id),this.hostAttr=function Xa(i){return"_nghost-%COMP%".replace(Xt,i)}(l+"-"+o.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,e){const o=super.createElement(r,e);return super.setAttribute(o,this.contentAttr,""),o}}class se extends Ys{constructor(r,e,o,l){super(r),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=je(l.id,l.styles,[]);for(let h=0;h<d.length;h++){const m=document.createElement("style");m.textContent=d[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,e){return super.appendChild(this.nodeOrShadowRoot(r),e)}insertBefore(r,e,o){return super.insertBefore(this.nodeOrShadowRoot(r),e,o)}removeChild(r,e){return super.removeChild(this.nodeOrShadowRoot(r),e)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let st=(()=>{class i extends is{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,l){return e.addEventListener(o,l,!1),()=>this.removeEventListener(e,o,l)}removeEventListener(e,o,l){return e.removeEventListener(o,l)}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(ve))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const Vo=["alt","control","meta","shift"],bu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},si={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},or={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let qs=(()=>{class i extends is{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,o,l){const d=i.parseEventName(o),h=i.eventCallback(d.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ae().onAndCancel(e,d.domEventName,h))}static parseEventName(e){const o=e.toLowerCase().split("."),l=o.shift();if(0===o.length||"keydown"!==l&&"keyup"!==l)return null;const d=i._normalizeKey(o.pop());let h="";if(Vo.forEach(D=>{const b=o.indexOf(D);b>-1&&(o.splice(b,1),h+=D+".")}),h+=d,0!=o.length||0===d.length)return null;const m={};return m.domEventName=l,m.fullKey=h,m}static getEventFullKey(e){let o="",l=function tl(i){let r=i.key;if(null==r){if(r=i.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===i.location&&si.hasOwnProperty(r)&&(r=si[r]))}return bu[r]||r}(e);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),Vo.forEach(d=>{d!=l&&or[d](e)&&(o+=d+".")}),o+=l,o}static eventCallback(e,o,l){return d=>{i.getEventFullKey(d)===e&&l.runGuarded(()=>o(d))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(ve))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const vn=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function Iu(){qa.makeCurrent(),Ja.init()},multi:!0},{provide:ve,useFactory:function Ks(){return(0,v.RDi)(document),document},deps:[]}]),Rr=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function cd(){return new v.qLn},deps:[]},{provide:rs,useClass:st,multi:!0,deps:[ve,v.R0b,v.Lbi]},{provide:rs,useClass:qs,multi:!0,deps:[ve]},{provide:zs,useClass:zs,deps:[Ws,Ti,v.AFp]},{provide:v.FYo,useExisting:zs},{provide:yn,useExisting:Ti},{provide:Ti,useClass:Ti,deps:[ve]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:Ws,useClass:Ws,deps:[rs,v.R0b]},{provide:class ns{},useClass:Et,deps:[]}];let Tu=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:v.AFp,useValue:e.appId},{provide:Qa,useExisting:v.AFp},Du]}}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(i,12))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:Rr,imports:[Hh,v.hGG]}),i})();"undefined"!=typeof window&&window;var oi=R(773),zt=R(76),us=R(669);function Pe(...i){const r=(0,us.yG)(i);return(0,zt.D)(i,r)}var ar=R(579);class Fn extends ar.x{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const e=super._subscribe(r);return!e.closed&&r.next(this._value),e}getValue(){const{hasError:r,thrownError:e,_value:o}=this;if(r)throw e;return this._throwIfClosed(),o}next(r){super.next(this._value=r)}}var Js=R(306);const{isArray:gd}=Array,{getPrototypeOf:Fu,prototype:qh,keys:cs}=Object;var ai=R(671),St=R(4);const{isArray:In}=Array;var un=R(403),Yo=R(672);function Kh(...i){const r=(0,us.yG)(i),e=(0,us.jO)(i),{args:o,keys:l}=function ku(i){if(1===i.length){const r=i[0];if(gd(r))return{args:r,keys:null};if(function ol(i){return i&&"object"==typeof i&&Fu(i)===qh}(r)){const e=cs(r);return{args:e.map(o=>r[o]),keys:e}}}return{args:i,keys:null}}(i);if(0===o.length)return(0,zt.D)([],r);const d=new Js.y(function qo(i,r,e=ai.y){return o=>{al(r,()=>{const{length:l}=i,d=new Array(l);let h=l,m=l;for(let D=0;D<l;D++)al(r,()=>{const b=(0,zt.D)(i[D],r);let O=!1;b.subscribe((0,un.x)(o,A=>{d[D]=A,O||(O=!0,m--),m||o.next(e(d.slice()))},()=>{--h||o.complete()}))},o)},o)}}(o,r,l?h=>function fs(i,r){return i.reduce((e,o,l)=>(e[o]=r[l],e),{})}(l,h):ai.y));return e?d.pipe(function md(i){return(0,St.U)(r=>function ds(i,r){return In(r)?i(...r):i(r)}(i,r))}(e)):d}function al(i,r,e){i?(0,Yo.f)(e,i,r):r()}var Xs=R(576);function eo(i,r){const e=(0,Xs.m)(i)?i:()=>i,o=l=>l.error(e());return new Js.y(r?l=>r.schedule(o,0,l):o)}const hs=(0,R(888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var ps=R(189);function li(...i){return function Ko(){return(0,ps.J)(1)}()((0,zt.D)(i,(0,us.yG)(i)))}var ll=R(421);function to(i){return new Js.y(r=>{(0,ll.Xf)(i()).subscribe(r)})}var ui=R(515),no=R(727),Tn=R(482);function Zo(){return(0,Tn.e)((i,r)=>{let e=null;i._refCount++;const o=(0,un.x)(r,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const l=i._connection,d=e;e=null,l&&(!d||l===d)&&l.unsubscribe(),r.unsubscribe()});i.subscribe(o),o.closed||(e=i.connect())})}class _d extends Js.y{constructor(r,e){super(),this.source=r,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Tn.A)(r)&&(this.lift=r.lift)}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:r}=this;this._subject=this._connection=null,null==r||r.unsubscribe()}connect(){let r=this._connection;if(!r){r=this._connection=new no.w0;const e=this.getSubject();r.add(this.source.subscribe((0,un.x)(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),r.closed&&(this._connection=null,r=no.w0.EMPTY)}return r}refCount(){return Zo()(this)}}function Wn(i,r){return(0,Tn.e)((e,o)=>{let l=null,d=0,h=!1;const m=()=>h&&!l&&o.complete();e.subscribe((0,un.x)(o,D=>{null==l||l.unsubscribe();let b=0;const O=d++;(0,ll.Xf)(i(D,O)).subscribe(l=(0,un.x)(o,A=>o.next(r?r(D,A,O,b++):A),()=>{l=null,m()}))},()=>{h=!0,m()}))})}function Mi(i){return i<=0?()=>ui.E:(0,Tn.e)((r,e)=>{let o=0;r.subscribe((0,un.x)(e,l=>{++o<=i&&(e.next(l),i<=o&&e.complete())}))})}function Qo(i,r,e,o,l){return(d,h)=>{let m=e,D=r,b=0;d.subscribe((0,un.x)(h,O=>{const A=b++;D=m?i(D,O,A):(m=!0,O),o&&h.next(D)},l&&(()=>{m&&h.next(D),h.complete()})))}}function Jo(i,r){return(0,Tn.e)(Qo(i,r,arguments.length>=2,!0))}function Gn(i,r){return(0,Tn.e)((e,o)=>{let l=0;e.subscribe((0,un.x)(o,d=>i.call(r,d,l++)&&o.next(d)))})}function ci(i){return(0,Tn.e)((r,e)=>{let d,o=null,l=!1;o=r.subscribe((0,un.x)(e,void 0,void 0,h=>{d=(0,ll.Xf)(i(h,ci(i)(r))),o?(o.unsubscribe(),o=null,d.subscribe(e)):l=!0})),l&&(o.unsubscribe(),o=null,d.subscribe(e))})}var Wt=R(577);function xi(i,r){return(0,Xs.m)(r)?(0,Wt.z)(i,r,1):(0,Wt.z)(i,1)}function _r(i){return i<=0?()=>ui.E:(0,Tn.e)((r,e)=>{let o=[];r.subscribe((0,un.x)(e,l=>{o.push(l),i<o.length&&o.shift()},()=>{for(const l of o)e.next(l);e.complete()},void 0,()=>{o=null}))})}function Ri(i=Sn){return(0,Tn.e)((r,e)=>{let o=!1;r.subscribe((0,un.x)(e,l=>{o=!0,e.next(l)},()=>o?e.complete():e.error(i())))})}function Sn(){return new hs}function Xo(i){return(0,Tn.e)((r,e)=>{let o=!1;r.subscribe((0,un.x)(e,l=>{o=!0,e.next(l)},()=>{o||e.next(i),e.complete()}))})}function An(i,r){const e=arguments.length>=2;return o=>o.pipe(i?Gn((l,d)=>i(l,d,o)):ai.y,Mi(1),e?Xo(r):Ri(()=>new hs))}function kn(i,r,e){const o=(0,Xs.m)(i)||r||e?{next:i,error:r,complete:e}:i;return o?(0,Tn.e)((l,d)=>{var h;null===(h=o.subscribe)||void 0===h||h.call(o);let m=!0;l.subscribe((0,un.x)(d,D=>{var b;null===(b=o.next)||void 0===b||b.call(o,D),d.next(D)},()=>{var D;m=!1,null===(D=o.complete)||void 0===D||D.call(o),d.complete()},D=>{var b;m=!1,null===(b=o.error)||void 0===b||b.call(o,D),d.error(D)},()=>{var D,b;m&&(null===(D=o.unsubscribe)||void 0===D||D.call(o)),null===(b=o.finalize)||void 0===b||b.call(o)}))}):ai.y}class nt{constructor(r,e){this.id=r,this.url=e}}class ro extends nt{constructor(r,e,o="imperative",l=null){super(r,e),this.navigationTrigger=o,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cl extends nt{constructor(r,e,o){super(r,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yd extends nt{constructor(r,e,o){super(r,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zh extends nt{constructor(r,e,o){super(r,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qm extends nt{constructor(r,e,o,l){super(r,e),this.urlAfterRedirects=o,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qh extends nt{constructor(r,e,o,l){super(r,e),this.urlAfterRedirects=o,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jh extends nt{constructor(r,e,o,l,d){super(r,e),this.urlAfterRedirects=o,this.state=l,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pi extends nt{constructor(r,e,o,l){super(r,e),this.urlAfterRedirects=o,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jm extends nt{constructor(r,e,o,l){super(r,e),this.urlAfterRedirects=o,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yt{constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dl{constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ta{constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xm{constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vd{constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lr{constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zn{constructor(r,e,o){this.routerEvent=r,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Je="primary";class na{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const e=this.params[r];return Array.isArray(e)?e[0]:e}return null}getAll(r){if(this.has(r)){const e=this.params[r];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ur(i){return new na(i)}const io="ngNavigationCancelingError";function so(i){const r=Error("NavigationCancelingError: "+i);return r[io]=!0,r}function Bu(i,r,e){const o=e.path.split("/");if(o.length>i.length||"full"===e.pathMatch&&(r.hasChildren()||o.length<i.length))return null;const l={};for(let d=0;d<o.length;d++){const h=o[d],m=i[d];if(h.startsWith(":"))l[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:i.slice(0,o.length),posParams:l}}function Ln(i,r){const e=i?Object.keys(i):void 0,o=r?Object.keys(r):void 0;if(!e||!o||e.length!=o.length)return!1;let l;for(let d=0;d<e.length;d++)if(l=e[d],!cn(i[l],r[l]))return!1;return!0}function cn(i,r){if(Array.isArray(i)&&Array.isArray(r)){if(i.length!==r.length)return!1;const e=[...i].sort(),o=[...r].sort();return e.every((l,d)=>o[d]===l)}return i===r}function hl(i){return Array.prototype.concat.apply([],i)}function gs(i){return i.length>0?i[i.length-1]:null}function tn(i,r){for(const e in i)i.hasOwnProperty(e)&&r(i[e],e)}function Or(i){return(0,v.CqO)(i)?i:(0,v.QGY)(i)?(0,zt.D)(Promise.resolve(i)):Pe(i)}const Xh={exact:function ra(i,r,e){if(!Ni(i.segments,r.segments)||!_s(i.segments,r.segments,e)||i.numberOfChildren!==r.numberOfChildren)return!1;for(const o in r.children)if(!i.children[o]||!ra(i.children[o],r.children[o],e))return!1;return!0},subset:ep},Uu={exact:function di(i,r){return Ln(i,r)},subset:function yr(i,r){return Object.keys(r).length<=Object.keys(i).length&&Object.keys(r).every(e=>cn(i[e],r[e]))},ignored:()=>!0};function Cd(i,r,e){return Xh[e.paths](i.root,r.root,e.matrixParams)&&Uu[e.queryParams](i.queryParams,r.queryParams)&&!("exact"===e.fragment&&i.fragment!==r.fragment)}function ep(i,r,e){return oo(i,r,r.segments,e)}function oo(i,r,e,o){if(i.segments.length>e.length){const l=i.segments.slice(0,e.length);return!(!Ni(l,e)||r.hasChildren()||!_s(l,e,o))}if(i.segments.length===e.length){if(!Ni(i.segments,e)||!_s(i.segments,e,o))return!1;for(const l in r.children)if(!i.children[l]||!ep(i.children[l],r.children[l],o))return!1;return!0}{const l=e.slice(0,i.segments.length),d=e.slice(i.segments.length);return!!(Ni(i.segments,l)&&_s(i.segments,l,o)&&i.children[Je])&&oo(i.children[Je],r,d,o)}}function _s(i,r,e){return r.every((o,l)=>Uu[e](i[l].parameters,o.parameters))}class vr{constructor(r,e,o){this.root=r,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ur(this.queryParams)),this._queryParamMap}toString(){return Vu.serialize(this)}}class ot{constructor(r,e){this.segments=r,this.children=e,this.parent=null,tn(e,(o,l)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ht(this)}}class ia{constructor(r,e){this.path=r,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ur(this.parameters)),this._parameterMap}toString(){return g(this)}}function Ni(i,r){return i.length===r.length&&i.every((e,o)=>e.path===r[o].path)}class Oi{}class sa{parse(r){const e=new be(r);return new vr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(r){const e=`/${ys(r.root,!0)}`,o=function E(i){const r=Object.keys(i).map(e=>{const o=i[e];return Array.isArray(o)?o.map(l=>`${vs(e)}=${vs(l)}`).join("&"):`${vs(e)}=${vs(o)}`}).filter(e=>!!e);return r.length?`?${r.join("&")}`:""}(r.queryParams);return`${e}${o}${"string"==typeof r.fragment?`#${function oa(i){return encodeURI(i)}(r.fragment)}`:""}`}}const Vu=new sa;function Ht(i){return i.segments.map(r=>g(r)).join("/")}function ys(i,r){if(!i.hasChildren())return Ht(i);if(r){const e=i.children[Je]?ys(i.children[Je],!1):"",o=[];return tn(i.children,(l,d)=>{d!==Je&&o.push(`${d}:${ys(l,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function tp(i,r){let e=[];return tn(i.children,(o,l)=>{l===Je&&(e=e.concat(r(o,l)))}),tn(i.children,(o,l)=>{l!==Je&&(e=e.concat(r(o,l)))}),e}(i,(o,l)=>l===Je?[ys(i.children[Je],!1)]:[`${l}:${ys(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Je]?`${Ht(i)}/${e[0]}`:`${Ht(i)}/(${e.join("//")})`}}function Hu(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vs(i){return Hu(i).replace(/%3B/gi,";")}function pl(i){return Hu(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aa(i){return decodeURIComponent(i)}function gl(i){return aa(i.replace(/\+/g,"%20"))}function g(i){return`${pl(i.path)}${function y(i){return Object.keys(i).map(r=>`;${pl(r)}=${pl(i[r])}`).join("")}(i.parameters)}`}const T=/^[^\/()?;=#]+/;function k(i){const r=i.match(T);return r?r[0]:""}const W=/^[^=?&#]+/,ue=/^[^&#]+/;class be{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(r.length>0||Object.keys(e).length>0)&&(o[Je]=new ot(r,e)),o}parseSegment(){const r=k(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(r),new ia(aa(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const e=k(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const l=k(this.remaining);l&&(o=l,this.capture(o))}r[aa(e)]=aa(o)}parseQueryParam(r){const e=function ee(i){const r=i.match(W);return r?r[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const h=function xe(i){const r=i.match(ue);return r?r[0]:""}(this.remaining);h&&(o=h,this.capture(o))}const l=gl(e),d=gl(o);if(r.hasOwnProperty(l)){let h=r[l];Array.isArray(h)||(h=[h],r[l]=h),h.push(d)}else r[l]=d}parseParens(r){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=k(this.remaining),l=this.remaining[o.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let d;o.indexOf(":")>-1?(d=o.substr(0,o.indexOf(":")),this.capture(d),this.capture(":")):r&&(d=Je);const h=this.parseChildren();e[d]=1===Object.keys(h).length?h[Je]:new ot([],h),this.consumeOptional("//")}return e}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new Error(`Expected "${r}".`)}}class Fe{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const e=this.pathFromRoot(r);return e.length>1?e[e.length-2]:null}children(r){const e=Ie(r,this._root);return e?e.children.map(o=>o.value):[]}firstChild(r){const e=Ie(r,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(r){const e=ct(r,this._root);return e.length<2?[]:e[e.length-2].children.map(l=>l.value).filter(l=>l!==r)}pathFromRoot(r){return ct(r,this._root).map(e=>e.value)}}function Ie(i,r){if(i===r.value)return r;for(const e of r.children){const o=Ie(i,e);if(o)return o}return null}function ct(i,r){if(i===r.value)return[r];for(const e of r.children){const o=ct(i,e);if(o.length)return o.unshift(r),o}return[]}class pt{constructor(r,e){this.value=r,this.children=e}toString(){return`TreeNode(${this.value})`}}function Fr(i){const r={};return i&&i.children.forEach(e=>r[e.value.outlet]=e),r}class Fi extends Fe{constructor(r,e){super(r),this.snapshot=e,Ds(this,r)}toString(){return this.snapshot.toString()}}function ki(i,r){const e=function np(i,r){const h=new Yn([],{},{},"",{},Je,r,null,i.root,-1,{});return new ao("",new pt(h,[]))}(i,r),o=new Fn([new ia("",{})]),l=new Fn({}),d=new Fn({}),h=new Fn({}),m=new Fn(""),D=new kr(o,l,h,m,d,Je,r,e.root);return D.snapshot=e.root,new Fi(new pt(D,[]),e)}class kr{constructor(r,e,o,l,d,h,m,D){this.url=r,this.params=e,this.queryParams=o,this.fragment=l,this.data=d,this.outlet=h,this.component=m,this._futureSnapshot=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(r=>ur(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(r=>ur(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cs(i,r="emptyOnly"){const e=i.pathFromRoot;let o=0;if("always"!==r)for(o=e.length-1;o>=1;){const l=e[o],d=e[o-1];if(l.routeConfig&&""===l.routeConfig.path)o--;else{if(d.component)break;o--}}return function Li(i){return i.reduce((r,e)=>({params:Object.assign(Object.assign({},r.params),e.params),data:Object.assign(Object.assign({},r.data),e.data),resolve:Object.assign(Object.assign({},r.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class Yn{constructor(r,e,o,l,d,h,m,D,b,O,A){this.url=r,this.params=e,this.queryParams=o,this.fragment=l,this.data=d,this.outlet=h,this.component=m,this.routeConfig=D,this._urlSegment=b,this._lastPathIndex=O,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ur(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ur(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ao extends Fe{constructor(r,e){super(e),this.url=r,Ds(this,e)}toString(){return rp(this._root)}}function Ds(i,r){r.value._routerState=i,r.children.forEach(e=>Ds(i,e))}function rp(i){const r=i.children.length>0?` { ${i.children.map(rp).join(", ")} } `:"";return`${i.value}${r}`}function Ed(i){if(i.snapshot){const r=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Ln(r.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),r.fragment!==e.fragment&&i.fragment.next(e.fragment),Ln(r.params,e.params)||i.params.next(e.params),function ju(i,r){if(i.length!==r.length)return!1;for(let e=0;e<i.length;++e)if(!Ln(i[e],r[e]))return!1;return!0}(r.url,e.url)||i.url.next(e.url),Ln(r.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function ip(i,r){const e=Ln(i.params,r.params)&&function Dd(i,r){return Ni(i,r)&&i.every((e,o)=>Ln(e.parameters,r[o].parameters))}(i.url,r.url);return e&&!(!i.parent!=!r.parent)&&(!i.parent||ip(i.parent,r.parent))}function lo(i,r,e){if(e&&i.shouldReuseRoute(r.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=r.value;const l=function sp(i,r,e){return r.children.map(o=>{for(const l of e.children)if(i.shouldReuseRoute(o.value,l.value.snapshot))return lo(i,o,l);return lo(i,o)})}(i,r,e);return new pt(o,l)}{if(i.shouldAttach(r.value)){const d=i.retrieve(r.value);if(null!==d){const h=d.route;return h.value._futureSnapshot=r.value,h.children=r.children.map(m=>lo(i,m)),h}}const o=function op(i){return new kr(new Fn(i.url),new Fn(i.params),new Fn(i.queryParams),new Fn(i.fragment),new Fn(i.data),i.outlet,i.component,i)}(r.value),l=r.children.map(d=>lo(i,d));return new pt(o,l)}}function ml(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function _l(i){return"object"==typeof i&&null!=i&&i.outlets}function wd(i,r,e,o,l){let d={};if(o&&tn(o,(m,D)=>{d[D]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),i===r)return new vr(e,d,l);const h=lp(i,r,e);return new vr(h,d,l)}function lp(i,r,e){const o={};return tn(i.children,(l,d)=>{o[d]=l===r?e:lp(l,r,e)}),new ot(i.segments,o)}class up{constructor(r,e,o){if(this.isAbsolute=r,this.numberOfDoubleDots=e,this.commands=o,r&&o.length>0&&ml(o[0]))throw new Error("Root segment cannot have matrix parameters");const l=o.find(_l);if(l&&l!==gs(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fi{constructor(r,e,o){this.segmentGroup=r,this.processChildren=e,this.index=o}}function n_(i,r,e){if(i||(i=new ot([],{})),0===i.segments.length&&i.hasChildren())return bd(i,r,e);const o=function cC(i,r,e){let o=0,l=r;const d={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(o>=e.length)return d;const h=i.segments[l],m=e[o];if(_l(m))break;const D=`${m}`,b=o<e.length-1?e[o+1]:null;if(l>0&&void 0===D)break;if(D&&b&&"object"==typeof b&&void 0===b.outlets){if(!hp(D,b,h))return d;o+=2}else{if(!hp(D,{},h))return d;o++}l++}return{match:!0,pathIndex:l,commandIndex:o}}(i,r,e),l=e.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const d=new ot(i.segments.slice(0,o.pathIndex),{});return d.children[Je]=new ot(i.segments.slice(o.pathIndex),i.children),bd(d,0,l)}return o.match&&0===l.length?new ot(i.segments,{}):o.match&&!i.hasChildren()?cp(i,r,e):o.match?bd(i,0,l):cp(i,r,e)}function bd(i,r,e){if(0===e.length)return new ot(i.segments,{});{const o=function uC(i){return _l(i[0])?i[0].outlets:{[Je]:i}}(e),l={};return tn(o,(d,h)=>{"string"==typeof d&&(d=[d]),null!==d&&(l[h]=n_(i.children[h],r,d))}),tn(i.children,(d,h)=>{void 0===o[h]&&(l[h]=d)}),new ot(i.segments,l)}}function cp(i,r,e){const o=i.segments.slice(0,r);let l=0;for(;l<e.length;){const d=e[l];if(_l(d)){const D=dp(d.outlets);return new ot(o,D)}if(0===l&&ml(e[0])){o.push(new ia(i.segments[r].path,fp(e[0]))),l++;continue}const h=_l(d)?d.outlets[Je]:`${d}`,m=l<e.length-1?e[l+1]:null;h&&m&&ml(m)?(o.push(new ia(h,fp(m))),l+=2):(o.push(new ia(h,{})),l++)}return new ot(o,{})}function dp(i){const r={};return tn(i,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(r[o]=cp(new ot([],{}),0,e))}),r}function fp(i){const r={};return tn(i,(e,o)=>r[o]=`${e}`),r}function hp(i,r,e){return i==e.path&&Ln(r,e.parameters)}class i_{constructor(r,e,o,l){this.routeReuseStrategy=r,this.futureState=e,this.currState=o,this.forwardEvent=l}activate(r){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,r),Ed(this.futureState.root),this.activateChildRoutes(e,o,r)}deactivateChildRoutes(r,e,o){const l=Fr(e);r.children.forEach(d=>{const h=d.value.outlet;this.deactivateRoutes(d,l[h],o),delete l[h]}),tn(l,(d,h)=>{this.deactivateRouteAndItsChildren(d,o)})}deactivateRoutes(r,e,o){const l=r.value,d=e?e.value:null;if(l===d)if(l.component){const h=o.getContext(l.outlet);h&&this.deactivateChildRoutes(r,e,h.children)}else this.deactivateChildRoutes(r,e,o);else d&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(r,e){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,e):this.deactivateRouteAndOutlet(r,e)}detachAndStoreRouteSubtree(r,e){const o=e.getContext(r.value.outlet),l=o&&r.value.component?o.children:e,d=Fr(r);for(const h of Object.keys(d))this.deactivateRouteAndItsChildren(d[h],l);if(o&&o.outlet){const h=o.outlet.detach(),m=o.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:h,route:r,contexts:m})}}deactivateRouteAndOutlet(r,e){const o=e.getContext(r.value.outlet),l=o&&r.value.component?o.children:e,d=Fr(r);for(const h of Object.keys(d))this.deactivateRouteAndItsChildren(d[h],l);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(r,e,o){const l=Fr(e);r.children.forEach(d=>{this.activateRoutes(d,l[d.value.outlet],o),this.forwardEvent(new lr(d.value.snapshot))}),r.children.length&&this.forwardEvent(new Xm(r.value.snapshot))}activateRoutes(r,e,o){const l=r.value,d=e?e.value:null;if(Ed(l),l===d)if(l.component){const h=o.getOrCreateContext(l.outlet);this.activateChildRoutes(r,e,h.children)}else this.activateChildRoutes(r,e,o);else if(l.component){const h=o.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const m=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),Ed(m.route.value),this.activateChildRoutes(r,null,h.children)}else{const m=function dC(i){for(let r=i.parent;r;r=r.parent){const e=r.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(l.snapshot),D=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=l,h.resolver=D,h.outlet&&h.outlet.activateWith(l,D),this.activateChildRoutes(r,null,h.children)}}else this.activateChildRoutes(r,null,o)}}class Id{constructor(r,e){this.routes=r,this.module=e}}function Lr(i){return"function"==typeof i}function Mn(i){return i instanceof vr}const Wu=Symbol("INITIAL_VALUE");function Gu(){return Wn(i=>Kh(i.map(r=>r.pipe(Mi(1),function ul(...i){const r=(0,us.yG)(i);return(0,Tn.e)((e,o)=>{(r?li(i,e,r):li(i,e)).subscribe(o)})}(Wu)))).pipe(Jo((r,e)=>{let o=!1;return e.reduce((l,d,h)=>l!==Wu?l:(d===Wu&&(o=!0),o||!1!==d&&h!==e.length-1&&!Mn(d)?l:d),r)},Wu),Gn(r=>r!==Wu),(0,St.U)(r=>Mn(r)?r:!0===r),Mi(1)))}class fC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new uo,this.attachRef=null}}class uo{constructor(){this.contexts=new Map}onChildOutletCreated(r,e){const o=this.getOrCreateContext(r);o.outlet=e,this.contexts.set(r,o)}onChildOutletDestroyed(r){const e=this.getContext(r);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let e=this.getContext(r);return e||(e=new fC,this.contexts.set(r,e)),e}getContext(r){return this.contexts.get(r)||null}}let Cl=(()=>{class i{constructor(e,o,l,d,h){this.parentContexts=e,this.location=o,this.resolver=l,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=d||Je,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const h=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,D=new Td(e,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,D),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(v.Y36(uo),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},i.\u0275dir=v.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class Td{constructor(r,e,o){this.route=r,this.childContexts=e,this.parent=o}get(r,e){return r===kr?this.route:r===uo?this.childContexts:this.parent.get(r,e)}}let s_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&v._UZ(0,"router-outlet")},directives:[Cl],encapsulation:2}),i})();function o_(i,r=""){for(let e=0;e<i.length;e++){const o=i[e];yp(o,a_(r,o))}}function yp(i,r){i.children&&o_(i.children,r)}function a_(i,r){return r?i||r.path?i&&!r.path?`${i}/`:!i&&r.path?r.path:`${i}/${r.path}`:"":i}function Sd(i){const r=i.children&&i.children.map(Sd),e=r?Object.assign(Object.assign({},i),{children:r}):Object.assign({},i);return!e.component&&(r||e.loadChildren)&&e.outlet&&e.outlet!==Je&&(e.component=s_),e}function Cr(i){return i.outlet||Je}function vp(i,r){const e=i.filter(o=>Cr(o)===r);return e.push(...i.filter(o=>Cr(o)!==r)),e}const Ad={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function co(i,r,e){var o;if(""===r.path)return"full"===r.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},Ad):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const d=(r.matcher||Bu)(e,i,r);if(!d)return Object.assign({},Ad);const h={};tn(d.posParams,(D,b)=>{h[b]=D.path});const m=d.consumed.length>0?Object.assign(Object.assign({},h),d.consumed[d.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:d.consumed,remainingSegments:e.slice(d.consumed.length),parameters:m,positionalParamSegments:null!==(o=d.posParams)&&void 0!==o?o:{}}}function zu(i,r,e,o,l="corrected"){if(e.length>0&&function Zt(i,r,e){return e.some(o=>Yu(i,r,o)&&Cr(o)!==Je)}(i,e,o)){const h=new ot(r,function l_(i,r,e,o){const l={};l[Je]=o,o._sourceSegment=i,o._segmentIndexShift=r.length;for(const d of e)if(""===d.path&&Cr(d)!==Je){const h=new ot([],{});h._sourceSegment=i,h._segmentIndexShift=r.length,l[Cr(d)]=h}return l}(i,r,o,new ot(e,i.children)));return h._sourceSegment=i,h._segmentIndexShift=r.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function u_(i,r,e){return e.some(o=>Yu(i,r,o))}(i,e,o)){const h=new ot(i.segments,function Md(i,r,e,o,l,d){const h={};for(const m of o)if(Yu(i,e,m)&&!l[Cr(m)]){const D=new ot([],{});D._sourceSegment=i,D._segmentIndexShift="legacy"===d?i.segments.length:r.length,h[Cr(m)]=D}return Object.assign(Object.assign({},l),h)}(i,r,e,o,i.children,l));return h._sourceSegment=i,h._segmentIndexShift=r.length,{segmentGroup:h,slicedSegments:e}}const d=new ot(i.segments,i.children);return d._sourceSegment=i,d._segmentIndexShift=r.length,{segmentGroup:d,slicedSegments:e}}function Yu(i,r,e){return(!(i.hasChildren()||r.length>0)||"full"!==e.pathMatch)&&""===e.path}function qu(i,r,e,o){return!!(Cr(i)===o||o!==Je&&Yu(r,e,i))&&("**"===i.path||co(r,i,e).matched)}function xd(i,r,e){return 0===r.length&&!i.children[e]}class Ku{constructor(r){this.segmentGroup=r||null}}class Cp{constructor(r){this.urlTree=r}}function Dl(i){return eo(new Ku(i))}function Dp(i){return eo(new Cp(i))}class El{constructor(r,e,o,l,d){this.configLoader=e,this.urlSerializer=o,this.urlTree=l,this.config=d,this.allowRedirects=!0,this.ngModule=r.get(v.h0i)}apply(){const r=zu(this.urlTree.root,[],[],this.config).segmentGroup,e=new ot(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Je).pipe((0,St.U)(d=>this.createUrlTree(wl(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ci(d=>{if(d instanceof Cp)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof Ku?this.noMatchError(d):d}))}match(r){return this.expandSegmentGroup(this.ngModule,this.config,r.root,Je).pipe((0,St.U)(l=>this.createUrlTree(wl(l),r.queryParams,r.fragment))).pipe(ci(l=>{throw l instanceof Ku?this.noMatchError(l):l}))}noMatchError(r){return new Error(`Cannot match any routes. URL Segment: '${r.segmentGroup}'`)}createUrlTree(r,e,o){const l=r.segments.length>0?new ot([],{[Je]:r}):r;return new vr(l,e,o)}expandSegmentGroup(r,e,o,l){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(r,e,o).pipe((0,St.U)(d=>new ot([],d))):this.expandSegment(r,o,e,o.segments,l,!0)}expandChildren(r,e,o){const l=[];for(const d of Object.keys(o.children))"primary"===d?l.unshift(d):l.push(d);return(0,zt.D)(l).pipe(xi(d=>{const h=o.children[d],m=vp(e,d);return this.expandSegmentGroup(r,m,h,d).pipe((0,St.U)(D=>({segment:D,outlet:d})))}),Jo((d,h)=>(d[h.outlet]=h.segment,d),{}),function ea(i,r){const e=arguments.length>=2;return o=>o.pipe(i?Gn((l,d)=>i(l,d,o)):ai.y,_r(1),e?Xo(r):Ri(()=>new hs))}())}expandSegment(r,e,o,l,d,h){return(0,zt.D)(o).pipe(xi(m=>this.expandSegmentAgainstRoute(r,e,o,m,l,d,h).pipe(ci(b=>{if(b instanceof Ku)return Pe(null);throw b}))),An(m=>!!m),ci((m,D)=>{if(m instanceof hs||"EmptyError"===m.name)return xd(e,l,d)?Pe(new ot([],{})):Dl(e);throw m}))}expandSegmentAgainstRoute(r,e,o,l,d,h,m){return qu(l,e,d,h)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(r,e,l,d,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,e,o,l,d,h):Dl(e):Dl(e)}expandSegmentAgainstRouteUsingRedirect(r,e,o,l,d,h){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,o,l,h):this.expandRegularSegmentAgainstRouteUsingRedirect(r,e,o,l,d,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,e,o,l){const d=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Dp(d):this.lineralizeSegments(o,d).pipe((0,Wt.z)(h=>{const m=new ot(h,{});return this.expandSegment(r,m,e,h,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,e,o,l,d,h){const{matched:m,consumedSegments:D,remainingSegments:b,positionalParamSegments:O}=co(e,l,d);if(!m)return Dl(e);const A=this.applyRedirectCommands(D,l.redirectTo,O);return l.redirectTo.startsWith("/")?Dp(A):this.lineralizeSegments(l,A).pipe((0,Wt.z)($=>this.expandSegment(r,e,o,$.concat(b),h,!1)))}matchSegmentAgainstRoute(r,e,o,l,d){if("**"===o.path)return o.loadChildren?(o._loadedConfig?Pe(o._loadedConfig):this.configLoader.load(r.injector,o)).pipe((0,St.U)(A=>(o._loadedConfig=A,new ot(l,{})))):Pe(new ot(l,{}));const{matched:h,consumedSegments:m,remainingSegments:D}=co(e,o,l);return h?this.getChildConfig(r,o,l).pipe((0,Wt.z)(O=>{const A=O.module,$=O.routes,{segmentGroup:J,slicedSegments:ye}=zu(e,m,D,$),Ye=new ot(J.segments,J.children);if(0===ye.length&&Ye.hasChildren())return this.expandChildren(A,$,Ye).pipe((0,St.U)(Ro=>new ot(m,Ro)));if(0===$.length&&0===ye.length)return Pe(new ot(m,{}));const _t=Cr(o)===d;return this.expandSegment(A,Ye,$,ye,_t?Je:d,!0).pipe((0,St.U)(hn=>new ot(m.concat(hn.segments),hn.children)))})):Dl(e)}getChildConfig(r,e,o){return e.children?Pe(new Id(e.children,r)):e.loadChildren?void 0!==e._loadedConfig?Pe(e._loadedConfig):this.runCanLoadGuards(r.injector,e,o).pipe((0,Wt.z)(l=>l?this.configLoader.load(r.injector,e).pipe((0,St.U)(d=>(e._loadedConfig=d,d))):function hC(i){return eo(so(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))}(e))):Pe(new Id([],r))}runCanLoadGuards(r,e,o){const l=e.canLoad;return l&&0!==l.length?Pe(l.map(h=>{const m=r.get(h);let D;if(function vl(i){return i&&Lr(i.canLoad)}(m))D=m.canLoad(e,o);else{if(!Lr(m))throw new Error("Invalid CanLoad guard");D=m(e,o)}return Or(D)})).pipe(Gu(),kn(h=>{if(!Mn(h))return;const m=so(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,St.U)(h=>!0===h)):Pe(!0)}lineralizeSegments(r,e){let o=[],l=e.root;for(;;){if(o=o.concat(l.segments),0===l.numberOfChildren)return Pe(o);if(l.numberOfChildren>1||!l.children[Je])return eo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r.redirectTo}'`));l=l.children[Je]}}applyRedirectCommands(r,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),r,o)}applyRedirectCreatreUrlTree(r,e,o,l){const d=this.createSegmentGroup(r,e.root,o,l);return new vr(d,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(r,e){const o={};return tn(r,(l,d)=>{if("string"==typeof l&&l.startsWith(":")){const m=l.substring(1);o[d]=e[m]}else o[d]=l}),o}createSegmentGroup(r,e,o,l){const d=this.createSegments(r,e.segments,o,l);let h={};return tn(e.children,(m,D)=>{h[D]=this.createSegmentGroup(r,m,o,l)}),new ot(d,h)}createSegments(r,e,o,l){return e.map(d=>d.path.startsWith(":")?this.findPosParam(r,d,l):this.findOrReturn(d,o))}findPosParam(r,e,o){const l=o[e.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${r}'. Cannot find '${e.path}'.`);return l}findOrReturn(r,e){let o=0;for(const l of e){if(l.path===r.path)return e.splice(o),l;o++}return r}}function wl(i){const r={};for(const o of Object.keys(i.children)){const d=wl(i.children[o]);(d.segments.length>0||d.hasChildren())&&(r[o]=d)}return function Bn(i){if(1===i.numberOfChildren&&i.children[Je]){const r=i.children[Je];return new ot(i.segments.concat(r.segments),r.children)}return i}(new ot(i.segments,r))}class Rd{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class nn{constructor(r,e){this.component=r,this.route=e}}function bl(i,r,e){const o=i._root;return la(o,r?r._root:null,e,[o.value])}function Zu(i,r,e){const o=function d_(i){if(!i)return null;for(let r=i.parent;r;r=r.parent){const e=r.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(r);return(o?o.module.injector:e).get(i)}function la(i,r,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=Fr(r);return i.children.forEach(h=>{(function f_(i,r,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=i.value,h=r?r.value:null,m=e?e.getContext(i.value.outlet):null;if(h&&d.routeConfig===h.routeConfig){const D=function wp(i,r,e){if("function"==typeof e)return e(i,r);switch(e){case"pathParamsChange":return!Ni(i.url,r.url);case"pathParamsOrQueryParamsChange":return!Ni(i.url,r.url)||!Ln(i.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(i,r)||!Ln(i.queryParams,r.queryParams);default:return!ip(i,r)}}(h,d,d.routeConfig.runGuardsAndResolvers);D?l.canActivateChecks.push(new Rd(o)):(d.data=h.data,d._resolvedData=h._resolvedData),la(i,r,d.component?m?m.children:null:e,o,l),D&&m&&m.outlet&&m.outlet.isActivated&&l.canDeactivateChecks.push(new nn(m.outlet.component,h))}else h&&Il(r,m,l),l.canActivateChecks.push(new Rd(o)),la(i,null,d.component?m?m.children:null:e,o,l)})(h,d[h.value.outlet],e,o.concat([h.value]),l),delete d[h.value.outlet]}),tn(d,(h,m)=>Il(h,e.getContext(m),l)),l}function Il(i,r,e){const o=Fr(i),l=i.value;tn(o,(d,h)=>{Il(d,l.component?r?r.children.getContext(h):null:r,e)}),e.canDeactivateChecks.push(new nn(l.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,l))}class y_{}function Tl(i){return new Js.y(r=>r.error(i))}class C_{constructor(r,e,o,l,d,h){this.rootComponentType=r,this.config=e,this.urlTree=o,this.url=l,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=h}recognize(){const r=zu(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,r,Je);if(null===e)return null;const o=new Yn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Je,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new pt(o,e),d=new ao(this.url,l);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(r){const e=r.value,o=Cs(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),r.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(r,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(r,e):this.processSegment(r,e,e.segments,o)}processChildren(r,e){const o=[];for(const d of Object.keys(e.children)){const h=e.children[d],m=vp(r,d),D=this.processSegmentGroup(m,h,d);if(null===D)return null;o.push(...D)}const l=Fd(o);return function D_(i){i.sort((r,e)=>r.value.outlet===Je?-1:e.value.outlet===Je?1:r.value.outlet.localeCompare(e.value.outlet))}(l),l}processSegment(r,e,o,l){for(const d of r){const h=this.processSegmentAgainstRoute(d,e,o,l);if(null!==h)return h}return xd(e,o,l)?[]:null}processSegmentAgainstRoute(r,e,o,l){if(r.redirectTo||!qu(r,e,o,l))return null;let d,h=[],m=[];if("**"===r.path){const J=o.length>0?gs(o).parameters:{};d=new Yn(o,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sp(r),Cr(r),r.component,r,Ip(e),Tp(e)+o.length,Ap(r))}else{const J=co(e,r,o);if(!J.matched)return null;h=J.consumedSegments,m=J.remainingSegments,d=new Yn(h,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sp(r),Cr(r),r.component,r,Ip(e),Tp(e)+h.length,Ap(r))}const D=function E_(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(r),{segmentGroup:b,slicedSegments:O}=zu(e,h,m,D.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===O.length&&b.hasChildren()){const J=this.processChildren(D,b);return null===J?null:[new pt(d,J)]}if(0===D.length&&0===O.length)return[new pt(d,[])];const A=Cr(r)===l,$=this.processSegment(D,b,O,A?Je:l);return null===$?null:[new pt(d,$)]}}function w_(i){const r=i.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function Fd(i){const r=[],e=new Set;for(const o of i){if(!w_(o)){r.push(o);continue}const l=r.find(d=>o.value.routeConfig===d.value.routeConfig);void 0!==l?(l.children.push(...o.children),e.add(l)):r.push(o)}for(const o of e){const l=Fd(o.children);r.push(new pt(o.value,l))}return r.filter(o=>!e.has(o))}function Ip(i){let r=i;for(;r._sourceSegment;)r=r._sourceSegment;return r}function Tp(i){let r=i,e=r._segmentIndexShift?r._segmentIndexShift:0;for(;r._sourceSegment;)r=r._sourceSegment,e+=r._segmentIndexShift?r._segmentIndexShift:0;return e-1}function Sp(i){return i.data||{}}function Ap(i){return i.resolve||{}}function Br(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Mp(i){return Wn(r=>{const e=i(r);return e?(0,zt.D)(e).pipe((0,St.U)(()=>r)):Pe(r)})}class hi extends class _C{shouldDetach(r){return!1}store(r,e){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,e){return r.routeConfig===e.routeConfig}}{}const Sl=new v.OlP("ROUTES");class Qu{constructor(r,e,o,l){this.injector=r,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=l}load(r,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const l=this.loadModuleFactory(e.loadChildren).pipe((0,St.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(e);const h=d.create(r);return new Id(hl(h.injector.get(Sl,void 0,v.XFs.Self|v.XFs.Optional)).map(Sd),h)}),ci(d=>{throw e._loader$=void 0,d}));return e._loader$=new _d(l,()=>new ar.x).pipe(Zo()),e._loader$}loadModuleFactory(r){return Or(r()).pipe((0,Wt.z)(e=>e instanceof v.YKP?Pe(e):(0,zt.D)(this.compiler.compileModuleAsync(e))))}}class Rp{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,e){return r}}function Al(i){throw i}function Pp(i,r,e){return r.parse("/")}function kd(i,r){return Pe(null)}const Ld={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jn=(()=>{class i{constructor(e,o,l,d,h,m,D){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=l,this.location=d,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ar.x,this.errorHandler=Al,this.malformedUriErrorHandler=Pp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kd,afterPreactivation:kd},this.urlHandlingStrategy=new Rp,this.routeReuseStrategy=new hi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(v.h0i),this.console=h.get(v.c2e);const A=h.get(v.R0b);this.isNgZoneEnabled=A instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=function ms(){return new vr(new ot([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qu(h,m,$=>this.triggerEvent(new Yt($)),$=>this.triggerEvent(new dl($))),this.routerState=ki(this.currentUrlTree,this.rootComponentType),this.transitions=new Fn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(Gn(l=>0!==l.id),(0,St.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Wn(l=>{let d=!1,h=!1;return Pe(l).pipe(kn(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wn(m=>{const D=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==D||D!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return fo(m.source)&&(this.browserUrlTree=m.extractedUrl),Pe(m).pipe(Wn(A=>{const $=this.transitions.getValue();return o.next(new ro(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),$!==this.transitions.getValue()?ui.E:Promise.resolve(A)}),function Ep(i,r,e,o){return Wn(l=>function pC(i,r,e,o,l){return new El(i,r,e,o,l).apply()}(i,r,e,l.extractedUrl,o).pipe((0,St.U)(d=>Object.assign(Object.assign({},l),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),kn(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function b_(i,r,e,o,l){return(0,Wt.z)(d=>function v_(i,r,e,o,l="emptyOnly",d="legacy"){try{const h=new C_(i,r,e,o,l,d).recognize();return null===h?Tl(new y_):Pe(h)}catch(h){return Tl(h)}}(i,r,d.urlAfterRedirects,e(d.urlAfterRedirects),o,l).pipe((0,St.U)(h=>Object.assign(Object.assign({},d),{targetSnapshot:h}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),kn(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(J,A)}this.browserUrlTree=A.urlAfterRedirects}const $=new Qm(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);o.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:J,source:ye,restoredState:Ye,extras:_t}=m,Xn=new ro($,this.serializeUrl(J),ye,Ye);o.next(Xn);const hn=ki(J,this.rootComponentType).snapshot;return Pe(Object.assign(Object.assign({},m),{targetSnapshot:hn,urlAfterRedirects:J,extras:Object.assign(Object.assign({},_t),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ui.E}),Mp(m=>{const{targetSnapshot:D,id:b,extractedUrl:O,rawUrl:A,extras:{skipLocationChange:$,replaceUrl:J}}=m;return this.hooks.beforePreactivation(D,{navigationId:b,appliedUrlTree:O,rawUrlTree:A,skipLocationChange:!!$,replaceUrl:!!J})}),kn(m=>{const D=new Qh(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(D)}),(0,St.U)(m=>Object.assign(Object.assign({},m),{guards:bl(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function bp(i,r){return(0,Wt.z)(e=>{const{targetSnapshot:o,currentSnapshot:l,guards:{canActivateChecks:d,canDeactivateChecks:h}}=e;return 0===h.length&&0===d.length?Pe(Object.assign(Object.assign({},e),{guardsResult:!0})):function h_(i,r,e,o){return(0,zt.D)(i).pipe((0,Wt.z)(l=>function __(i,r,e,o,l){const d=r&&r.routeConfig?r.routeConfig.canDeactivate:null;return d&&0!==d.length?Pe(d.map(m=>{const D=Zu(m,r,l);let b;if(function _p(i){return i&&Lr(i.canDeactivate)}(D))b=Or(D.canDeactivate(i,r,e,o));else{if(!Lr(D))throw new Error("Invalid CanDeactivate guard");b=Or(D(i,r,e,o))}return b.pipe(An())})).pipe(Gu()):Pe(!0)}(l.component,l.route,e,r,o)),An(l=>!0!==l,!0))}(h,o,l,i).pipe((0,Wt.z)(m=>m&&function pp(i){return"boolean"==typeof i}(m)?function p_(i,r,e,o){return(0,zt.D)(r).pipe(xi(l=>li(function g_(i,r){return null!==i&&r&&r(new ta(i)),Pe(!0)}(l.route.parent,o),function Nd(i,r){return null!==i&&r&&r(new vd(i)),Pe(!0)}(l.route,o),function Od(i,r,e){const o=r[r.length-1],d=r.slice(0,r.length-1).reverse().map(h=>function Pd(i){const r=i.routeConfig?i.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:i,guards:r}:null}(h)).filter(h=>null!==h).map(h=>to(()=>Pe(h.guards.map(D=>{const b=Zu(D,h.node,e);let O;if(function mp(i){return i&&Lr(i.canActivateChild)}(b))O=Or(b.canActivateChild(o,i));else{if(!Lr(b))throw new Error("Invalid CanActivateChild guard");O=Or(b(o,i))}return O.pipe(An())})).pipe(Gu())));return Pe(d).pipe(Gu())}(i,l.path,e),function m_(i,r,e){const o=r.routeConfig?r.routeConfig.canActivate:null;if(!o||0===o.length)return Pe(!0);const l=o.map(d=>to(()=>{const h=Zu(d,r,e);let m;if(function gp(i){return i&&Lr(i.canActivate)}(h))m=Or(h.canActivate(r,i));else{if(!Lr(h))throw new Error("Invalid CanActivate guard");m=Or(h(r,i))}return m.pipe(An())}));return Pe(l).pipe(Gu())}(i,l.route,e))),An(l=>!0!==l,!0))}(o,d,i,r):Pe(m)),(0,St.U)(m=>Object.assign(Object.assign({},e),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),kn(m=>{if(Mn(m.guardsResult)){const b=so(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const D=new Jh(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(D)}),Gn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Mp(m=>{if(m.guards.canActivateChecks.length)return Pe(m).pipe(kn(D=>{const b=new Pi(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(b)}),Wn(D=>{let b=!1;return Pe(D).pipe(function I_(i,r){return(0,Wt.z)(e=>{const{targetSnapshot:o,guards:{canActivateChecks:l}}=e;if(!l.length)return Pe(e);let d=0;return(0,zt.D)(l).pipe(xi(h=>function T_(i,r,e,o){return function ua(i,r,e,o){const l=Br(i);if(0===l.length)return Pe({});const d={};return(0,zt.D)(l).pipe((0,Wt.z)(h=>function mC(i,r,e,o){const l=Zu(i,r,o);return Or(l.resolve?l.resolve(r,e):l(r,e))}(i[h],r,e,o).pipe(kn(m=>{d[h]=m}))),_r(1),(0,Wt.z)(()=>Br(d).length===l.length?Pe(d):ui.E))}(i._resolve,i,r,o).pipe((0,St.U)(d=>(i._resolvedData=d,i.data=Object.assign(Object.assign({},i.data),Cs(i,e).resolve),null)))}(h.route,o,i,r)),kn(()=>d++),_r(1),(0,Wt.z)(h=>d===l.length?Pe(e):ui.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),kn({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(D),this.cancelNavigationTransition(D,"At least one route resolver didn't emit any value."))}}))}),kn(D=>{const b=new Jm(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(b)}))}),Mp(m=>{const{targetSnapshot:D,id:b,extractedUrl:O,rawUrl:A,extras:{skipLocationChange:$,replaceUrl:J}}=m;return this.hooks.afterPreactivation(D,{navigationId:b,appliedUrlTree:O,rawUrlTree:A,skipLocationChange:!!$,replaceUrl:!!J})}),(0,St.U)(m=>{const D=function $u(i,r,e){const o=lo(i,r._root,e?e._root:void 0);return new Fi(o,r)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:D})}),kn(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((i,r,e)=>(0,St.U)(o=>(new i_(r,o.targetRouterState,o.currentRouterState,e).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),kn({next(){d=!0},complete(){d=!0}}),function Lu(i){return(0,Tn.e)((r,e)=>{try{r.subscribe(e)}finally{e.add(i)}})}(()=>{var m;d||h||this.cancelNavigationTransition(l,`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===l.id&&(this.currentNavigation=null)}),ci(m=>{if(h=!0,function fl(i){return i&&i[io]}(m)){const D=Mn(m.url);D||(this.navigated=!0,this.restoreHistory(l,!0));const b=new yd(l.id,this.serializeUrl(l.extractedUrl),m.message);o.next(b),D?setTimeout(()=>{const O=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fo(l.source)};this.scheduleNavigation(O,"imperative",null,A,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const D=new Zh(l.id,this.serializeUrl(l.extractedUrl),m);o.next(D);try{l.resolve(this.errorHandler(m))}catch(b){l.reject(b)}}return ui.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{var l;const d={replaceUrl:!0},h=(null===(l=e.state)||void 0===l?void 0:l.navigationId)?e.state:null;if(h){const D=Object.assign({},h);delete D.navigationId,delete D.\u0275routerPageId,0!==Object.keys(D).length&&(d.state=D)}const m=this.parseUrl(e.url);this.scheduleNavigation(m,o,h,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){o_(e),this.config=e.map(Sd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:l,queryParams:d,fragment:h,queryParamsHandling:m,preserveFragment:D}=o,b=l||this.routerState.root,O=D?this.currentUrlTree.fragment:h;let A=null;switch(m){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=d||null}return null!==A&&(A=this.removeEmptyProps(A)),function ap(i,r,e,o,l){if(0===e.length)return wd(r.root,r.root,r.root,o,l);const d=function e_(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new up(!0,0,i);let r=0,e=!1;const o=i.reduce((l,d,h)=>{if("object"==typeof d&&null!=d){if(d.outlets){const m={};return tn(d.outlets,(D,b)=>{m[b]="string"==typeof D?D.split("/"):D}),[...l,{outlets:m}]}if(d.segmentPath)return[...l,d.segmentPath]}return"string"!=typeof d?[...l,d]:0===h?(d.split("/").forEach((m,D)=>{0==D&&"."===m||(0==D&&""===m?e=!0:".."===m?r++:""!=m&&l.push(m))}),l):[...l,d]},[]);return new up(e,r,o)}(e);if(d.toRoot())return wd(r.root,r.root,new ot([],{}),o,l);const h=function yl(i,r,e){if(i.isAbsolute)return new fi(r.root,!0,0);if(-1===e.snapshot._lastPathIndex){const d=e.snapshot._urlSegment;return new fi(d,d===r.root,0)}const o=ml(i.commands[0])?0:1;return function t_(i,r,e){let o=i,l=r,d=e;for(;d>l;){if(d-=l,o=o.parent,!o)throw new Error("Invalid number of '../'");l=o.segments.length}return new fi(o,!1,l-d)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(d,r,i),m=h.processChildren?bd(h.segmentGroup,h.index,d.commands):n_(h.segmentGroup,h.index,d.commands);return wd(r.root,h.segmentGroup,m,o,l)}(b,this.currentUrlTree,e,A,null!=O?O:null)}navigateByUrl(e,o={skipLocationChange:!1}){const l=Mn(e)?e:this.parseUrl(e),d=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function yC(i){for(let r=0;r<i.length;r++){const e=i[r];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${r}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(l){o=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return o}isActive(e,o){let l;if(l=!0===o?Object.assign({},Ld):!1===o?Object.assign({},Bd):o,Mn(e))return Cd(this.currentUrlTree,e,l);const d=this.parseUrl(e);return Cd(this.currentUrlTree,d,l)}removeEmptyProps(e){return Object.keys(e).reduce((o,l)=>{const d=e[l];return null!=d&&(o[l]=d),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new cl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,l,d,h){var m,D;if(this.disposed)return Promise.resolve(!1);let b,O,A;h?(b=h.resolve,O=h.reject,A=h.promise):A=new Promise((ye,Ye)=>{b=ye,O=Ye});const $=++this.navigationId;let J;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),J=l&&l.\u0275routerPageId?l.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(D=this.browserPageId)&&void 0!==D?D:0)+1):J=0,this.setTransition({id:$,targetPageId:J,source:o,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:d,resolve:b,reject:O,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(ye=>Promise.reject(ye))}setBrowserUrl(e,o){const l=this.urlSerializer.serialize(e),d=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(l)||o.extras.replaceUrl?this.location.replaceState(l,"",d):this.location.go(l,"",d)}restoreHistory(e,o=!1){var l,d;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===h?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===h&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const l=new yd(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(l),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return i.\u0275fac=function(e){v.$Z()},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function fo(i){return"imperative"!==i}class Np{}class Op{preload(r,e){return Pe(null)}}let Fp=(()=>{class i{constructor(e,o,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new Qu(l,o,D=>e.triggerEvent(new Yt(D)),D=>e.triggerEvent(new dl(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(e=>e instanceof cl),xi(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(v.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const l=[];for(const d of o)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const h=d._loadedConfig;l.push(this.processRoutes(h.module,h.routes))}else d.loadChildren&&!d.canLoad?l.push(this.preloadConfig(e,d)):d.children&&l.push(this.processRoutes(e,d.children));return(0,zt.D)(l).pipe((0,ps.J)(),(0,St.U)(d=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?Pe(o._loadedConfig):this.loader.load(e.injector,o)).pipe((0,Wt.z)(d=>(o._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(jn),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(Np))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),Ud=(()=>{class i{constructor(e,o,l={}){this.router=e,this.viewportScroller=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof cl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof zn&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new zn(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){v.$Z()},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const Bi=new v.OlP("ROUTER_CONFIGURATION"),Vd=new v.OlP("ROUTER_FORROOT_GUARD"),Hd=[me,{provide:Oi,useClass:sa},{provide:jn,useFactory:function jp(i,r,e,o,l,d,h={},m,D){const b=new jn(null,i,r,e,o,l,hl(d));return m&&(b.urlHandlingStrategy=m),D&&(b.routeReuseStrategy=D),function P_(i,r){i.errorHandler&&(r.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(r.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(r.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(r.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(r.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(r.canceledNavigationResolution=i.canceledNavigationResolution)}(h,b),h.enableTracing&&b.events.subscribe(O=>{var A,$;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===($=console.groupEnd)||void 0===$||$.call(console)}),b},deps:[Oi,uo,me,v.zs3,v.Sil,Sl,Bi,[class S_{},new v.FiY],[class xp{},new v.FiY]]},uo,{provide:kr,useFactory:function Xu(i){return i.routerState.root},deps:[jn]},Fp,Op,class M_{preload(r,e){return e().pipe(ci(()=>Pe(null)))}},{provide:Bi,useValue:{enableTracing:!1}}];function R_(){return new v.PXZ("Router",jn)}let kp=(()=>{class i{constructor(e,o){}static forRoot(e,o){return{ngModule:i,providers:[Hd,$d(e),{provide:Vd,useFactory:ho,deps:[[jn,new v.FiY,new v.tp0]]},{provide:Bi,useValue:o||{}},{provide:Ne,useFactory:Bp,deps:[Me,[new v.tBr(it),new v.FiY],Bi]},{provide:Ud,useFactory:Lp,deps:[jn,vu,Bi]},{provide:Np,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:Op},{provide:v.PXZ,multi:!0,useFactory:R_},[Wd,{provide:v.ip1,multi:!0,useFactory:Up,deps:[Wd]},{provide:Gd,useFactory:Vp,deps:[Wd]},{provide:v.tb,multi:!0,useExisting:Gd}]]}}static forChild(e){return{ngModule:i,providers:[$d(e)]}}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(Vd,8),v.LFG(jn,8))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i})();function Lp(i,r,e){return e.scrollOffset&&r.setOffset(e.scrollOffset),new Ud(i,r,e)}function Bp(i,r,e={}){return e.useHash?new Ee(i,r):new Q(i,r)}function ho(i){return"guarded"}function $d(i){return[{provide:v.deG,multi:!0,useValue:i},{provide:Sl,multi:!0,useValue:i}]}let Wd=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ar.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const l=new Promise(m=>o=m),d=this.injector.get(jn),h=this.injector.get(Bi);return"disabled"===h.initialNavigation?(d.setUpLocationChangeListener(),o(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?Pe(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),d.initialNavigation()):o(!0),l})}bootstrapListener(e){const o=this.injector.get(Bi),l=this.injector.get(Fp),d=this.injector.get(Ud),h=this.injector.get(jn),m=this.injector.get(v.z2F);e===m.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&h.initialNavigation(),l.setUpPreloading(),d.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function Up(i){return i.appInitializer.bind(i)}function Vp(i){return i.bootstrapListener.bind(i)}const Gd=new v.OlP("Router Initializer");let ec=(()=>{class i{constructor(e){this.Router=e}take_me_to_chats(e){this.Router.navigate(["/chat"],{queryParams:{user:e}})}}return i.\u0275fac=function(e){return new(e||i)(v.Y36(jn))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-login"]],decls:7,vars:0,consts:[["username",""],[3,"click"]],template:function(e,o){if(1&e){const l=v.EpF();v.TgZ(0,"h1"),v._uU(1,"Enter Username"),v.qZA(),v._UZ(2,"input",null,0),v.TgZ(4,"button",1),v.NdJ("click",function(){v.CHM(l);const h=v.MAs(3);return o.take_me_to_chats(h.value)}),v._uU(5,"Click me"),v.qZA(),v._UZ(6,"br")}},styles:[""]}),i})();var tc=R(867),Hp=R(861),Es=R(681),$p=R(859),H=R(90),da=R(877);const Wp="@firebase/database";let qd="";class Gp{constructor(r){this.domStorage_=r,this.prefix_="firebase:"}set(r,e){null==e?this.domStorage_.removeItem(this.prefixedName_(r)):this.domStorage_.setItem(this.prefixedName_(r),(0,H.Pz)(e))}get(r){const e=this.domStorage_.getItem(this.prefixedName_(r));return null==e?null:(0,H.cI)(e)}remove(r){this.domStorage_.removeItem(this.prefixedName_(r))}prefixedName_(r){return this.prefix_+r}toString(){return this.domStorage_.toString()}}class Kd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(r,e){null==e?delete this.cache_[r]:this.cache_[r]=e}get(r){return(0,H.r3)(this.cache_,r)?this.cache_[r]:null}remove(r){delete this.cache_[r]}}const Zd=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const r=window[i];return r.setItem("firebase:sentinel","cache"),r.removeItem("firebase:sentinel"),new Gp(r)}}catch(r){}return new Kd},fa=Zd("localStorage"),nc=Zd("sessionStorage"),ha=new da.Yd("@firebase/database"),Qd=function(){let i=1;return function(){return i++}}(),zp=function(i){const r=(0,H.dS)(i),e=new H.gQ;e.update(r);const o=e.digest();return H.US.encodeByteArray(o)},xl=function(...i){let r="";for(let e=0;e<i.length;e++){const o=i[e];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=xl.apply(null,o):r+="object"==typeof o?(0,H.Pz)(o):o,r+=" "}return r};let Dn=null,Yp=!0;const dn=function(...i){if(!0===Yp&&(Yp=!1,null===Dn&&!0===nc.get("logging_enabled")&&function(i,r){(0,H.hu)(!r||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(ha.logLevel=da.in.VERBOSE,Dn=ha.log.bind(ha),r&&nc.set("logging_enabled",!0)):"function"==typeof i?Dn=i:(Dn=null,nc.remove("logging_enabled"))}(!0)),Dn){const r=xl.apply(null,i);Dn(r)}},Rl=function(i){return function(...r){dn(i,...r)}},Xd=function(...i){const r="FIREBASE INTERNAL ERROR: "+xl(...i);ha.error(r)},pi=function(...i){const r=`FIREBASE FATAL ERROR: ${xl(...i)}`;throw ha.error(r),new Error(r)},En=function(...i){const r="FIREBASE WARNING: "+xl(...i);ha.warn(r)},rc=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},$e="[MIN_NAME]",jr="[MAX_NAME]",ws=function(i,r){if(i===r)return 0;if(i===$e||r===jr)return-1;if(r===$e||i===jr)return 1;{const e=rf(i),o=rf(r);return null!==e?null!==o?e-o==0?i.length-r.length:e-o:-1:null!==o?1:i<r?-1:1}},qp=function(i,r){return i===r?0:i<r?-1:1},bs=function(i,r){if(r&&i in r)return r[i];throw new Error("Missing required key ("+i+") in object: "+(0,H.Pz)(r))},cr=function(i){if("object"!=typeof i||null===i)return(0,H.Pz)(i);const r=[];for(const o in i)r.push(o);r.sort();let e="{";for(let o=0;o<r.length;o++)0!==o&&(e+=","),e+=(0,H.Pz)(r[o]),e+=":",e+=cr(i[r[o]]);return e+="}",e},ef=function(i,r){const e=i.length;if(e<=r)return[i];const o=[];for(let l=0;l<e;l+=r)o.push(i.substring(l,l+r>e?e:l+r));return o};function fn(i,r){for(const e in i)i.hasOwnProperty(e)&&r(e,i[e])}const ic=function(i){(0,H.hu)(!rc(i),"Invalid JSON number");const o=1023;let l,d,h,m,D;0===i?(d=0,h=0,l=1/i==-1/0?1:0):(l=i<0,(i=Math.abs(i))>=Math.pow(2,1-o)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),o),d=m+o,h=Math.round(i*Math.pow(2,52-m)-Math.pow(2,52))):(d=0,h=Math.round(i/Math.pow(2,-1074))));const b=[];for(D=52;D;D-=1)b.push(h%2?1:0),h=Math.floor(h/2);for(D=11;D;D-=1)b.push(d%2?1:0),d=Math.floor(d/2);b.push(l?1:0),b.reverse();const O=b.join("");let A="";for(D=0;D<64;D+=8){let $=parseInt(O.substr(D,8),2).toString(16);1===$.length&&($="0"+$),A+=$}return A.toLowerCase()},nf=new RegExp("^-?(0*)\\d{1,10}$"),rf=function(i){if(nf.test(i)){const r=Number(i);if(r>=-2147483648&&r<=2147483647)return r}return null},Ui=function(i){try{i()}catch(r){setTimeout(()=>{throw En("Exception was thrown by user callback.",r.stack||""),r},Math.floor(0))}},po=function(i,r){const e=setTimeout(i,r);return"object"==typeof e&&e.unref&&e.unref(),e};class sf{constructor(r,e){this.appName_=r,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(o=>this.appCheck=o)}getToken(r){return this.appCheck?this.appCheck.getToken(r):new Promise((e,o)=>{setTimeout(()=>{this.appCheck?this.getToken(r).then(e,o):e(null)},0)})}addTokenChangeListener(r){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(o=>o.addTokenListener(r))}notifyForInvalidToken(){En(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class of{constructor(r,e,o){this.appName_=r,this.firebaseOptions_=e,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(r){return this.auth_?this.auth_.getToken(r).catch(e=>e&&"auth/token-not-initialized"===e.code?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,o)=>{setTimeout(()=>{this.auth_?this.getToken(r).then(e,o):e(null)},0)})}addTokenChangeListener(r){this.auth_?this.auth_.addAuthTokenListener(r):this.authProvider_.get().then(e=>e.addAuthTokenListener(r))}removeTokenChangeListener(r){this.authProvider_.get().then(e=>e.removeAuthTokenListener(r))}notifyForInvalidToken(){let r='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';r+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',En(r)}}let ac=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const B_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lf="websocket",eg="long_polling";class Pl{constructor(r,e,o,l,d=!1,h="",m=!1){this.secure=e,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=d,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this._host=r.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fa.get("host:"+r)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(r){r!==this.internalHost&&(this.internalHost=r,this.isCacheableHost()&&fa.set("host:"+this._host,this.internalHost))}toString(){let r=this.toURLString();return this.persistenceKey&&(r+="<"+this.persistenceKey+">"),r}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function U_(i,r,e){let o;if((0,H.hu)("string"==typeof r,"typeof type must == string"),(0,H.hu)("object"==typeof e,"typeof params must == object"),r===lf)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(r!==eg)throw new Error("Unknown connection type: "+r);o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function vC(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const l=[];return fn(e,(d,h)=>{l.push(d+"="+h)}),o+l.join("&")}class CC{constructor(){this.counters_={}}incrementCounter(r,e=1){(0,H.r3)(this.counters_,r)||(this.counters_[r]=0),this.counters_[r]+=e}get(){return(0,H.p$)(this.counters_)}}const tg={},ng={};function rg(i){const r=i.toString();return tg[r]||(tg[r]=new CC),tg[r]}class EC{constructor(r){this.onMessage_=r,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(r,e){this.closeAfterResponse=r,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(r,e){for(this.pendingResponses[r]=e;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&Ui(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ss{constructor(r,e,o,l,d,h,m){this.connId=r,this.repoInfo=e,this.applicationId=o,this.appCheckToken=l,this.authToken=d,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rl(r),this.stats_=rg(e),this.urlFn=D=>(this.appCheckToken&&(D.ac=this.appCheckToken),U_(e,eg,D))}open(r,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new EC(r),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,H.Yr)()||"complete"===document.readyState)i();else{let r=!1;const e=function(){document.body?r||(r=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new go((...d)=>{const[h,m,D,b,O]=d;if(this.incrementIncomingBytes_(d),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=m,this.password=D;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...d)=>{const[h,m]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&B_.test(location.hostname)&&(o.r="f");const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ss.forceAllow_=!0}static forceDisallow(){Ss.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!Ss.forceAllow_&&(Ss.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(r){const e=(0,H.Pz)(r);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const o=(0,H.h$)(e),l=ef(o,1840);for(let d=0;d<l.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[d]),this.curSegmentNum++}addDisconnectPingFrame(r,e){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=r,o.pw=e,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(r){const e=(0,H.Pz)(r).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class go{constructor(r,e,o,l){if(this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=r,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Qd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=r,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=go.createIFrame_();let d="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(d='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){dn("frame writing exception"),m.stack&&dn(m.stack),dn(m)}}}static createIFrame_(){const r=document.createElement("iframe");if(r.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(r);try{r.contentWindow.document||dn("No IE domain setting required")}catch(e){const o=document.domain;r.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return r.contentDocument?r.doc=r.contentDocument:r.contentWindow?r.doc=r.contentWindow.document:r.document&&(r.doc=r.document),r}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const r=this.onDisconnect;r&&(this.onDisconnect=null,r())}startLongPoll(r,e){for(this.myID=r,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const r={};r.id=this.myID,r.pw=this.myPW,r.ser=this.currentSerial;let e=this.urlFn(r),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const h=this.pendingSegs.shift();o=o+"&seg"+l+"="+h.seg+"&ts"+l+"="+h.ts+"&d"+l+"="+h.d,l++}return e+=o,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(r,e,o){this.pendingSegs.push({seg:r,ts:e,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(r,e){this.outstandingRequests.add(e);const o=()=>{this.outstandingRequests.delete(e),this.newRequest_()},l=setTimeout(o,Math.floor(25e3));this.addTag(r,()=>{clearTimeout(l),o()})}addTag(r,e){(0,H.Yr)()?this.doNodeLongPoll(r,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=r,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||"loaded"===l||"complete"===l)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),e())},o.onerror=()=>{dn("Long-poll script failed to load: "+r),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch(o){}},Math.floor(1))}}let Vi=null;"undefined"!=typeof MozWebSocket?Vi=MozWebSocket:"undefined"!=typeof WebSocket&&(Vi=WebSocket);let gi=(()=>{class i{constructor(e,o,l,d,h,m,D){this.connId=e,this.applicationId=l,this.appCheckToken=d,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rl(this.connId),this.stats_=rg(o),this.connURL=i.connectionURL_(o,m,D,d,l),this.nodeAdmin=o.nodeAdmin}static connectionURL_(e,o,l,d,h){const m={v:"5"};return!(0,H.Yr)()&&"undefined"!=typeof location&&location.hostname&&B_.test(location.hostname)&&(m.r="f"),o&&(m.s=o),l&&(m.ls=l),d&&(m.ac=d),h&&(m.p=h),U_(e,lf,m)}open(e,o){this.onDisconnect=o,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{let l;if((0,H.Yr)()){l={headers:{"User-Agent":`Firebase/5/${qd}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(l.proxy={origin:m})}this.mySock=new Vi(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const d=l.message||l.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const d=l.message||l.data;d&&this.log_(d),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const l=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);l&&l.length>1&&parseFloat(l[1])<4.4&&(e=!0)}return!e&&null!==Vi&&!i.forceDisallow_}static previouslyFailed(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")}markConnectionHealthy(){fa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const l=(0,H.cI)(o);this.onMessage(l)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const o=Number(e);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const o=e.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const l=this.extractFrameCount_(o);null!==l&&this.appendFrame_(l)}}send(e){this.resetKeepAlive();const o=(0,H.Pz)(e);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const l=ef(o,16384);l.length>1&&this.sendString_(String(l.length));for(let d=0;d<l.length;d++)this.sendString_(l[d])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),mo=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ss,gi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const o=gi&&gi.isAvailable();let l=o&&!gi.previouslyFailed();if(e.webSocketOnly&&(o||En("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[gi];else{const d=this.transports_=[];for(const h of i.ALL_TRANSPORTS)h&&h.isAvailable()&&d.push(h);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class gg{constructor(r,e,o,l,d,h,m,D,b,O){this.id=r,this.repoInfo_=e,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=d,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=D,this.onKill_=b,this.lastSessionId=O,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rl("c:"+this.id+":"),this.transportManager_=new mo(e),this.log_("Connection created"),this.start_()}start_(){const r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,o)},Math.floor(0));const l=r.healthyTimeout||0;l>0&&(this.healthyTimeout_=po(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(r){return e=>{r===this.conn_?this.onConnectionLost_(e):r===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(r){return e=>{2!==this.state_&&(r===this.rx_?this.onPrimaryMessageReceived_(e):r===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(r){this.sendData_({t:"d",d:r})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(r){if("t"in r){const e=r.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(r){const e=bs("t",r),o=bs("d",r);if("c"===e)this.onSecondaryControl_(o);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(r){const e=bs("t",r),o=bs("d",r);"c"===e?this.onControl_(o):"d"===e&&this.onDataMessage_(o)}onDataMessage_(r){this.onPrimaryResponse_(),this.onMessage_(r)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(r){const e=bs("t",r);if("d"in r){const o=r.d;if("h"===e)this.onHandshake_(o);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(o):"r"===e?this.onReset_(o):"e"===e?Xd("Server Error: "+o):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xd("Unknown control packet command: "+e)}}onHandshake_(r){const e=r.ts,o=r.v,l=r.h;this.sessionId=r.s,this.repoInfo_.host=l,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==o&&En("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const r=this.transportManager_.upgradeTransport();r&&this.startUpgrade_(r)}startUpgrade_(r){this.secondaryConn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,o),po(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(r){this.log_("Reset packet received.  New host: "+r),this.repoInfo_.host=r,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(r,e){this.log_("Realtime connection established."),this.conn_=r,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):po(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const r=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===r||this.rx_===r)&&this.close()}onConnectionLost_(r){this.conn_=null,r||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(r){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(r),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(r){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(r)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mg{put(r,e,o,l){}merge(r,e,o,l){}refreshAuthToken(r){}refreshAppCheckToken(r){}onDisconnectPut(r,e,o){}onDisconnectMerge(r,e,o){}onDisconnectCancel(r,e){}reportStats(r){}}class qn{constructor(r){this.allowedEvents_=r,this.listeners_={},(0,H.hu)(Array.isArray(r)&&r.length>0,"Requires a non-empty array")}trigger(r,...e){if(Array.isArray(this.listeners_[r])){const o=[...this.listeners_[r]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,e)}}on(r,e,o){this.validateEventType_(r),this.listeners_[r]=this.listeners_[r]||[],this.listeners_[r].push({callback:e,context:o});const l=this.getInitialEvent(r);l&&e.apply(o,l)}off(r,e,o){this.validateEventType_(r);const l=this.listeners_[r]||[];for(let d=0;d<l.length;d++)if(l[d].callback===e&&(!o||o===l[d].context))return void l.splice(d,1)}validateEventType_(r){(0,H.hu)(this.allowedEvents_.find(e=>e===r),"Unknown event: "+r)}}class hc extends qn{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hc}getInitialEvent(r){return(0,H.hu)("online"===r,"Unknown event type: "+r),[this.online_]}currentlyOnline(){return this.online_}}class yt{constructor(r,e){if(void 0===e){this.pieces_=r.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=r,this.pieceNum_=e}toString(){let r="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(r+="/"+this.pieces_[e]);return r||"/"}}function dt(){return new yt("")}function at(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function As(i){return i.pieces_.length-i.pieceNum_}function vt(i){let r=i.pieceNum_;return r<i.pieces_.length&&r++,new yt(i.pieces_,r)}function pc(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Ol(i,r=0){return i.pieces_.slice(i.pieceNum_+r)}function yg(i){if(i.pieceNum_>=i.pieces_.length)return null;const r=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)r.push(i.pieces_[e]);return new yt(r,0)}function Ot(i,r){const e=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)e.push(i.pieces_[o]);if(r instanceof yt)for(let o=r.pieceNum_;o<r.pieces_.length;o++)e.push(r.pieces_[o]);else{const o=r.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&e.push(o[l])}return new yt(e,0)}function rt(i){return i.pieceNum_>=i.pieces_.length}function xn(i,r){const e=at(i),o=at(r);if(null===e)return r;if(e===o)return xn(vt(i),vt(r));throw new Error("INTERNAL ERROR: innerPath ("+r+") is not within outerPath ("+i+")")}function _f(i,r){if(As(i)!==As(r))return!1;for(let e=i.pieceNum_,o=r.pieceNum_;e<=i.pieces_.length;e++,o++)if(i.pieces_[e]!==r.pieces_[o])return!1;return!0}function dr(i,r){let e=i.pieceNum_,o=r.pieceNum_;if(As(i)>As(r))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==r.pieces_[o])return!1;++e,++o}return!0}class vg{constructor(r,e){this.errorPrefix_=e,this.parts_=Ol(r,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,H.ug)(this.parts_[o]);gc(this)}}function gc(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_o(i))}function _o(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class yf extends qn{constructor(){let r,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",r="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",r="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",r="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",r="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const o=!document[r];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new yf}getInitialEvent(r){return(0,H.hu)("visible"===r,"Unknown event type: "+r),[this.visible_]}}const mc=1e3;let _c,yo=(()=>{class i extends mg{constructor(e,o,l,d,h,m,D,b){if(super(),this.repoInfo_=e,this.applicationId_=o,this.onDataUpdate_=l,this.onConnectStatus_=d,this.onServerInfoUpdate_=h,this.authTokenProvider_=m,this.appCheckTokenProvider_=D,this.authOverride_=b,this.id=i.nextPersistentConnectionId_++,this.log_=Rl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yf.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&hc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,o,l){const d=++this.requestNumber_,h={r:d,a:e,b:o};this.log_((0,H.Pz)(h)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),l&&(this.requestCBHash_[d]=l)}get(e){this.initConnection_();const o=new H.BH,l={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:l,onComplete:m=>{const D=m.d;"ok"===m.s?o.resolve(D):o.reject(D)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(e,o,l,d){this.initConnection_();const h=e._queryIdentifier,m=e._path.toString();this.log_("Listen called for "+m+" "+h),this.listens.has(m)||this.listens.set(m,new Map),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(m).has(h),"listen() called twice for same path/queryId.");const D={onComplete:d,hashFn:o,query:e,tag:l};this.listens.get(m).set(h,D),this.connected_&&this.sendListen_(D)}sendGet_(e){const o=this.outstandingGets_[e];this.sendRequest("g",o.request,l=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(l)})}sendListen_(e){const o=e.query,l=o._path.toString(),d=o._queryIdentifier;this.log_("Listen on "+l+" for "+d);const h={p:l};e.tag&&(h.q=o._queryObject,h.t=e.tag),h.h=e.hashFn(),this.sendRequest("q",h,D=>{const b=D.d,O=D.s;i.warnOnListenWarnings_(b,o),(this.listens.get(l)&&this.listens.get(l).get(d))===e&&(this.log_("listen response",D),"ok"!==O&&this.removeListen_(l,d),e.onComplete&&e.onComplete(O,b))})}static warnOnListenWarnings_(e,o){if(e&&"object"==typeof e&&(0,H.r3)(e,"w")){const l=(0,H.DV)(e,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const d='".indexOn": "'+o._queryParams.getIndex().toString()+'"',h=o._path.toString();En(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${d} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,H.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,o=(0,H.w9)(e)?"auth":"gauth",l={cred:e};null===this.authOverride_?l.noauth=!0:"object"==typeof this.authOverride_&&(l.authvar=this.authOverride_),this.sendRequest(o,l,d=>{const h=d.s,m=d.d||"error";this.authToken_===e&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const o=e.s,l=e.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,l)})}unlisten(e,o){const l=e._path.toString(),d=e._queryIdentifier;this.log_("Unlisten called for "+l+" "+d),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,d)&&this.connected_&&this.sendUnlisten_(l,d,e._queryObject,o)}sendUnlisten_(e,o,l,d){this.log_("Unlisten on "+e+" for "+o);const h={p:e};d&&(h.q=l,h.t=d),this.sendRequest("n",h)}onDisconnectPut(e,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,o,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:o,onComplete:l})}onDisconnectMerge(e,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,o,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:o,onComplete:l})}onDisconnectCancel(e,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(e,o,l,d){const h={p:o,d:l};this.log_("onDisconnect "+e,h),this.sendRequest(e,h,m=>{d&&setTimeout(()=>{d(m.s,m.d)},Math.floor(0))})}put(e,o,l,d){this.putInternal("p",e,o,l,d)}merge(e,o,l,d){this.putInternal("m",e,o,l,d)}putInternal(e,o,l,d,h){this.initConnection_();const m={p:o,d:l};void 0!==h&&(m.h=h),this.outstandingPuts_.push({action:e,request:m,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(e){const o=this.outstandingPuts_[e].action,l=this.outstandingPuts_[e].request,d=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(o,l,h=>{this.log_(o+" response",h),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),d&&d(h.s,h.d)})}reportStats(e){if(this.connected_){const o={c:e};this.log_("reportStats",o),this.sendRequest("s",o,l=>{"ok"!==l.s&&this.log_("reportStats","Error sending stats: "+l.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,H.Pz)(e));const o=e.r,l=this.requestCBHash_[o];l&&(delete this.requestCBHash_[o],l(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,o){this.log_("handleServerMessage",e,o),"d"===e?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===e?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===e?this.onListenRevoked_(o.p,o.q):"ac"===e?this.onAuthRevoked_(o.s,o.d):"apc"===e?this.onAppCheckRevoked_(o.s,o.d):"sd"===e?this.onSecurityDebugPacket_(o):Xd("Unrecognized action received from server: "+(0,H.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=mc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-e);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Hp.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const o=e.onDataMessage_.bind(e),l=e.onReady_.bind(e),d=e.onRealtimeDisconnect_.bind(e),h=e.id+":"+i.nextConnectionId_++,m=e.lastSessionId;let D=!1,b=null;const O=function(){b?b.close():(D=!0,d())};e.realtime_={close:O,sendRequest:function(J){(0,H.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(J)}};const $=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[J,ye]=yield Promise.all([e.authTokenProvider_.getToken($),e.appCheckTokenProvider_.getToken($)]);D?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),e.authToken_=J&&J.accessToken,e.appCheckToken_=ye&&ye.token,b=new gg(h,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,o,l,d,Ye=>{En(Ye+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},m))}catch(J){e.log_("Failed to get token: "+J),D||(e.repoInfo_.nodeAdmin&&En(J),O())}}})()}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const o=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const o=this.outstandingPuts_[e];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,o){let l;l=o?o.map(h=>cr(h)).join("$"):"default";const d=this.removeListen_(e,l);d&&d.onComplete&&d.onComplete("permission_denied")}removeListen_(e,o){const l=new yt(e).toString();let d;if(this.listens.has(l)){const h=this.listens.get(l);d=h.get(o),h.delete(o),0===h.size&&this.listens.delete(l)}else d=void 0;return d}onAuthRevoked_(e,o){dn("Auth token revoked: "+e+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,o){dn("App check token revoked: "+e+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const o of e.values())this.sendListen_(o);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let o="js";(0,H.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+o+"."+qd.replace(/\./g,"-")]=1,(0,H.uI)()?e["framework.cordova"]=1:(0,H.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=hc.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Xe{constructor(r,e){this.name=r,this.node=e}static Wrap(r,e){return new Xe(r,e)}}class ga{getCompare(){return this.compare.bind(this)}indexedValueChanged(r,e){const o=new Xe($e,r),l=new Xe($e,e);return 0!==this.compare(o,l)}minPost(){return Xe.MIN}}class yc extends ga{static get __EMPTY_NODE(){return _c}static set __EMPTY_NODE(r){_c=r}compare(r,e){return ws(r.name,e.name)}isDefinedOn(r){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(r,e){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(jr,_c)}makePost(r,e){return(0,H.hu)("string"==typeof r,"KeyIndex indexValue must always be a string."),new Xe(r,_c)}toString(){return".key"}}const Dr=new yc;class Fl{constructor(r,e,o,l,d=null){this.isReverse_=l,this.resultGenerator_=d,this.nodeStack_=[];let h=1;for(;!r.isEmpty();)if(r=r,h=e?o(r.key,e):1,l&&(h*=-1),h<0)r=this.isReverse_?r.left:r.right;else{if(0===h){this.nodeStack_.push(r);break}this.nodeStack_.push(r),r=this.isReverse_?r.right:r.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,r=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value},this.isReverse_)for(r=r.left;!r.isEmpty();)this.nodeStack_.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack_.push(r),r=r.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const r=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(r.key,r.value):{key:r.key,value:r.value}}}let vc,Ur=(()=>{class i{constructor(e,o,l,d,h){this.key=e,this.value=o,this.color=null!=l?l:i.RED,this.left=null!=d?d:Rn.EMPTY_NODE,this.right=null!=h?h:Rn.EMPTY_NODE}copy(e,o,l,d,h){return new i(null!=e?e:this.key,null!=o?o:this.value,null!=l?l:this.color,null!=d?d:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,o,l){let d=this;const h=l(e,d.key);return d=h<0?d.copy(null,null,null,d.left.insert(e,o,l),null):0===h?d.copy(null,o,null,null,null):d.copy(null,null,null,null,d.right.insert(e,o,l)),d.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,o){let l,d;if(l=this,o(e,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(e,o),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),0===o(e,l.key)){if(l.right.isEmpty())return Rn.EMPTY_NODE;d=l.right.min_(),l=l.copy(d.key,d.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(e,o))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,o)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Rn{constructor(r,e=Rn.EMPTY_NODE){this.comparator_=r,this.root_=e}insert(r,e){return new Rn(this.comparator_,this.root_.insert(r,e,this.comparator_).copy(null,null,Ur.BLACK,null,null))}remove(r){return new Rn(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,Ur.BLACK,null,null))}get(r){let e,o=this.root_;for(;!o.isEmpty();){if(e=this.comparator_(r,o.key),0===e)return o.value;e<0?o=o.left:e>0&&(o=o.right)}return null}getPredecessorKey(r){let e,o=this.root_,l=null;for(;!o.isEmpty();){if(e=this.comparator_(r,o.key),0===e){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}e<0?o=o.left:e>0&&(l=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(r){return this.root_.inorderTraversal(r)}reverseTraversal(r){return this.root_.reverseTraversal(r)}getIterator(r){return new Fl(this.root_,null,this.comparator_,!1,r)}getIteratorFrom(r,e){return new Fl(this.root_,r,this.comparator_,!1,e)}getReverseIteratorFrom(r,e){return new Fl(this.root_,r,this.comparator_,!0,e)}getReverseIterator(r){return new Fl(this.root_,null,this.comparator_,!0,r)}}function bC(i,r){return ws(i.name,r.name)}function Cf(i,r){return ws(i,r)}Rn.EMPTY_NODE=new class X_{copy(r,e,o,l,d){return this}insert(r,e,o){return new Ur(r,e,null)}remove(r,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Df=function(i){return"number"==typeof i?"number:"+ic(i):"string:"+i},Ef=function(i){if(i.isLeafNode()){const r=i.val();(0,H.hu)("string"==typeof r||"number"==typeof r||"object"==typeof r&&(0,H.r3)(r,".sv"),"Priority must be a string or number.")}else(0,H.hu)(i===vc||i.isEmpty(),"priority of unexpected type.");(0,H.hu)(i===vc||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wf,kl,bg,Kn=(()=>{class i{constructor(e,o=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=o,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ef(this.priorityNode_)}static set __childrenNodeConstructor(e){wf=e}static get __childrenNodeConstructor(){return wf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rt(e)?this:".priority"===at(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,o){return null}updateImmediateChild(e,o){return".priority"===e?this.updatePriority(o):o.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,o).updatePriority(this.priorityNode_)}updateChild(e,o){const l=at(e);return null===l?o:o.isEmpty()&&".priority"!==l?this:((0,H.hu)(".priority"!==l||1===As(e),".priority must be the last token in a path"),this.updateImmediateChild(l,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,o){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Df(this.priorityNode_.val())+":");const o=typeof this.value_;e+=o+":",e+="number"===o?ic(this.value_):this.value_,this.lazyHash_=zp(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,H.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const o=typeof e.value_,l=typeof this.value_,d=i.VALUE_TYPE_ORDER.indexOf(o),h=i.VALUE_TYPE_ORDER.indexOf(l);return(0,H.hu)(d>=0,"Unknown leaf type: "+o),(0,H.hu)(h>=0,"Unknown leaf type: "+l),d===h?"object"===l?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:h-d}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const o=e;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const At=new class bf extends ga{compare(r,e){const o=r.node.getPriority(),l=e.node.getPriority(),d=o.compareTo(l);return 0===d?ws(r.name,e.name):d}isDefinedOn(r){return!r.getPriority().isEmpty()}indexedValueChanged(r,e){return!r.getPriority().equals(e.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(jr,new Kn("[PRIORITY-POST]",bg))}makePost(r,e){const o=kl(r);return new Xe(e,new Kn("[PRIORITY-POST]",o))}toString(){return".priority"}},If=Math.log(2);class Ll{constructor(r){this.count=parseInt(Math.log(r+1)/If,10),this.current_=this.count-1;const l=(d=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=r+1&l}nextBitIsOne(){const r=!(this.bits_&1<<this.current_);return this.current_--,r}}const Cc=function(i,r,e,o){i.sort(r);const l=function(D,b){const O=b-D;let A,$;if(0===O)return null;if(1===O)return A=i[D],$=e?e(A):A,new Ur($,A.node,Ur.BLACK,null,null);{const J=parseInt(O/2,10)+D,ye=l(D,J),Ye=l(J+1,b);return A=i[J],$=e?e(A):A,new Ur($,A.node,Ur.BLACK,ye,Ye)}},m=function(D){let b=null,O=null,A=i.length;const $=function(ye,Ye){const _t=A-ye,Xn=A;A-=ye;const hn=l(_t+1,Xn),Ro=i[_t],uu=e?e(Ro):Ro;J(new Ur(uu,Ro.node,Ye,null,hn))},J=function(ye){b?(b.left=ye,b=ye):(O=ye,b=ye)};for(let ye=0;ye<D.count;++ye){const Ye=D.nextBitIsOne(),_t=Math.pow(2,D.count-(ye+1));Ye?$(_t,Ur.BLACK):($(_t,Ur.BLACK),$(_t,Ur.RED))}return O}(new Ll(i.length));return new Rn(o||r,m)};let Bl;const vo={};class _i{constructor(r,e){this.indexes_=r,this.indexSet_=e}static get Default(){return(0,H.hu)(vo&&At,"ChildrenNode.ts has not been loaded"),Bl=Bl||new _i({".priority":vo},{".priority":At}),Bl}get(r){const e=(0,H.DV)(this.indexes_,r);if(!e)throw new Error("No index defined for "+r);return e instanceof Rn?e:null}hasIndex(r){return(0,H.r3)(this.indexSet_,r.toString())}addIndex(r,e){(0,H.hu)(r!==Dr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const d=e.getIterator(Xe.Wrap);let m,h=d.getNext();for(;h;)l=l||r.isDefinedOn(h.node),o.push(h),h=d.getNext();m=l?Cc(o,r.getCompare()):vo;const D=r.toString(),b=Object.assign({},this.indexSet_);b[D]=r;const O=Object.assign({},this.indexes_);return O[D]=m,new _i(O,b)}addToIndexes(r,e){const o=(0,H.UI)(this.indexes_,(l,d)=>{const h=(0,H.DV)(this.indexSet_,d);if((0,H.hu)(h,"Missing index implementation for "+d),l===vo){if(h.isDefinedOn(r.node)){const m=[],D=e.getIterator(Xe.Wrap);let b=D.getNext();for(;b;)b.name!==r.name&&m.push(b),b=D.getNext();return m.push(r),Cc(m,h.getCompare())}return vo}{const m=e.get(r.name);let D=l;return m&&(D=D.remove(new Xe(r.name,m))),D.insert(r,r.node)}});return new _i(o,this.indexSet_)}removeFromIndexes(r,e){const o=(0,H.UI)(this.indexes_,l=>{if(l===vo)return l;{const d=e.get(r.name);return d?l.remove(new Xe(r.name,d)):l}});return new _i(o,this.indexSet_)}}let ma,Qe=(()=>{class i{constructor(e,o,l){this.children_=e,this.priorityNode_=o,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&Ef(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ma||(ma=new i(new Rn(Cf),null,_i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ma}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const o=this.children_.get(e);return null===o?ma:o}}getChild(e){const o=at(e);return null===o?this:this.getImmediateChild(o).getChild(vt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,o){if((0,H.hu)(o,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(o);{const l=new Xe(e,o);let d,h;o.isEmpty()?(d=this.children_.remove(e),h=this.indexMap_.removeFromIndexes(l,this.children_)):(d=this.children_.insert(e,o),h=this.indexMap_.addToIndexes(l,this.children_));const m=d.isEmpty()?ma:this.priorityNode_;return new i(d,m,h)}}updateChild(e,o){const l=at(e);if(null===l)return o;{(0,H.hu)(".priority"!==at(e)||1===As(e),".priority must be the last token in a path");const d=this.getImmediateChild(l).updateChild(vt(e),o);return this.updateImmediateChild(l,d)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const o={};let l=0,d=0,h=!0;if(this.forEachChild(At,(m,D)=>{o[m]=D.val(e),l++,h&&i.INTEGER_REGEXP_.test(m)?d=Math.max(d,Number(m)):h=!1}),!e&&h&&d<2*l){const m=[];for(const D in o)m[D]=o[D];return m}return e&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Df(this.getPriority().val())+":"),this.forEachChild(At,(o,l)=>{const d=l.hash();""!==d&&(e+=":"+o+":"+d)}),this.lazyHash_=""===e?"":zp(e)}return this.lazyHash_}getPredecessorChildName(e,o,l){const d=this.resolveIndex_(l);if(d){const h=d.getPredecessorKey(new Xe(e,o));return h?h.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const o=this.resolveIndex_(e);if(o){const l=o.minKey();return l&&l.name}return this.children_.minKey()}getFirstChild(e){const o=this.getFirstChildName(e);return o?new Xe(o,this.children_.get(o)):null}getLastChildName(e){const o=this.resolveIndex_(e);if(o){const l=o.maxKey();return l&&l.name}return this.children_.maxKey()}getLastChild(e){const o=this.getLastChildName(e);return o?new Xe(o,this.children_.get(o)):null}forEachChild(e,o){const l=this.resolveIndex_(e);return l?l.inorderTraversal(d=>o(d.name,d.node)):this.children_.inorderTraversal(o)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,o){const l=this.resolveIndex_(o);if(l)return l.getIteratorFrom(e,d=>d);{const d=this.children_.getIteratorFrom(e.name,Xe.Wrap);let h=d.peek();for(;null!=h&&o.compare(h,e)<0;)d.getNext(),h=d.peek();return d}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,o){const l=this.resolveIndex_(o);if(l)return l.getReverseIteratorFrom(e,d=>d);{const d=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let h=d.peek();for(;null!=h&&o.compare(h,e)>0;)d.getNext(),h=d.peek();return d}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===jl?-1:0}withIndex(e){if(e===Dr||this.indexMap_.hasIndex(e))return this;{const o=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,o)}}isIndexed(e){return e===Dr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const o=e;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const l=this.getIterator(At),d=o.getIterator(At);let h=l.getNext(),m=d.getNext();for(;h&&m;){if(h.name!==m.name||!h.node.equals(m.node))return!1;h=l.getNext(),m=d.getNext()}return null===h&&null===m}return!1}return!1}}resolveIndex_(e){return e===Dr?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const jl=new class Tf extends Qe{constructor(){super(new Rn(Cf),Qe.EMPTY_NODE,_i.Default)}compareTo(r){return r===this?0:1}equals(r){return r===this}getPriority(){return this}getImmediateChild(r){return Qe.EMPTY_NODE}isEmpty(){return!1}};function Bt(i,r=null){if(null===i)return Qe.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(r=i[".priority"]),(0,H.hu)(null===r||"string"==typeof r||"number"==typeof r||"object"==typeof r&&".sv"in r,"Invalid priority type found: "+typeof r),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Kn(i,Bt(r));if(i instanceof Array){let e=Qe.EMPTY_NODE;return fn(i,(o,l)=>{if((0,H.r3)(i,o)&&"."!==o.substring(0,1)){const d=Bt(l);(d.isLeafNode()||!d.isEmpty())&&(e=e.updateImmediateChild(o,d))}}),e.updatePriority(Bt(r))}{const e=[];let o=!1;if(fn(i,(h,m)=>{if("."!==h.substring(0,1)){const D=Bt(m);D.isEmpty()||(o=o||!D.getPriority().isEmpty(),e.push(new Xe(h,D)))}}),0===e.length)return Qe.EMPTY_NODE;const d=Cc(e,bC,h=>h.name,Cf);if(o){const h=Cc(e,At.getCompare());return new Qe(d,Bt(r),new _i({".priority":h},{".priority":At}))}return new Qe(d,Bt(r),_i.Default)}}Object.defineProperties(Xe,{MIN:{value:new Xe($e,Qe.EMPTY_NODE)},MAX:{value:new Xe(jr,jl)}}),yc.__EMPTY_NODE=Qe.EMPTY_NODE,Kn.__childrenNodeConstructor=Qe,function wg(i){vc=i}(jl),function IC(i){bg=i}(jl),function ey(i){kl=i}(Bt);class Ms extends ga{constructor(r){super(),this.indexPath_=r,(0,H.hu)(!rt(r)&&".priority"!==at(r),"Can't create PathIndex with empty path or .priority key")}extractChild(r){return r.getChild(this.indexPath_)}isDefinedOn(r){return!r.getChild(this.indexPath_).isEmpty()}compare(r,e){const o=this.extractChild(r.node),l=this.extractChild(e.node),d=o.compareTo(l);return 0===d?ws(r.name,e.name):d}makePost(r,e){const o=Bt(r),l=Qe.EMPTY_NODE.updateChild(this.indexPath_,o);return new Xe(e,l)}maxPost(){const r=Qe.EMPTY_NODE.updateChild(this.indexPath_,jl);return new Xe(jr,r)}toString(){return Ol(this.indexPath_,0).join("/")}}const Sf=new class Ig extends ga{compare(r,e){const o=r.node.compareTo(e.node);return 0===o?ws(r.name,e.name):o}isDefinedOn(r){return!0}indexedValueChanged(r,e){return!r.equals(e)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(r,e){const o=Bt(r);return new Xe(e,o)}toString(){return".value"}},_a="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ny=function(){let i=0;const r=[];return function(e){const o=e===i;let l;i=e;const d=new Array(8);for(l=7;l>=0;l--)d[l]=_a.charAt(e%64),e=Math.floor(e/64);(0,H.hu)(0===e,"Cannot push at time == 0");let h=d.join("");if(o){for(l=11;l>=0&&63===r[l];l--)r[l]=0;r[l]++}else for(l=0;l<12;l++)r[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)h+=_a.charAt(r[l]);return(0,H.hu)(20===h.length,"nextPushId: Length should be 20."),h}}();function Dc(i){return{type:"value",snapshotNode:i}}function Co(i,r){return{type:"child_added",snapshotNode:r,childName:i}}function ya(i,r){return{type:"child_removed",snapshotNode:r,childName:i}}function va(i,r,e){return{type:"child_changed",snapshotNode:r,childName:i,oldSnap:e}}class Af{constructor(r){this.index_=r}updateChild(r,e,o,l,d,h){(0,H.hu)(r.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=r.getImmediateChild(e);return m.getChild(l).equals(o.getChild(l))&&m.isEmpty()===o.isEmpty()||(null!=h&&(o.isEmpty()?r.hasChild(e)?h.trackChildChange(ya(e,m)):(0,H.hu)(r.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(Co(e,o)):h.trackChildChange(va(e,o,m))),r.isLeafNode()&&o.isEmpty())?r:r.updateImmediateChild(e,o).withIndex(this.index_)}updateFullNode(r,e,o){return null!=o&&(r.isLeafNode()||r.forEachChild(At,(l,d)=>{e.hasChild(l)||o.trackChildChange(ya(l,d))}),e.isLeafNode()||e.forEachChild(At,(l,d)=>{if(r.hasChild(l)){const h=r.getImmediateChild(l);h.equals(d)||o.trackChildChange(va(l,d,h))}else o.trackChildChange(Co(l,d))})),e.withIndex(this.index_)}updatePriority(r,e){return r.isEmpty()?Qe.EMPTY_NODE:r.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ul{constructor(r){this.indexedFilter_=new Af(r.getIndex()),this.index_=r.getIndex(),this.startPost_=Ul.getStartPost_(r),this.endPost_=Ul.getEndPost_(r)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(r){return this.index_.compare(this.getStartPost(),r)<=0&&this.index_.compare(r,this.getEndPost())<=0}updateChild(r,e,o,l,d,h){return this.matches(new Xe(e,o))||(o=Qe.EMPTY_NODE),this.indexedFilter_.updateChild(r,e,o,l,d,h)}updateFullNode(r,e,o){e.isLeafNode()&&(e=Qe.EMPTY_NODE);let l=e.withIndex(this.index_);l=l.updatePriority(Qe.EMPTY_NODE);const d=this;return e.forEachChild(At,(h,m)=>{d.matches(new Xe(h,m))||(l=l.updateImmediateChild(h,Qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(r,l,o)}updatePriority(r,e){return r}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(r){if(r.hasStart()){const e=r.getIndexStartName();return r.getIndex().makePost(r.getIndexStartValue(),e)}return r.getIndex().minPost()}static getEndPost_(r){if(r.hasEnd()){const e=r.getIndexEndName();return r.getIndex().makePost(r.getIndexEndValue(),e)}return r.getIndex().maxPost()}}class ry{constructor(r){this.rangedFilter_=new Ul(r),this.index_=r.getIndex(),this.limit_=r.getLimit(),this.reverse_=!r.isViewFromLeft()}updateChild(r,e,o,l,d,h){return this.rangedFilter_.matches(new Xe(e,o))||(o=Qe.EMPTY_NODE),r.getImmediateChild(e).equals(o)?r:r.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(r,e,o,l,d,h):this.fullLimitUpdateChild_(r,e,o,d,h)}updateFullNode(r,e,o){let l;if(e.isLeafNode()||e.isEmpty())l=Qe.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let d;l=Qe.EMPTY_NODE.withIndex(this.index_),d=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;d.hasNext()&&h<this.limit_;){const m=d.getNext();let D;if(D=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!D)break;l=l.updateImmediateChild(m.name,m.node),h++}}else{let d,h,m,D;if(l=e.withIndex(this.index_),l=l.updatePriority(Qe.EMPTY_NODE),this.reverse_){D=l.getReverseIterator(this.index_),d=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();m=($,J)=>A(J,$)}else D=l.getIterator(this.index_),d=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let b=0,O=!1;for(;D.hasNext();){const A=D.getNext();!O&&m(d,A)<=0&&(O=!0),O&&b<this.limit_&&m(A,h)<=0?b++:l=l.updateImmediateChild(A.name,Qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(r,l,o)}updatePriority(r,e){return r}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(r,e,o,l,d){let h;if(this.reverse_){const A=this.index_.getCompare();h=($,J)=>A(J,$)}else h=this.index_.getCompare();const m=r;(0,H.hu)(m.numChildren()===this.limit_,"");const D=new Xe(e,o),b=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),O=this.rangedFilter_.matches(D);if(m.hasChild(e)){const A=m.getImmediateChild(e);let $=l.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=$&&($.name===e||m.hasChild($.name));)$=l.getChildAfterChild(this.index_,$,this.reverse_);const J=null==$?1:h($,D);if(O&&!o.isEmpty()&&J>=0)return null!=d&&d.trackChildChange(va(e,o,A)),m.updateImmediateChild(e,o);{null!=d&&d.trackChildChange(ya(e,A));const Ye=m.updateImmediateChild(e,Qe.EMPTY_NODE);return null!=$&&this.rangedFilter_.matches($)?(null!=d&&d.trackChildChange(Co($.name,$.node)),Ye.updateImmediateChild($.name,$.node)):Ye}}return o.isEmpty()?r:O&&h(b,D)>=0?(null!=d&&(d.trackChildChange(ya(b.name,b.node)),d.trackChildChange(Co(e,o))),m.updateImmediateChild(e,o).updateImmediateChild(b.name,Qe.EMPTY_NODE)):r}}class Mf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$e}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===At}copy(){const r=new Mf;return r.limitSet_=this.limitSet_,r.limit_=this.limit_,r.startSet_=this.startSet_,r.indexStartValue_=this.indexStartValue_,r.startNameSet_=this.startNameSet_,r.indexStartName_=this.indexStartName_,r.endSet_=this.endSet_,r.indexEndValue_=this.indexEndValue_,r.endNameSet_=this.endNameSet_,r.indexEndName_=this.indexEndName_,r.index_=this.index_,r.viewFrom_=this.viewFrom_,r}}function Ng(i){const r={};if(i.isDefault())return r;let e;return i.index_===At?e="$priority":i.index_===Sf?e="$value":i.index_===Dr?e="$key":((0,H.hu)(i.index_ instanceof Ms,"Unrecognized index type!"),e=i.index_.toString()),r.orderBy=(0,H.Pz)(e),i.startSet_&&(r.startAt=(0,H.Pz)(i.indexStartValue_),i.startNameSet_&&(r.startAt+=","+(0,H.Pz)(i.indexStartName_))),i.endSet_&&(r.endAt=(0,H.Pz)(i.indexEndValue_),i.endNameSet_&&(r.endAt+=","+(0,H.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?r.limitToFirst=i.limit_:r.limitToLast=i.limit_),r}function Rf(i){const r={};if(i.startSet_&&(r.sp=i.indexStartValue_,i.startNameSet_&&(r.sn=i.indexStartName_)),i.endSet_&&(r.ep=i.indexEndValue_,i.endNameSet_&&(r.en=i.indexEndName_)),i.limitSet_){r.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),r.vf=e}return i.index_!==At&&(r.i=i.index_.toString()),r}class Vl extends mg{constructor(r,e,o,l){super(),this.repoInfo_=r,this.onDataUpdate_=e,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Rl("p:rest:"),this.listens_={}}reportStats(r){throw new Error("Method not implemented.")}static getListenId_(r,e){return void 0!==e?"tag$"+e:((0,H.hu)(r._queryParams.isDefault(),"should have a tag if it's not a default query."),r._path.toString())}listen(r,e,o,l){const d=r._path.toString();this.log_("Listen called for "+d+" "+r._queryIdentifier);const h=Vl.getListenId_(r,o),m={};this.listens_[h]=m;const D=Ng(r._queryParams);this.restRequest_(d+".json",D,(b,O)=>{let A=O;if(404===b&&(A=null,b=null),null===b&&this.onDataUpdate_(d,A,!1,o),(0,H.DV)(this.listens_,h)===m){let $;$=b?401===b?"permission_denied":"rest_error:"+b:"ok",l($,null)}})}unlisten(r,e){const o=Vl.getListenId_(r,e);delete this.listens_[o]}get(r){const e=Ng(r._queryParams),o=r._path.toString(),l=new H.BH;return this.restRequest_(o+".json",e,(d,h)=>{let m=h;404===d&&(m=null,d=null),null===d?(this.onDataUpdate_(o,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(r){}restRequest_(r,e={},o){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,d])=>{l&&l.accessToken&&(e.auth=l.accessToken),d&&d.token&&(e.ac=d.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+r+"?ns="+this.repoInfo_.namespace+(0,H.xO)(e);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(o&&4===m.readyState){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let D=null;if(m.status>=200&&m.status<300){try{D=(0,H.cI)(m.responseText)}catch(b){En("Failed to parse JSON response for "+h+": "+m.responseText)}o(null,D)}else 401!==m.status&&404!==m.status&&En("Got unsuccessful REST response for "+h+" Status: "+m.status),o(m.status);o=null}},m.open("GET",h,!0),m.send()})}}class AC{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(r){return this.rootNode_.getChild(r)}updateSnapshot(r,e){this.rootNode_=this.rootNode_.updateChild(r,e)}}function Zn(){return{value:null,children:new Map}}function Hl(i,r,e){if(rt(r))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(r,e);else{const o=at(r);i.children.has(o)||i.children.set(o,Zn()),Hl(i.children.get(o),r=vt(r),e)}}function Ec(i,r,e){null!==i.value?e(r,i.value):function Fg(i,r){i.children.forEach((e,o)=>{r(o,e)})}(i,(o,l)=>{Ec(l,new yt(r.toString()+"/"+o),e)})}class kg{constructor(r){this.collection_=r,this.last_=null}get(){const r=this.collection_.get(),e=Object.assign({},r);return this.last_&&fn(this.last_,(o,l)=>{e[o]=e[o]-l}),this.last_=r,e}}class jg{constructor(r,e){this.server_=e,this.statsToReport_={},this.statsListener_=new kg(r);const o=1e4+2e4*Math.random();po(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const r=this.statsListener_.get(),e={};let o=!1;fn(r,(l,d)=>{d>0&&(0,H.r3)(this.statsToReport_,l)&&(e[l]=d,o=!0)}),o&&this.server_.reportStats(e),po(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wr=(()=>{return(i=wr||(wr={}))[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",wr;var i})();function Nf(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class wc{constructor(r,e,o){this.path=r,this.affectedTree=e,this.revert=o,this.type=wr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(r){if(rt(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new yt(r));return new wc(dt(),e,this.revert)}}return(0,H.hu)(at(this.path)===r,"operationForChild called for unrelated child."),new wc(vt(this.path),this.affectedTree,this.revert)}}class Wl{constructor(r,e){this.source=r,this.path=e,this.type=wr.LISTEN_COMPLETE}operationForChild(r){return rt(this.path)?new Wl(this.source,dt()):new Wl(this.source,vt(this.path))}}class Do{constructor(r,e,o){this.source=r,this.path=e,this.snap=o,this.type=wr.OVERWRITE}operationForChild(r){return rt(this.path)?new Do(this.source,dt(),this.snap.getImmediateChild(r)):new Do(this.source,vt(this.path),this.snap)}}class Da{constructor(r,e,o){this.source=r,this.path=e,this.children=o,this.type=wr.MERGE}operationForChild(r){if(rt(this.path)){const e=this.children.subtree(new yt(r));return e.isEmpty()?null:e.value?new Do(this.source,dt(),e.value):new Da(this.source,dt(),e)}return(0,H.hu)(at(this.path)===r,"Can't get a merge for a child not on the path of the operation"),new Da(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vr{constructor(r,e,o){this.node_=r,this.fullyInitialized_=e,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(r){if(rt(r))return this.isFullyInitialized()&&!this.filtered_;const e=at(r);return this.isCompleteForChild(e)}isCompleteForChild(r){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(r)}getNode(){return this.node_}}class Ea{constructor(r){this.query_=r,this.index_=this.query_._queryParams.getIndex()}}function Hi(i,r,e,o,l,d){const h=o.filter(m=>m.type===e);h.sort((m,D)=>function ay(i,r,e){if(null==r.childName||null==e.childName)throw(0,H.g5)("Should only compare child_ events.");const o=new Xe(r.childName,r.snapshotNode),l=new Xe(e.childName,e.snapshotNode);return i.index_.compare(o,l)}(i,m,D)),h.forEach(m=>{const D=function oy(i,r,e){return"value"===r.type||"child_removed"===r.type||(r.prevName=e.getPredecessorChildName(r.childName,r.snapshotNode,i.index_)),r}(i,m,d);l.forEach(b=>{b.respondsTo(m.type)&&r.push(b.createEvent(D,i.query_))})})}function wa(i,r){return{eventCache:i,serverCache:r}}function Qn(i,r,e,o){return wa(new Vr(r,e,o),i.serverCache)}function ba(i,r,e,o){return wa(i.eventCache,new Vr(r,e,o))}function rn(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function fr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Ia;class wt{constructor(r,e=(()=>(Ia||(Ia=new Rn(qp)),Ia))()){this.value=r,this.children=e}static fromObject(r){let e=new wt(null);return fn(r,(o,l)=>{e=e.set(new yt(o),l)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(r,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(rt(r))return null;{const o=at(r),l=this.children.get(o);if(null!==l){const d=l.findRootMostMatchingPathAndValue(vt(r),e);return null!=d?{path:Ot(new yt(o),d.path),value:d.value}:null}return null}}findRootMostValueAndPath(r){return this.findRootMostMatchingPathAndValue(r,()=>!0)}subtree(r){if(rt(r))return this;{const e=at(r),o=this.children.get(e);return null!==o?o.subtree(vt(r)):new wt(null)}}set(r,e){if(rt(r))return new wt(e,this.children);{const o=at(r),d=(this.children.get(o)||new wt(null)).set(vt(r),e),h=this.children.insert(o,d);return new wt(this.value,h)}}remove(r){if(rt(r))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const e=at(r),o=this.children.get(e);if(o){const l=o.remove(vt(r));let d;return d=l.isEmpty()?this.children.remove(e):this.children.insert(e,l),null===this.value&&d.isEmpty()?new wt(null):new wt(this.value,d)}return this}}get(r){if(rt(r))return this.value;{const e=at(r),o=this.children.get(e);return o?o.get(vt(r)):null}}setTree(r,e){if(rt(r))return e;{const o=at(r),d=(this.children.get(o)||new wt(null)).setTree(vt(r),e);let h;return h=d.isEmpty()?this.children.remove(o):this.children.insert(o,d),new wt(this.value,h)}}fold(r){return this.fold_(dt(),r)}fold_(r,e){const o={};return this.children.inorderTraversal((l,d)=>{o[l]=d.fold_(Ot(r,l),e)}),e(r,this.value,o)}findOnPath(r,e){return this.findOnPath_(r,dt(),e)}findOnPath_(r,e,o){const l=!!this.value&&o(e,this.value);if(l)return l;if(rt(r))return null;{const d=at(r),h=this.children.get(d);return h?h.findOnPath_(vt(r),Ot(e,d),o):null}}foreachOnPath(r,e){return this.foreachOnPath_(r,dt(),e)}foreachOnPath_(r,e,o){if(rt(r))return this;{this.value&&o(e,this.value);const l=at(r),d=this.children.get(l);return d?d.foreachOnPath_(vt(r),Ot(e,l),o):new wt(null)}}foreach(r){this.foreach_(dt(),r)}foreach_(r,e){this.children.inorderTraversal((o,l)=>{l.foreach_(Ot(r,o),e)}),this.value&&e(r,this.value)}foreachChild(r){this.children.inorderTraversal((e,o)=>{o.value&&r(e,o.value)})}}class Pn{constructor(r){this.writeTree_=r}static empty(){return new Pn(new wt(null))}}function yi(i,r,e){if(rt(r))return new Pn(new wt(e));{const o=i.writeTree_.findRootMostValueAndPath(r);if(null!=o){const l=o.path;let d=o.value;const h=xn(l,r);return d=d.updateChild(h,e),new Pn(i.writeTree_.set(l,d))}{const l=new wt(e),d=i.writeTree_.setTree(r,l);return new Pn(d)}}}function Rs(i,r,e){let o=i;return fn(e,(l,d)=>{o=yi(o,Ot(r,l),d)}),o}function Eo(i,r){if(rt(r))return Pn.empty();{const e=i.writeTree_.setTree(r,new wt(null));return new Pn(e)}}function Ps(i,r){return null!=Ir(i,r)}function Ir(i,r){const e=i.writeTree_.findRootMostValueAndPath(r);return null!=e?i.writeTree_.get(e.path).getChild(xn(e.path,r)):null}function wo(i){const r=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,(o,l)=>{r.push(new Xe(o,l))}):i.writeTree_.children.inorderTraversal((o,l)=>{null!=l.value&&r.push(new Xe(o,l.value))}),r}function hr(i,r){if(rt(r))return i;{const e=Ir(i,r);return new Pn(null!=e?new wt(e):i.writeTree_.subtree(r))}}function Ns(i){return i.writeTree_.isEmpty()}function bo(i,r){return Of(dt(),i.writeTree_,r)}function Of(i,r,e){if(null!=r.value)return e.updateChild(i,r.value);{let o=null;return r.children.inorderTraversal((l,d)=>{".priority"===l?((0,H.hu)(null!==d.value,"Priority writes must always be leaf nodes"),o=d.value):e=Of(Ot(i,l),d,e)}),!e.getChild(i).isEmpty()&&null!==o&&(e=e.updateChild(Ot(i,".priority"),o)),e}}function Gl(i,r){return Qg(r,i)}function Wg(i,r){if(i.snap)return dr(i.path,r);for(const e in i.children)if(i.children.hasOwnProperty(e)&&dr(Ot(i.path,e),r))return!0;return!1}function ly(i){return i.visible}function Ff(i,r,e){let o=Pn.empty();for(let l=0;l<i.length;++l){const d=i[l];if(r(d)){const h=d.path;let m;if(d.snap)dr(e,h)?(m=xn(e,h),o=yi(o,m,d.snap)):dr(h,e)&&(m=xn(h,e),o=yi(o,dt(),d.snap.getChild(m)));else{if(!d.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(dr(e,h))m=xn(e,h),o=Rs(o,m,d.children);else if(dr(h,e))if(m=xn(h,e),rt(m))o=Rs(o,dt(),d.children);else{const D=(0,H.DV)(d.children,at(m));if(D){const b=D.getChild(vt(m));o=yi(o,dt(),b)}}}}}return o}function zg(i,r,e,o,l){if(o||l){const d=hr(i.visibleWrites,r);return!l&&Ns(d)?e:l||null!=e||Ps(d,dt())?bo(Ff(i.allWrites,function(b){return(b.visible||l)&&(!o||!~o.indexOf(b.writeId))&&(dr(b.path,r)||dr(r,b.path))},r),e||Qe.EMPTY_NODE):null}{const d=Ir(i.visibleWrites,r);if(null!=d)return d;{const h=hr(i.visibleWrites,r);return Ns(h)?e:null!=e||Ps(h,dt())?bo(h,e||Qe.EMPTY_NODE):null}}}function zl(i,r,e,o){return zg(i.writeTree,i.treePath,r,e,o)}function kf(i,r){return function Yg(i,r,e){let o=Qe.EMPTY_NODE;const l=Ir(i.visibleWrites,r);if(l)return l.isLeafNode()||l.forEachChild(At,(d,h)=>{o=o.updateImmediateChild(d,h)}),o;if(e){const d=hr(i.visibleWrites,r);return e.forEachChild(At,(h,m)=>{const D=bo(hr(d,new yt(h)),m);o=o.updateImmediateChild(h,D)}),wo(d).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}return wo(hr(i.visibleWrites,r)).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}(i.writeTree,i.treePath,r)}function Zg(i,r,e,o){return function qg(i,r,e,o,l){(0,H.hu)(o||l,"Either existingEventSnap or existingServerSnap must exist");const d=Ot(r,e);if(Ps(i.visibleWrites,d))return null;{const h=hr(i.visibleWrites,d);return Ns(h)?l.getChild(e):bo(h,l.getChild(e))}}(i.writeTree,i.treePath,r,e,o)}function Lf(i,r){return function cy(i,r){return Ir(i.visibleWrites,r)}(i.writeTree,Ot(i.treePath,r))}function Yl(i,r,e){return function uy(i,r,e,o){const l=Ot(r,e),d=Ir(i.visibleWrites,l);return null!=d?d:o.isCompleteForChild(e)?bo(hr(i.visibleWrites,l),o.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,r,e)}function bc(i,r){return Qg(Ot(i.treePath,r),i.writeTree)}function Qg(i,r){return{treePath:i,writeTree:r}}class xC{constructor(){this.changeMap=new Map}trackChildChange(r){const e=r.type,o=r.childName;(0,H.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const d=l.type;if("child_added"===e&&"child_removed"===d)this.changeMap.set(o,va(o,r.snapshotNode,l.snapshotNode));else if("child_removed"===e&&"child_added"===d)this.changeMap.delete(o);else if("child_removed"===e&&"child_changed"===d)this.changeMap.set(o,ya(o,l.oldSnap));else if("child_changed"===e&&"child_added"===d)this.changeMap.set(o,Co(o,r.snapshotNode));else{if("child_changed"!==e||"child_changed"!==d)throw(0,H.g5)("Illegal combination of changes: "+r+" occurred after "+l);this.changeMap.set(o,va(o,r.snapshotNode,l.oldSnap))}}else this.changeMap.set(o,r)}getChanges(){return Array.from(this.changeMap.values())}}const hy=new class RC{getCompleteChild(r){return null}getChildAfterChild(r,e,o){return null}};class Bf{constructor(r,e,o=null){this.writes_=r,this.viewCache_=e,this.optCompleteServerCache_=o}getCompleteChild(r){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(r))return e.getNode().getImmediateChild(r);{const o=null!=this.optCompleteServerCache_?new Vr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yl(this.writes_,r,o)}}getChildAfterChild(r,e,o){const l=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fr(this.viewCache_),d=function fy(i,r,e,o,l,d){return function Kg(i,r,e,o,l,d,h){let m;const D=hr(i.visibleWrites,r),b=Ir(D,dt());if(null!=b)m=b;else{if(null==e)return[];m=bo(D,e)}if(m=m.withIndex(h),m.isEmpty()||m.isLeafNode())return[];{const O=[],A=h.getCompare(),$=d?m.getReverseIteratorFrom(o,h):m.getIteratorFrom(o,h);let J=$.getNext();for(;J&&O.length<l;)0!==A(J,o)&&O.push(J),J=$.getNext();return O}}(i.writeTree,i.treePath,r,e,o,l,d)}(this.writes_,l,e,1,o,r);return 0===d.length?null:d[0]}}function Xg(i,r,e,o,l,d){const h=r.eventCache;if(null!=Lf(o,e))return r;{let m,D;if(rt(e))if((0,H.hu)(r.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),r.serverCache.isFiltered()){const b=fr(r),A=kf(o,b instanceof Qe?b:Qe.EMPTY_NODE);m=i.filter.updateFullNode(r.eventCache.getNode(),A,d)}else{const b=zl(o,fr(r));m=i.filter.updateFullNode(r.eventCache.getNode(),b,d)}else{const b=at(e);if(".priority"===b){(0,H.hu)(1===As(e),"Can't have a priority with additional path components");const O=h.getNode();D=r.serverCache.getNode();const A=Zg(o,e,O,D);m=null!=A?i.filter.updatePriority(O,A):h.getNode()}else{const O=vt(e);let A;if(h.isCompleteForChild(b)){D=r.serverCache.getNode();const $=Zg(o,e,h.getNode(),D);A=null!=$?h.getNode().getImmediateChild(b).updateChild(O,$):h.getNode().getImmediateChild(b)}else A=Yl(o,b,r.serverCache);m=null!=A?i.filter.updateChild(h.getNode(),b,A,O,l,d):h.getNode()}}return Qn(r,m,h.isFullyInitialized()||rt(e),i.filter.filtersNodes())}}function ql(i,r,e,o,l,d,h,m){const D=r.serverCache;let b;const O=h?i.filter:i.filter.getIndexedFilter();if(rt(e))b=O.updateFullNode(D.getNode(),o,null);else if(O.filtersNodes()&&!D.isFiltered()){const J=D.getNode().updateChild(e,o);b=O.updateFullNode(D.getNode(),J,null)}else{const J=at(e);if(!D.isCompleteForPath(e)&&As(e)>1)return r;const ye=vt(e),_t=D.getNode().getImmediateChild(J).updateChild(ye,o);b=".priority"===J?O.updatePriority(D.getNode(),_t):O.updateChild(D.getNode(),J,_t,ye,hy,null)}const A=ba(r,b,D.isFullyInitialized()||rt(e),O.filtersNodes());return Xg(i,A,e,l,new Bf(l,A,d),m)}function jf(i,r,e,o,l,d,h){const m=r.eventCache;let D,b;const O=new Bf(l,r,d);if(rt(e))b=i.filter.updateFullNode(r.eventCache.getNode(),o,h),D=Qn(r,b,!0,i.filter.filtersNodes());else{const A=at(e);if(".priority"===A)b=i.filter.updatePriority(r.eventCache.getNode(),o),D=Qn(r,b,m.isFullyInitialized(),m.isFiltered());else{const $=vt(e),J=m.getNode().getImmediateChild(A);let ye;if(rt($))ye=o;else{const Ye=O.getCompleteChild(A);ye=null!=Ye?".priority"===pc($)&&Ye.getChild(yg($)).isEmpty()?Ye:Ye.updateChild($,o):Qe.EMPTY_NODE}D=J.equals(ye)?r:Qn(r,i.filter.updateChild(m.getNode(),A,ye,$,O,h),m.isFullyInitialized(),i.filter.filtersNodes())}}return D}function Uf(i,r){return i.eventCache.isCompleteForChild(r)}function em(i,r,e){return e.foreach((o,l)=>{r=r.updateChild(o,l)}),r}function Tc(i,r,e,o,l,d,h,m){if(r.serverCache.getNode().isEmpty()&&!r.serverCache.isFullyInitialized())return r;let b,D=r;b=rt(e)?o:new wt(null).setTree(e,o);const O=r.serverCache.getNode();return b.children.inorderTraversal((A,$)=>{if(O.hasChild(A)){const ye=em(0,r.serverCache.getNode().getImmediateChild(A),$);D=ql(i,D,new yt(A),ye,l,d,h,m)}}),b.children.inorderTraversal((A,$)=>{const J=!r.serverCache.isCompleteForChild(A)&&null===$.value;if(!O.hasChild(A)&&!J){const Ye=em(0,r.serverCache.getNode().getImmediateChild(A),$);D=ql(i,D,new yt(A),Ye,l,d,h,m)}}),D}class yy{constructor(r,e){this.query_=r,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new Af(o.getIndex()),d=function xg(i){return i.loadsAllData()?new Af(i.getIndex()):i.hasLimit()?new ry(i):new Ul(i)}(o);this.processor_=function Jg(i){return{filter:i}}(d);const h=e.serverCache,m=e.eventCache,D=l.updateFullNode(Qe.EMPTY_NODE,h.getNode(),null),b=d.updateFullNode(Qe.EMPTY_NODE,m.getNode(),null),O=new Vr(D,h.isFullyInitialized(),l.filtersNodes()),A=new Vr(b,m.isFullyInitialized(),d.filtersNodes());this.viewCache_=wa(A,O),this.eventGenerator_=new Ea(this.query_)}get query(){return this.query_}}function Cy(i,r){const e=fr(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!rt(r)&&!e.getImmediateChild(at(r)).isEmpty())?e.getChild(r):null}function Vf(i){return 0===i.eventRegistrations_.length}function Sc(i,r,e){const o=[];if(e){(0,H.hu)(null==r,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(d=>{const h=d.createCancelEvent(e,l);h&&o.push(h)})}if(r){let l=[];for(let d=0;d<i.eventRegistrations_.length;++d){const h=i.eventRegistrations_[d];if(h.matches(r)){if(r.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(d+1));break}}else l.push(h)}i.eventRegistrations_=l}else i.eventRegistrations_=[];return o}function Dy(i,r,e,o){r.type===wr.MERGE&&null!==r.source.queryId&&((0,H.hu)(fr(i.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(rn(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,d=function py(i,r,e,o,l){const d=new xC;let h,m;if(e.type===wr.OVERWRITE){const b=e;b.source.fromUser?h=jf(i,r,b.path,b.snap,o,l,d):((0,H.hu)(b.source.fromServer,"Unknown source."),m=b.source.tagged||r.serverCache.isFiltered()&&!rt(b.path),h=ql(i,r,b.path,b.snap,o,l,m,d))}else if(e.type===wr.MERGE){const b=e;b.source.fromUser?h=function Ic(i,r,e,o,l,d,h){let m=r;return o.foreach((D,b)=>{const O=Ot(e,D);Uf(r,at(O))&&(m=jf(i,m,O,b,l,d,h))}),o.foreach((D,b)=>{const O=Ot(e,D);Uf(r,at(O))||(m=jf(i,m,O,b,l,d,h))}),m}(i,r,b.path,b.children,o,l,d):((0,H.hu)(b.source.fromServer,"Unknown source."),m=b.source.tagged||r.serverCache.isFiltered(),h=Tc(i,r,b.path,b.children,o,l,m,d))}else if(e.type===wr.ACK_USER_WRITE){const b=e;h=b.revert?function _y(i,r,e,o,l,d){let h;if(null!=Lf(o,e))return r;{const m=new Bf(o,r,l),D=r.eventCache.getNode();let b;if(rt(e)||".priority"===at(e)){let O;if(r.serverCache.isFullyInitialized())O=zl(o,fr(r));else{const A=r.serverCache.getNode();(0,H.hu)(A instanceof Qe,"serverChildren would be complete if leaf node"),O=kf(o,A)}O=O,b=i.filter.updateFullNode(D,O,d)}else{const O=at(e);let A=Yl(o,O,r.serverCache);null==A&&r.serverCache.isCompleteForChild(O)&&(A=D.getImmediateChild(O)),b=null!=A?i.filter.updateChild(D,O,A,vt(e),m,d):r.eventCache.getNode().hasChild(O)?i.filter.updateChild(D,O,Qe.EMPTY_NODE,vt(e),m,d):D,b.isEmpty()&&r.serverCache.isFullyInitialized()&&(h=zl(o,fr(r)),h.isLeafNode()&&(b=i.filter.updateFullNode(b,h,d)))}return h=r.serverCache.isFullyInitialized()||null!=Lf(o,dt()),Qn(r,b,h,i.filter.filtersNodes())}}(i,r,b.path,o,l,d):function gy(i,r,e,o,l,d,h){if(null!=Lf(l,e))return r;const m=r.serverCache.isFiltered(),D=r.serverCache;if(null!=o.value){if(rt(e)&&D.isFullyInitialized()||D.isCompleteForPath(e))return ql(i,r,e,D.getNode().getChild(e),l,d,m,h);if(rt(e)){let b=new wt(null);return D.getNode().forEachChild(Dr,(O,A)=>{b=b.set(new yt(O),A)}),Tc(i,r,e,b,l,d,m,h)}return r}{let b=new wt(null);return o.foreach((O,A)=>{const $=Ot(e,O);D.isCompleteForPath($)&&(b=b.set(O,D.getNode().getChild($)))}),Tc(i,r,e,b,l,d,m,h)}}(i,r,b.path,b.affectedTree,o,l,d)}else{if(e.type!==wr.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+e.type);h=function my(i,r,e,o,l){const d=r.serverCache;return Xg(i,ba(r,d.getNode(),d.isFullyInitialized()||rt(e),d.isFiltered()),e,o,hy,l)}(i,r,e.path,o,d)}const D=d.getChanges();return function Ta(i,r,e){const o=r.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=rn(i);(e.length>0||!i.eventCache.isFullyInitialized()||l&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&e.push(Dc(rn(r)))}}(r,h,D),{viewCache:h,changes:D}}(i.processor_,l,r,e,o);return function PC(i,r){(0,H.hu)(r.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(r.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,d.viewCache),(0,H.hu)(d.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=d.viewCache,rm(i,d.changes,d.viewCache.eventCache.getNode(),null)}function rm(i,r,e,o){return function sy(i,r,e,o){const l=[],d=[];return r.forEach(h=>{"child_changed"===h.type&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&d.push(function Mg(i,r){return{type:"child_moved",snapshotNode:r,childName:i}}(h.childName,h.snapshotNode))}),Hi(i,l,"child_removed",r,o,e),Hi(i,l,"child_added",r,o,e),Hi(i,l,"child_moved",d,o,e),Hi(i,l,"child_changed",r,o,e),Hi(i,l,"value",r,o,e),l}(i.eventGenerator_,r,e,o?[o]:i.eventRegistrations_)}let $f,Aa;class Sa{constructor(){this.views=new Map}}function zf(i,r,e,o){const l=r.source.queryId;if(null!==l){const d=i.views.get(l);return(0,H.hu)(null!=d,"SyncTree gave us an op for an invalid query."),Dy(d,r,e,o)}{let d=[];for(const h of i.views.values())d=d.concat(Dy(h,r,e,o));return d}}function Ac(i,r,e,o,l,d){const h=function Kl(i,r,e,o,l){const h=i.views.get(r._queryIdentifier);if(!h){let m=zl(e,l?o:null),D=!1;m?D=!0:o instanceof Qe?(m=kf(e,o),D=!1):(m=Qe.EMPTY_NODE,D=!1);const b=wa(new Vr(m,D,!1),new Vr(o,l,!1));return new yy(r,b)}return h}(i,r,o,l,d);return i.views.has(r._queryIdentifier)||i.views.set(r._queryIdentifier,h),function nm(i,r){i.eventRegistrations_.push(r)}(h,e),function Hf(i,r){const e=i.viewCache_.eventCache,o=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,(d,h)=>{o.push(Co(d,h))}),e.isFullyInitialized()&&o.push(Dc(e.getNode())),rm(i,o,e.getNode(),r)}(h,e)}function Ey(i){const r=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||r.push(e);return r}function Os(i,r){let e=null;for(const o of i.views.values())e=e||Cy(o,r);return e}function Mc(i,r){return r._queryParams.loadsAllData()?Zl(i):i.views.get(r._queryIdentifier)}function xc(i,r){return null!=Mc(i,r)}function $i(i){return null!=Zl(i)}function Zl(i){for(const r of i.views.values())if(r.query._queryParams.loadsAllData())return r;return null}let qf=1;class Kf{constructor(r){this.listenProvider_=r,this.syncPointTree_=new wt(null),this.pendingWriteTree_=function dy(){return{visibleWrites:Pn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zf(i,r,e,o,l){return function Ug(i,r,e,o,l){(0,H.hu)(o>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===l&&(l=!0),i.allWrites.push({path:r,snap:e,writeId:o,visible:l}),l&&(i.visibleWrites=yi(i.visibleWrites,r,e)),i.lastWriteId=o}(i.pendingWriteTree_,r,e,o,l),l?To(i,new Do({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},r,e)):[]}function Wi(i,r,e=!1){const o=function Hg(i,r){for(let e=0;e<i.allWrites.length;e++){const o=i.allWrites[e];if(o.writeId===r)return o}return null}(i.pendingWriteTree_,r);if(function $g(i,r){const e=i.allWrites.findIndex(m=>m.writeId===r);(0,H.hu)(e>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[e];i.allWrites.splice(e,1);let l=o.visible,d=!1,h=i.allWrites.length-1;for(;l&&h>=0;){const m=i.allWrites[h];m.visible&&(h>=e&&Wg(m,o.path)?l=!1:dr(o.path,m.path)&&(d=!0)),h--}return!!l&&(d?(function Gg(i){i.visibleWrites=Ff(i.allWrites,ly,dt()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(o.snap?i.visibleWrites=Eo(i.visibleWrites,o.path):fn(o.children,D=>{i.visibleWrites=Eo(i.visibleWrites,Ot(o.path,D))}),!0))}(i.pendingWriteTree_,r)){let d=new wt(null);return null!=o.snap?d=d.set(dt(),!0):fn(o.children,h=>{d=d.set(new yt(h),!0)}),To(i,new wc(o.path,d,e))}return[]}function Io(i,r,e){return To(i,new Do({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,e))}function Rc(i,r,e,o,l=!1){const d=r._path,h=i.syncPointTree_.get(d);let m=[];if(h&&("default"===r._queryIdentifier||xc(h,r))){const D=function Yf(i,r,e,o){const l=r._queryIdentifier,d=[];let h=[];const m=$i(i);if("default"===l)for(const[D,b]of i.views.entries())h=h.concat(Sc(b,e,o)),Vf(b)&&(i.views.delete(D),b.query._queryParams.loadsAllData()||d.push(b.query));else{const D=i.views.get(l);D&&(h=h.concat(Sc(D,e,o)),Vf(D)&&(i.views.delete(l),D.query._queryParams.loadsAllData()||d.push(D.query)))}return m&&!$i(i)&&d.push(new(function Wf(){return(0,H.hu)($f,"Reference.ts has not been loaded"),$f}())(r._repo,r._path)),{removed:d,events:h}}(h,r,e,o);(function Gf(i){return 0===i.views.size})(h)&&(i.syncPointTree_=i.syncPointTree_.remove(d));const b=D.removed;if(m=D.events,!l){const O=-1!==b.findIndex($=>$._queryParams.loadsAllData()),A=i.syncPointTree_.findOnPath(d,($,J)=>$i(J));if(O&&!A){const $=i.syncPointTree_.subtree(d);if(!$.isEmpty()){const J=function Ty(i){return i.fold((r,e,o)=>{if(e&&$i(e))return[Zl(e)];{let l=[];return e&&(l=Ey(e)),fn(o,(d,h)=>{l=l.concat(h)}),l}})}($);for(let ye=0;ye<J.length;++ye){const Ye=J[ye],_t=Ye.query,Xn=th(i,Ye);i.listenProvider_.startListening($t(_t),Ma(i,_t),Xn.hashFn,Xn.onComplete)}}}!A&&b.length>0&&!o&&(O?i.listenProvider_.stopListening($t(r),null):b.forEach($=>{const J=i.queryToTagMap.get(nh($));i.listenProvider_.stopListening($t($),J)}))}!function um(i,r){for(let e=0;e<r.length;++e){const o=r[e];if(!o._queryParams.loadsAllData()){const l=nh(o),d=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(d)}}}(i,b)}return m}function Pc(i,r,e,o=!1){const l=r._path;let d=null,h=!1;i.syncPointTree_.foreachOnPath(l,($,J)=>{const ye=xn($,l);d=d||Os(J,ye),h=h||$i(J)});let D,m=i.syncPointTree_.get(l);m?(h=h||$i(m),d=d||Os(m,dt())):(m=new Sa,i.syncPointTree_=i.syncPointTree_.set(l,m)),null!=d?D=!0:(D=!1,d=Qe.EMPTY_NODE,i.syncPointTree_.subtree(l).foreachChild((J,ye)=>{const Ye=Os(ye,dt());Ye&&(d=d.updateImmediateChild(J,Ye))}));const b=xc(m,r);if(!b&&!r._queryParams.loadsAllData()){const $=nh(r);(0,H.hu)(!i.queryToTagMap.has($),"View does not exist, but we have a tag");const J=function Sy(){return qf++}();i.queryToTagMap.set($,J),i.tagToQueryMap.set(J,$)}let A=Ac(m,r,e,Gl(i.pendingWriteTree_,l),d,D);if(!b&&!h&&!o){const $=Mc(m,r);A=A.concat(function Ay(i,r,e){const o=r._path,l=Ma(i,r),d=th(i,e),h=i.listenProvider_.startListening($t(r),l,d.hashFn,d.onComplete),m=i.syncPointTree_.subtree(o);if(l)(0,H.hu)(!$i(m.value),"If we're adding a query, it shouldn't be shadowed");else{const D=m.fold((b,O,A)=>{if(!rt(b)&&O&&$i(O))return[Zl(O).query];{let $=[];return O&&($=$.concat(Ey(O).map(J=>J.query))),fn(A,(J,ye)=>{$=$.concat(ye)}),$}});for(let b=0;b<D.length;++b){const O=D[b];i.listenProvider_.stopListening($t(O),Ma(i,O))}}return h}(i,r,$))}return A}function Ql(i,r,e){const l=i.pendingWriteTree_,d=i.syncPointTree_.findOnPath(r,(h,m)=>{const b=Os(m,xn(h,r));if(b)return b});return zg(l,r,d,e,!0)}function To(i,r){return Xf(r,i.syncPointTree_,null,Gl(i.pendingWriteTree_,dt()))}function Xf(i,r,e,o){if(rt(i.path))return eh(i,r,e,o);{const l=r.get(dt());null==e&&null!=l&&(e=Os(l,dt()));let d=[];const h=at(i.path),m=i.operationForChild(h),D=r.children.get(h);if(D&&m){const b=e?e.getImmediateChild(h):null,O=bc(o,h);d=d.concat(Xf(m,D,b,O))}return l&&(d=d.concat(zf(l,i,o,e))),d}}function eh(i,r,e,o){const l=r.get(dt());null==e&&null!=l&&(e=Os(l,dt()));let d=[];return r.children.inorderTraversal((h,m)=>{const D=e?e.getImmediateChild(h):null,b=bc(o,h),O=i.operationForChild(h);O&&(d=d.concat(eh(O,m,D,b)))}),l&&(d=d.concat(zf(l,i,o,e))),d}function th(i,r){const e=r.query,o=Ma(i,e);return{hashFn:()=>(function vy(i){return i.viewCache_.serverCache.getNode()}(r)||Qe.EMPTY_NODE).hash(),onComplete:l=>{if("ok"===l)return o?function Iy(i,r,e){const o=rh(i,e);if(o){const l=ih(o),d=l.path,h=l.queryId,m=xn(d,r);return Nc(i,d,new Wl(Nf(h),m))}return[]}(i,e._path,o):function by(i,r){return To(i,new Wl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r))}(i,e._path);{const d=function Kp(i,r){let e="Unknown Error";"too_big"===i?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?e="Client doesn't have permission to access the desired data.":"unavailable"===i&&(e="The service is unavailable");const o=new Error(i+" at "+r._path.toString()+": "+e);return o.code=i.toUpperCase(),o}(l,e);return Rc(i,e,null,d)}}}}function Ma(i,r){const e=nh(r);return i.queryToTagMap.get(e)}function nh(i){return i._path.toString()+"$"+i._queryIdentifier}function rh(i,r){return i.tagToQueryMap.get(r)}function ih(i){const r=i.indexOf("$");return(0,H.hu)(-1!==r&&r<i.length-1,"Bad queryKey."),{queryId:i.substr(r+1),path:new yt(i.substr(0,r))}}function Nc(i,r,e){const o=i.syncPointTree_.get(r);return(0,H.hu)(o,"Missing sync point for query tag that we're tracking"),zf(o,e,Gl(i.pendingWriteTree_,r),null)}function $t(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function om(){return(0,H.hu)(Aa,"Reference.ts has not been loaded"),Aa}())(i._repo,i._path):i}class Oc{constructor(r){this.node_=r}getImmediateChild(r){const e=this.node_.getImmediateChild(r);return new Oc(e)}node(){return this.node_}}class sh{constructor(r,e){this.syncTree_=r,this.path_=e}getImmediateChild(r){const e=Ot(this.path_,r);return new sh(this.syncTree_,e)}node(){return Ql(this.syncTree_,this.path_)}}const oh=function(i,r,e){return i&&"object"==typeof i?((0,H.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?xa(i[".sv"],r,e):"object"==typeof i[".sv"]?My(i[".sv"],r):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},xa=function(i,r,e){if("timestamp"===i)return e.timestamp;(0,H.hu)(!1,"Unexpected server value: "+i)},My=function(i,r,e){i.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;"number"!=typeof o&&(0,H.hu)(!1,"Unexpected increment value: "+o);const l=r.node();if((0,H.hu)(null!=l,"Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const h=l.getValue();return"number"!=typeof h?o:h+o},Fc=function(i,r,e){return ah(i,new Oc(r),e)};function ah(i,r,e){const o=i.getPriority().val(),l=oh(o,r.getImmediateChild(".priority"),e);let d;if(i.isLeafNode()){const h=i,m=oh(h.getValue(),r,e);return m!==h.getValue()||l!==h.getPriority().val()?new Kn(m,Bt(l)):i}{const h=i;return d=h,l!==h.getPriority().val()&&(d=d.updatePriority(new Kn(l))),h.forEachChild(At,(m,D)=>{const b=ah(D,r.getImmediateChild(m),e);b!==D&&(d=d.updateImmediateChild(m,b))}),d}}class kc{constructor(r="",e=null,o={children:{},childCount:0}){this.name=r,this.parent=e,this.node=o}}function lh(i,r){let e=r instanceof yt?r:new yt(r),o=i,l=at(e);for(;null!==l;){const d=(0,H.DV)(o.node.children,l)||{children:{},childCount:0};o=new kc(l,o,d),e=vt(e),l=at(e)}return o}function Fs(i){return i.node.value}function Lc(i,r){i.node.value=r,jc(i)}function Hr(i){return i.node.childCount>0}function Bc(i,r){fn(i.node.children,(e,o)=>{r(new kc(e,i,o))})}function $r(i,r,e,o){e&&!o&&r(i),Bc(i,l=>{$r(l,r,!0,o)}),e&&o&&r(i)}function Un(i){return new yt(null===i.parent?i.name:Un(i.parent)+"/"+i.name)}function jc(i){null!==i.parent&&function fm(i,r,e){const o=function xy(i){return void 0===Fs(i)&&!Hr(i)}(e),l=(0,H.r3)(i.node.children,r);o&&l?(delete i.node.children[r],i.node.childCount--,jc(i)):!o&&!l&&(i.node.children[r]=e.node,i.node.childCount++,jc(i))}(i.parent,i.name,i)}const Ry=/[\[\].#$\/\u0000-\u001F\u007F]/,Py=/[\[\].#$\u0000-\u001F\u007F]/,uh=10485760,Uc=function(i){return"string"==typeof i&&0!==i.length&&!Ry.test(i)},Vc=function(i){return"string"==typeof i&&0!==i.length&&!Py.test(i)},Gr=function(i,r,e,o){o&&void 0===r||eu((0,H.gK)(i,"value"),r,e)},eu=function(i,r,e){const o=e instanceof yt?new vg(e,i):e;if(void 0===r)throw new Error(i+"contains undefined "+_o(o));if("function"==typeof r)throw new Error(i+"contains a function "+_o(o)+" with contents = "+r.toString());if(rc(r))throw new Error(i+"contains "+r.toString()+" "+_o(o));if("string"==typeof r&&r.length>uh/3&&(0,H.ug)(r)>uh)throw new Error(i+"contains a string greater than "+uh+" utf8 bytes "+_o(o)+" ('"+r.substring(0,50)+"...')");if(r&&"object"==typeof r){let l=!1,d=!1;if(fn(r,(h,m)=>{if(".value"===h)l=!0;else if(".priority"!==h&&".sv"!==h&&(d=!0,!Uc(h)))throw new Error(i+" contains an invalid key ("+h+") "+_o(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Z_(i,r){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(r),i.byteLength_+=(0,H.ug)(r),gc(i)})(o,h),eu(i,m,o),function mi(i){const r=i.parts_.pop();i.byteLength_-=(0,H.ug)(r),i.parts_.length>0&&(i.byteLength_-=1)}(o)}),l&&d)throw new Error(i+' contains ".value" child '+_o(o)+" in addition to actual children.")}},Hc=function(i,r,e,o){if(!(o&&void 0===e||Vc(e)))throw new Error((0,H.gK)(i,r)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zr=function(i,r){if(".info"===at(r))throw new Error(i+" failed = Can't modify data under /.info/")};class dh{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ru(i,r){let e=null;for(let o=0;o<r.length;o++){const l=r[o],d=l.getPath();null!==e&&!_f(d,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:d}),e.events.push(l)}e&&i.eventLists_.push(e)}function fh(i,r,e){ru(i,e),hh(i,o=>_f(o,r))}function Jn(i,r,e){ru(i,e),hh(i,o=>dr(o,r)||dr(r,o))}function hh(i,r){i.recursionDepth_++;let e=!0;for(let o=0;o<i.eventLists_.length;o++){const l=i.eventLists_[o];l&&(r(l.path)?(gm(i.eventLists_[o]),i.eventLists_[o]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}function gm(i){for(let r=0;r<i.events.length;r++){const e=i.events[r];if(null!==e){i.events[r]=null;const o=e.getEventRunner();Dn&&dn("event: "+e.toString()),Ui(o)}}}class Ny{constructor(r,e,o,l){this.repoInfo_=r,this.forceRestClient_=e,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zn(),this.transactionQueueTree_=new kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _m(i){const e=i.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function iu(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:_m(i)})}function ym(i,r,e,o,l){i.dataUpdateCount++;const d=new yt(r);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(r,e):e;let h=[];if(l)if(o){const D=(0,H.UI)(e,b=>Bt(b));h=function Jf(i,r,e,o){const l=rh(i,o);if(l){const d=ih(l),h=d.path,m=d.queryId,D=xn(h,r),b=wt.fromObject(e);return Nc(i,h,new Da(Nf(m),D,b))}return[]}(i.serverSyncTree_,d,D,l)}else{const D=Bt(e);h=function Qf(i,r,e,o){const l=rh(i,o);if(null!=l){const d=ih(l),h=d.path,m=d.queryId,D=xn(h,r);return Nc(i,h,new Do(Nf(m),D,e))}return[]}(i.serverSyncTree_,d,D,l)}else if(o){const D=(0,H.UI)(e,b=>Bt(b));h=function wy(i,r,e){const o=wt.fromObject(e);return To(i,new Da({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,o))}(i.serverSyncTree_,d,D)}else{const D=Bt(e);h=Io(i.serverSyncTree_,d,D)}let m=d;h.length>0&&(m=Ao(i,d)),Jn(i.eventQueue_,m,h)}function vm(i,r){gh(i,"connected",r),!1===r&&function By(i){So(i,"onDisconnectEvents");const r=iu(i),e=Zn();Ec(i.onDisconnect_,dt(),(l,d)=>{const h=function(i,r,e,o){return ah(r,new sh(e,i),o)}(l,d,i.serverSyncTree_,r);Hl(e,l,h)});let o=[];Ec(e,dt(),(l,d)=>{o=o.concat(Io(i.serverSyncTree_,l,d));const h=Sm(i,l);Ao(i,h)}),i.onDisconnect_=Zn(),Jn(i.eventQueue_,dt(),o)}(i)}function gh(i,r,e){const o=new yt("/.info/"+r),l=Bt(e);i.infoData_.updateSnapshot(o,l);const d=Io(i.infoSyncTree_,o,l);Jn(i.eventQueue_,o,d)}function $c(i){return i.nextWriteId_++}function mh(i,r,e,o,l){So(i,"set",{path:r.toString(),value:e,priority:o});const d=iu(i),h=Bt(e,o),m=Ql(i.serverSyncTree_,r),D=Fc(h,m,d),b=$c(i),O=Zf(i.serverSyncTree_,r,D,b,!0);ru(i.eventQueue_,O),i.server_.put(r.toString(),h.val(!0),($,J)=>{const ye="ok"===$;ye||En("set at "+r+" failed: "+$);const Ye=Wi(i.serverSyncTree_,b,!ye);Jn(i.eventQueue_,r,Ye),function Gi(i,r,e,o){r&&Ui(()=>{if("ok"===e)r(null);else{const l=(e||"error").toUpperCase();let d=l;o&&(d+=": "+o);const h=new Error(d);h.code=l,r(h)}})}(0,l,$,J)});const A=Sm(i,r);Ao(i,A),Jn(i.eventQueue_,A,[])}function Wc(i,r,e){let o;o=".info"===at(r._path)?Rc(i.infoSyncTree_,r,e):Rc(i.serverSyncTree_,r,e),fh(i.eventQueue_,r._path,o)}function So(i,...r){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),dn(e,...r)}function Gc(i,r,e){return Ql(i.serverSyncTree_,r,e)||Qe.EMPTY_NODE}function su(i,r=i.transactionQueueTree_){if(r||zi(i,r),Fs(r)){const e=Im(i,r);(0,H.hu)(e.length>0,"Sending zero length transaction queue"),e.every(l=>0===l.status)&&function wm(i,r,e){const o=e.map(b=>b.currentWriteId),l=Gc(i,r,o);let d=l;const h=l.hash();for(let b=0;b<e.length;b++){const O=e[b];(0,H.hu)(0===O.status,"tryToSendTransactionQueue_: items in queue should all be run."),O.status=1,O.retryCount++;const A=xn(r,O.path);d=d.updateChild(A,O.currentOutputSnapshotRaw)}const m=d.val(!0),D=r;i.server_.put(D.toString(),m,b=>{So(i,"transaction put response",{path:D.toString(),status:b});let O=[];if("ok"===b){const A=[];for(let $=0;$<e.length;$++)e[$].status=2,O=O.concat(Wi(i.serverSyncTree_,e[$].currentWriteId)),e[$].onComplete&&A.push(()=>e[$].onComplete(null,!0,e[$].currentOutputSnapshotResolved)),e[$].unwatcher();zi(i,lh(i.transactionQueueTree_,r)),su(i,i.transactionQueueTree_),Jn(i.eventQueue_,r,O);for(let $=0;$<A.length;$++)Ui(A[$])}else{if("datastale"===b)for(let A=0;A<e.length;A++)e[A].status=3===e[A].status?4:0;else{En("transaction at "+D.toString()+" failed: "+b);for(let A=0;A<e.length;A++)e[A].status=4,e[A].abortReason=b}Ao(i,r)}},h)}(i,Un(r),e)}else Hr(r)&&Bc(r,e=>{su(i,e)})}function Ao(i,r){const e=ks(i,r),o=Un(e);return function bm(i,r,e){if(0===r.length)return;const o=[];let l=[];const h=r.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<r.length;m++){const D=r[m],b=xn(e,D.path);let A,O=!1;if((0,H.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===D.status)O=!0,A=D.abortReason,l=l.concat(Wi(i.serverSyncTree_,D.currentWriteId,!0));else if(0===D.status)if(D.retryCount>=25)O=!0,A="maxretry",l=l.concat(Wi(i.serverSyncTree_,D.currentWriteId,!0));else{const $=Gc(i,D.path,h);D.currentInputSnapshot=$;const J=r[m].update($.val());if(void 0!==J){eu("transaction failed: Data returned ",J,D.path);let ye=Bt(J);"object"==typeof J&&null!=J&&(0,H.r3)(J,".priority")||(ye=ye.updatePriority($.getPriority()));const _t=D.currentWriteId,Xn=iu(i),hn=Fc(ye,$,Xn);D.currentOutputSnapshotRaw=ye,D.currentOutputSnapshotResolved=hn,D.currentWriteId=$c(i),h.splice(h.indexOf(_t),1),l=l.concat(Zf(i.serverSyncTree_,D.path,hn,D.currentWriteId,D.applyLocally)),l=l.concat(Wi(i.serverSyncTree_,_t,!0))}else O=!0,A="nodata",l=l.concat(Wi(i.serverSyncTree_,D.currentWriteId,!0))}Jn(i.eventQueue_,e,l),l=[],O&&(r[m].status=2,setTimeout(r[m].unwatcher,Math.floor(0)),r[m].onComplete&&o.push("nodata"===A?()=>r[m].onComplete(null,!1,r[m].currentInputSnapshot):()=>r[m].onComplete(new Error(A),!1,null)))}zi(i,i.transactionQueueTree_);for(let m=0;m<o.length;m++)Ui(o[m]);su(i,i.transactionQueueTree_)}(i,Im(i,e),o),o}function ks(i,r){let e,o=i.transactionQueueTree_;for(e=at(r);null!==e&&void 0===Fs(o);)o=lh(o,e),e=at(r=vt(r));return o}function Im(i,r){const e=[];return Tm(i,r,e),e.sort((o,l)=>o.order-l.order),e}function Tm(i,r,e){const o=Fs(r);if(o)for(let l=0;l<o.length;l++)e.push(o[l]);Bc(r,l=>{Tm(i,l,e)})}function zi(i,r){const e=Fs(r);if(e){let o=0;for(let l=0;l<e.length;l++)2!==e[l].status&&(e[o]=e[l],o++);e.length=o,Lc(r,e.length>0?e:void 0)}Bc(r,o=>{zi(i,o)})}function Sm(i,r){const e=Un(ks(i,r)),o=lh(i.transactionQueueTree_,r);return function Wr(i,r,e){let o=e?i:i.parent;for(;null!==o;){if(r(o))return!0;o=o.parent}}(o,l=>{ou(i,l)}),ou(i,o),$r(o,l=>{ou(i,l)}),e}function ou(i,r){const e=Fs(r);if(e){const o=[];let l=[],d=-1;for(let h=0;h<e.length;h++)3===e[h].status||(1===e[h].status?((0,H.hu)(d===h-1,"All SENT items should be at beginning of queue."),d=h,e[h].status=3,e[h].abortReason="set"):((0,H.hu)(0===e[h].status,"Unexpected transaction status in abort"),e[h].unwatcher(),l=l.concat(Wi(i.serverSyncTree_,e[h].currentWriteId,!0)),e[h].onComplete&&o.push(e[h].onComplete.bind(null,new Error("set"),!1,null))));-1===d?Lc(r,void 0):e.length=d+1,Jn(i.eventQueue_,Un(r),l);for(let h=0;h<o.length;h++)Ui(o[h])}}const zc=function(i,r){const e=OC(i),o=e.namespace;return"firebase.com"===e.domain&&pi(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==e.domain&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&En("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Pl(e.host,e.secure,o,"ws"===e.scheme||"wss"===e.scheme,r,"",o!==e.subdomain),path:new yt(e.pathString)}},OC=function(i){let r="",e="",o="",l="",d="",h=!0,m="https",D=443;if("string"==typeof i){let b=i.indexOf("//");b>=0&&(m=i.substring(0,b-1),i=i.substring(b+2));let O=i.indexOf("/");-1===O&&(O=i.length);let A=i.indexOf("?");-1===A&&(A=i.length),r=i.substring(0,Math.min(O,A)),O<A&&(l=function NC(i){let r="";const e=i.split("/");for(let o=0;o<e.length;o++)if(e[o].length>0){let l=e[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(d){}r+="/"+l}return r}(i.substring(O,A)));const $=function Am(i){const r={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const o=e.split("=");2===o.length?r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):En(`Invalid query segment '${e}' in query '${i}'`)}return r}(i.substring(Math.min(i.length,A)));b=r.indexOf(":"),b>=0?(h="https"===m||"wss"===m,D=parseInt(r.substring(b+1),10)):b=r.length;const J=r.slice(0,b);if("localhost"===J.toLowerCase())e="localhost";else if(J.split(".").length<=2)e=J;else{const ye=r.indexOf(".");o=r.substring(0,ye).toLowerCase(),e=r.substring(ye+1),d=o}"ns"in $&&(d=$.ns)}return{host:r,port:D,domain:e,subdomain:o,secure:h,scheme:m,pathString:l,namespace:d}};class Ue{constructor(r,e,o,l){this.eventType=r,this.eventRegistration=e,this.snapshot=o,this.prevName=l}getPath(){const r=this.snapshot.ref;return"value"===this.eventType?r._path:r.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Pz)(this.snapshot.exportVal())}}class Mm{constructor(r,e,o){this.eventRegistration=r,this.error=e,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yh{constructor(r,e){this.snapshotCallback=r,this.cancelCallback=e}onValue(r,e){this.snapshotCallback.call(null,r,e)}onCancel(r){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,r)}get hasCancelCallback(){return!!this.cancelCallback}matches(r){return this.snapshotCallback===r.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===r.snapshotCallback.userCallback&&this.snapshotCallback.context===r.snapshotCallback.context}}class Nn{constructor(r,e,o,l){this._repo=r,this._path=e,this._queryParams=o,this._orderByCalled=l}get key(){return rt(this._path)?null:pc(this._path)}get ref(){return new ht(this._repo,this._path)}get _queryIdentifier(){const r=Rf(this._queryParams),e=cr(r);return"{}"===e?"default":e}get _queryObject(){return Rf(this._queryParams)}isEqual(r){if(!((r=(0,H.m9)(r))instanceof Nn))return!1;const e=this._repo===r._repo,o=_f(this._path,r._path);return e&&o&&this._queryIdentifier===r._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function q_(i){let r="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(r+="/"+encodeURIComponent(String(i.pieces_[e])));return r||"/"}(this._path)}}class ht extends Nn{constructor(r,e){super(r,e,new Mf,!1)}get parent(){const r=yg(this._path);return null===r?null:new ht(this._repo,r)}get root(){let r=this;for(;null!==r.parent;)r=r.parent;return r}}class Pa{constructor(r,e,o){this._node=r,this.ref=e,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(r){const e=new yt(r),o=Oa(this.ref,r);return new Pa(this._node.getChild(e),o,At)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(r){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,l)=>r(new Pa(l,Oa(this.ref,o),At)))}hasChild(r){const e=new yt(r);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Na(i,r){return(i=(0,H.m9)(i))._checkNotDeleted("ref"),void 0!==r?Oa(i._root,r):i._root}function Oa(i,r){return null===at((i=(0,H.m9)(i))._path)?(e=r,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Hc("child","path",e,!1)):Hc("child","path",r,!1),new ht(i._repo,Ot(i._path,r));var e}function qc(i,r){i=(0,H.m9)(i),zr("set",i._path),Gr("set",r,i._path,!1);const e=new H.BH;return mh(i._repo,i._path,r,null,e.wrapCallback(()=>{})),e.promise}class au{constructor(r){this.callbackContext=r}respondsTo(r){return"value"===r}createEvent(r,e){const o=e._queryParams.getIndex();return new Ue("value",this,new Pa(r.snapshotNode,new ht(e._repo,e._path),o))}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,null)}createCancelEvent(r,e){return this.callbackContext.hasCancelCallback?new Mm(this,r,e):null}matches(r){return r instanceof au&&(!r.callbackContext||!this.callbackContext||r.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Zc{constructor(r,e){this.eventType=r,this.callbackContext=e}respondsTo(r){let e="children_added"===r?"child_added":r;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(r,e){return this.callbackContext.hasCancelCallback?new Mm(this,r,e):null}createEvent(r,e){(0,H.hu)(null!=r.childName,"Child events should have a childName.");const o=Oa(new ht(e._repo,e._path),r.childName),l=e._queryParams.getIndex();return new Ue(r.type,this,new Pa(r.snapshotNode,o,l),r.prevName)}getEventRunner(r){return"cancel"===r.getEventType()?()=>this.callbackContext.onCancel(r.error):()=>this.callbackContext.onValue(r.snapshot,r.prevName)}matches(r){return r instanceof Zc&&this.eventType===r.eventType&&(!this.callbackContext||!r.callbackContext||this.callbackContext.matches(r.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function xo(i,r,e,o){return function lu(i,r,e,o,l){let d;if("object"==typeof o&&(d=void 0,l=o),"function"==typeof o&&(d=o),l&&l.onlyOnce){const D=e,b=(O,A)=>{Wc(i._repo,i,m),D(O,A)};b.userCallback=e.userCallback,b.context=e.context,e=b}const h=new yh(e,d||void 0),m="value"===r?new au(h):new Zc(r,h);return function Hy(i,r,e){let o;o=".info"===at(r._path)?Pc(i.infoSyncTree_,r,e):Pc(i.serverSyncTree_,r,e),fh(i.eventQueue_,r._path,o)}(i._repo,i,m),()=>Wc(i._repo,i,m)}(i,"value",r,e,o)}(function im(i){(0,H.hu)(!$f,"__referenceConstructor has already been defined"),$f=i})(ht),function sm(i){(0,H.hu)(!Aa,"__referenceConstructor has already been defined"),Aa=i}(ht);const Dh={};function sv(i,r,e,o,l){let d=o||i.options.databaseURL;void 0===d&&(i.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",i.options.projectId),d=`${i.options.projectId}-default-rtdb.firebaseio.com`);let D,b,h=zc(d,l),m=h.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(D=!0,d=`http://${b}?ns=${m.namespace}`,h=zc(d,l),m=h.repoInfo):D=!h.repoInfo.secure;const O=l&&D?new ac(ac.OWNER):new of(i.name,i.options,r);(function(i,r){const e=r.path.toString();if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!Uc(r.repoInfo.namespace)&&"localhost"!==r.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Vc(i)}(e))throw new Error((0,H.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",h),rt(h.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function ov(i,r,e,o){let l=Dh[r.name];l||(l={},Dh[r.name]=l);let d=l[i.toURLString()];return d&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new Ny(i,false,e,o),l[i.toURLString()]=d,d}(m,i,O,new sf(i.name,e));return new av(A,i)}class av{constructor(r,e){this._repoInternal=r,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Oy(i,r,e){if(i.stats_=rg(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Vl(i.repoInfo_,(o,l,d,h)=>{ym(i,o,l,d,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>vm(i,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Pz)(e)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new yo(i.repoInfo_,r,(o,l,d,h)=>{ym(i,o,l,d,h)},o=>{vm(i,o)},o=>{!function Fy(i,r){fn(r,(e,o)=>{gh(i,e,o)})}(i,o)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=function DC(i,r){const e=i.toString();return ng[e]||(ng[e]=r()),ng[e]}(i.repoInfo_,()=>new jg(i.stats_,i.server_)),i.infoData_=new AC,i.infoSyncTree_=new Kf({startListening:(o,l,d,h)=>{let m=[];const D=i.infoData_.getNode(o._path);return D.isEmpty()||(m=Io(i.infoSyncTree_,o._path,D),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),gh(i,"connected",!1),i.serverSyncTree_=new Kf({startListening:(o,l,d,h)=>(i.server_.listen(o,d,l,(m,D)=>{const b=h(m,D);Jn(i.eventQueue_,o._path,b)}),[]),stopListening:(o,l)=>{i.server_.unlisten(o,l)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ht(this._repo,dt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Fa(i,r){const e=Dh[r];(!e||e[i.key]!==i)&&pi(`Database ${r}(${i.repoInfo_}) has already been deleted.`),function _h(i){i.persistentConnection_&&i.persistentConnection_.interrupt("repo_interrupt")}(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(r){null===this._rootInternal&&pi("Cannot call "+r+" on a deleted database.")}}function mv(i,r){if(1&i&&(v.TgZ(0,"div")(1,"div"),v._uU(2),v.qZA()()),2&i){const e=r.$implicit;v.xp6(2),v.AsE("",e.username," : ",e.chat,"")}}yo.prototype.simpleListen=function(i,r){this.sendRequest("q",{p:i},r)},yo.prototype.echo=function(i,r){this.sendRequest("echo",{d:i},r)},function fv(i){(function O_(i){qd=i})(Es.SDK_VERSION),(0,Es._registerComponent)(new $p.wA("database",(r,{instanceIdentifier:e})=>sv(r.getProvider("app").getImmediate(),r.getProvider("auth-internal"),r.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Es.registerVersion)(Wp,"0.13.5",i),(0,Es.registerVersion)(Wp,"0.13.5","esm2017")}();const _v=[{path:"",component:ec},{path:"chat",component:(()=>{class i{constructor(e){this.route=e,this.title="chat_test",this.all_chats=[],this.firebaseConfig={apiKey:"AIzaSyCiJt5PNdQVth5K0Mu02jClWE3wQZky2iA",authDomain:"chat-test-76af5.firebaseapp.com",projectId:"chat-test-76af5",storageBucket:"chat-test-76af5.appspot.com",messagingSenderId:"285509761505",appId:"1:285509761505:web:3ea6617c3bc005bbde3aa0",dataBaseURL:"https://chat-test-76af5-default-rtdb.firebaseio.com/"},this.username="",this.x=[],this.app=(0,tc.ZF)(this.firebaseConfig),this.database=function uv(i=(0,Es.getApp)(),r){return(0,Es._getProvider)(i,"database").getImmediate({identifier:r})}(this.app)}ngOnInit(){this.route.queryParamMap.subscribe(o=>this.username=o.get("user")),xo(Na(this.database,"/Chats"),o=>{this.x=[],o.forEach(l=>{const d=l.val();this.x.push(d)})})}add_to_chat(e){this.all_chats.push(e);let d=function xm(i,r){i=(0,H.m9)(i),zr("push",i._path),Gr("push",r,i._path,!0);const e=_m(i._repo),o=ny(e),l=Oa(i,o),d=Oa(i,o);let h;return h=null!=r?qc(d,r).then(()=>d):Promise.resolve(d),l.then=h.then.bind(h),l.catch=h.then.bind(h,void 0),l}(Na(this.database,"Chats/"));qc(d,{username:this.username,chat:e}),xo(Na(this.database,"/Chats"),m=>{this.x=[],m.forEach(D=>{const b=D.val();this.x.push(b)})})}ngOnChanges(){xo(Na(this.database,"/Chats"),o=>{this.x=[],o.forEach(l=>{const d=l.val();this.x.push(d)})})}}return i.\u0275fac=function(e){return new(e||i)(v.Y36(kr))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-chat-test"]],features:[v.TTD],decls:10,vars:3,consts:[["chat",""],[3,"click"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e){const l=v.EpF();v.TgZ(0,"h1"),v._uU(1),v.qZA(),v._UZ(2,"input",null,0),v.TgZ(4,"button",1),v.NdJ("click",function(){v.CHM(l);const h=v.MAs(3);return o.add_to_chat(h.value)}),v._uU(5,"Send Text"),v.qZA(),v._uU(6),v._UZ(7,"br"),v.YNc(8,mv,3,2,"div",2),v._UZ(9,"br")}2&e&&(v.xp6(1),v.hij("Welcome ",o.username," !"),v.xp6(5),v.hij("\n",o.all_chats,"\n"),v.xp6(2),v.Q6J("ngForOf",o.x))},directives:[Ft],styles:[""]}),i})()}];let yv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[kp.forRoot(_v)],kp]}),i})(),vv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&v._UZ(0,"router-outlet")},directives:[Cl],styles:[""]}),i})(),Cv={apiKey:"AIzaSyCiJt5PNdQVth5K0Mu02jClWE3wQZky2iA",authDomain:"chat-test-76af5.firebaseapp.com",projectId:"chat-test-76af5",storageBucket:"chat-test-76af5.appspot.com",messagingSenderId:"285509761505",appId:"1:285509761505:web:3ea6617c3bc005bbde3aa0",dataBaseURL:"https://chat-test-76af5-default-rtdb.firebaseio.com/"},Lm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=v.oAB({type:i,bootstrap:[vv]}),i.\u0275inj=v.cJS({providers:[],imports:[[Tu,yv,oi.hO.initializeApp(Cv)]]}),i})();(0,v.G48)(),vn().bootstrapModule(Lm).catch(i=>console.error(i))},867:(ke,ce,R)=>{R.d(ce,{ZF:()=>v.initializeApp});var v=R(681);(0,v.registerVersion)("firebase","9.9.3","app")},306:(ke,ce,R)=>{R.d(ce,{y:()=>B});var v=R(961),V=R(727),ae=R(822),Z=R(671);var ve=R(416),Me=R(576),De=R(806);let B=(()=>{class ne{constructor(ge){ge&&(this._subscribe=ge)}lift(ge){const Ne=new ne;return Ne.source=this,Ne.operator=ge,Ne}subscribe(ge,Ne,He){const it=function Ae(ne){return ne&&ne instanceof v.Lv||function ie(ne){return ne&&(0,Me.m)(ne.next)&&(0,Me.m)(ne.error)&&(0,Me.m)(ne.complete)}(ne)&&(0,V.Nn)(ne)}(ge)?ge:new v.Hp(ge,Ne,He);return(0,De.x)(()=>{const{operator:Q,source:Ee}=this;it.add(Q?Q.call(it,Ee):Ee?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(ge){try{return this._subscribe(ge)}catch(Ne){ge.error(Ne)}}forEach(ge,Ne){return new(Ne=L(Ne))((He,it)=>{const Q=new v.Hp({next:Ee=>{try{ge(Ee)}catch(me){it(me),Q.unsubscribe()}},error:it,complete:He});this.subscribe(Q)})}_subscribe(ge){var Ne;return null===(Ne=this.source)||void 0===Ne?void 0:Ne.subscribe(ge)}[ae.L](){return this}pipe(...ge){return function Re(ne){return 0===ne.length?Z.y:1===ne.length?ne[0]:function(ge){return ne.reduce((Ne,He)=>He(Ne),ge)}}(ge)(this)}toPromise(ge){return new(ge=L(ge))((Ne,He)=>{let it;this.subscribe(Q=>it=Q,Q=>He(Q),()=>Ne(it))})}}return ne.create=ze=>new ne(ze),ne})();function L(ne){var ze;return null!==(ze=null!=ne?ne:ve.v.Promise)&&void 0!==ze?ze:Promise}},579:(ke,ce,R)=>{R.d(ce,{x:()=>ve});var v=R(306),V=R(727);const Z=(0,R(888).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=R(737),Re=R(806);let ve=(()=>{class De extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(L){const ie=new Me(this,this);return ie.operator=L,ie}_throwIfClosed(){if(this.closed)throw new Z}next(L){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(L)}})}error(L){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=L;const{observers:ie}=this;for(;ie.length;)ie.shift().error(L)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:L}=this;for(;L.length;)L.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var L;return(null===(L=this.observers)||void 0===L?void 0:L.length)>0}_trySubscribe(L){return this._throwIfClosed(),super._trySubscribe(L)}_subscribe(L){return this._throwIfClosed(),this._checkFinalizedStatuses(L),this._innerSubscribe(L)}_innerSubscribe(L){const{hasError:ie,isStopped:Ae,observers:ne}=this;return ie||Ae?V.Lc:(this.currentObservers=null,ne.push(L),new V.w0(()=>{this.currentObservers=null,(0,he.P)(ne,L)}))}_checkFinalizedStatuses(L){const{hasError:ie,thrownError:Ae,isStopped:ne}=this;ie?L.error(Ae):ne&&L.complete()}asObservable(){const L=new v.y;return L.source=this,L}}return De.create=(B,L)=>new Me(B,L),De})();class Me extends ve{constructor(B,L){super(),this.destination=B,this.source=L}next(B){var L,ie;null===(ie=null===(L=this.destination)||void 0===L?void 0:L.next)||void 0===ie||ie.call(L,B)}error(B){var L,ie;null===(ie=null===(L=this.destination)||void 0===L?void 0:L.error)||void 0===ie||ie.call(L,B)}complete(){var B,L;null===(L=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===L||L.call(B)}_subscribe(B){var L,ie;return null!==(ie=null===(L=this.source)||void 0===L?void 0:L.subscribe(B))&&void 0!==ie?ie:V.Lc}}},961:(ke,ce,R)=>{R.d(ce,{Hp:()=>ge,Lv:()=>ie});var v=R(576),V=R(727),ae=R(416),Z=R(849);function he(){}const Re=De("C",void 0,void 0);function De(Ee,me,_e){return{kind:Ee,value:me,error:_e}}var B=R(410),L=R(806);class ie extends V.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,V.Nn)(me)&&me.add(this)):this.destination=Q}static create(me,_e,et){return new ge(me,_e,et)}next(me){this.isStopped?it(function Me(Ee){return De("N",Ee,void 0)}(me),this):this._next(me)}error(me){this.isStopped?it(function ve(Ee){return De("E",void 0,Ee)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?it(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ae=Function.prototype.bind;function ne(Ee,me){return Ae.call(Ee,me)}class ze{constructor(me){this.partialObserver=me}next(me){const{partialObserver:_e}=this;if(_e.next)try{_e.next(me)}catch(et){Ne(et)}}error(me){const{partialObserver:_e}=this;if(_e.error)try{_e.error(me)}catch(et){Ne(et)}else Ne(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(_e){Ne(_e)}}}class ge extends ie{constructor(me,_e,et){let oe;if(super(),(0,v.m)(me)||!me)oe={next:null!=me?me:void 0,error:null!=_e?_e:void 0,complete:null!=et?et:void 0};else{let q;this&&ae.v.useDeprecatedNextContext?(q=Object.create(me),q.unsubscribe=()=>this.unsubscribe(),oe={next:me.next&&ne(me.next,q),error:me.error&&ne(me.error,q),complete:me.complete&&ne(me.complete,q)}):oe=me}this.destination=new ze(oe)}}function Ne(Ee){ae.v.useDeprecatedSynchronousErrorHandling?(0,L.O)(Ee):(0,Z.h)(Ee)}function it(Ee,me){const{onStoppedNotification:_e}=ae.v;_e&&B.z.setTimeout(()=>_e(Ee,me))}const Q={closed:!0,next:he,error:function He(Ee){throw Ee},complete:he}},727:(ke,ce,R)=>{R.d(ce,{Lc:()=>Re,w0:()=>he,Nn:()=>ve});var v=R(576);const ae=(0,R(888).d)(De=>function(L){De(this),this.message=L?`${L.length} errors occurred during unsubscription:\n${L.map((ie,Ae)=>`${Ae+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=L});var Z=R(737);class he{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:L}=this;if(L)if(this._parentage=null,Array.isArray(L))for(const ne of L)ne.remove(this);else L.remove(this);const{initialTeardown:ie}=this;if((0,v.m)(ie))try{ie()}catch(ne){B=ne instanceof ae?ne.errors:[ne]}const{_finalizers:Ae}=this;if(Ae){this._finalizers=null;for(const ne of Ae)try{Me(ne)}catch(ze){B=null!=B?B:[],ze instanceof ae?B=[...B,...ze.errors]:B.push(ze)}}if(B)throw new ae(B)}}add(B){var L;if(B&&B!==this)if(this.closed)Me(B);else{if(B instanceof he){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(L=this._finalizers)&&void 0!==L?L:[]).push(B)}}_hasParent(B){const{_parentage:L}=this;return L===B||Array.isArray(L)&&L.includes(B)}_addParent(B){const{_parentage:L}=this;this._parentage=Array.isArray(L)?(L.push(B),L):L?[L,B]:B}_removeParent(B){const{_parentage:L}=this;L===B?this._parentage=null:Array.isArray(L)&&(0,Z.P)(L,B)}remove(B){const{_finalizers:L}=this;L&&(0,Z.P)(L,B),B instanceof he&&B._removeParent(this)}}he.EMPTY=(()=>{const De=new he;return De.closed=!0,De})();const Re=he.EMPTY;function ve(De){return De instanceof he||De&&"closed"in De&&(0,v.m)(De.remove)&&(0,v.m)(De.add)&&(0,v.m)(De.unsubscribe)}function Me(De){(0,v.m)(De)?De():De.unsubscribe()}},416:(ke,ce,R)=>{R.d(ce,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ke,ce,R)=>{R.d(ce,{E:()=>V});const V=new(R(306).y)(he=>he.complete())},76:(ke,ce,R)=>{R.d(ce,{D:()=>et});var v=R(421),V=R(672),ae=R(482),Z=R(403);function he(oe,q=0){return(0,ae.e)((de,j)=>{de.subscribe((0,Z.x)(j,z=>(0,V.f)(j,oe,()=>j.next(z),q),()=>(0,V.f)(j,oe,()=>j.complete(),q),z=>(0,V.f)(j,oe,()=>j.error(z),q)))})}function Re(oe,q=0){return(0,ae.e)((de,j)=>{j.add(oe.schedule(()=>de.subscribe(j),q))})}var De=R(306),L=R(202),ie=R(576);function ne(oe,q){if(!oe)throw new Error("Iterable cannot be null");return new De.y(de=>{(0,V.f)(de,q,()=>{const j=oe[Symbol.asyncIterator]();(0,V.f)(de,q,()=>{j.next().then(z=>{z.done?de.complete():de.next(z.value)})},0,!0)})})}var ze=R(670),ge=R(239),Ne=R(144),He=R(495),it=R(206),Q=R(532),Ee=R(260);function et(oe,q){return q?function _e(oe,q){if(null!=oe){if((0,ze.c)(oe))return function ve(oe,q){return(0,v.Xf)(oe).pipe(Re(q),he(q))}(oe,q);if((0,Ne.z)(oe))return function B(oe,q){return new De.y(de=>{let j=0;return q.schedule(function(){j===oe.length?de.complete():(de.next(oe[j++]),de.closed||this.schedule())})})}(oe,q);if((0,ge.t)(oe))return function Me(oe,q){return(0,v.Xf)(oe).pipe(Re(q),he(q))}(oe,q);if((0,it.D)(oe))return ne(oe,q);if((0,He.T)(oe))return function Ae(oe,q){return new De.y(de=>{let j;return(0,V.f)(de,q,()=>{j=oe[L.h](),(0,V.f)(de,q,()=>{let z,G;try{({value:z,done:G}=j.next())}catch(K){return void de.error(K)}G?de.complete():de.next(z)},0,!0)}),()=>(0,ie.m)(null==j?void 0:j.return)&&j.return()})}(oe,q);if((0,Ee.L)(oe))return function me(oe,q){return ne((0,Ee.Q)(oe),q)}(oe,q)}throw(0,Q.z)(oe)}(oe,q):(0,v.Xf)(oe)}},421:(ke,ce,R)=>{R.d(ce,{Xf:()=>Ae});var v=R(655),V=R(144),ae=R(239),Z=R(306),he=R(670),Re=R(206),ve=R(532),Me=R(495),De=R(260),B=R(576),L=R(849),ie=R(822);function Ae(Ee){if(Ee instanceof Z.y)return Ee;if(null!=Ee){if((0,he.c)(Ee))return function ne(Ee){return new Z.y(me=>{const _e=Ee[ie.L]();if((0,B.m)(_e.subscribe))return _e.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,V.z)(Ee))return function ze(Ee){return new Z.y(me=>{for(let _e=0;_e<Ee.length&&!me.closed;_e++)me.next(Ee[_e]);me.complete()})}(Ee);if((0,ae.t)(Ee))return function ge(Ee){return new Z.y(me=>{Ee.then(_e=>{me.closed||(me.next(_e),me.complete())},_e=>me.error(_e)).then(null,L.h)})}(Ee);if((0,Re.D)(Ee))return He(Ee);if((0,Me.T)(Ee))return function Ne(Ee){return new Z.y(me=>{for(const _e of Ee)if(me.next(_e),me.closed)return;me.complete()})}(Ee);if((0,De.L)(Ee))return function it(Ee){return He((0,De.Q)(Ee))}(Ee)}throw(0,ve.z)(Ee)}function He(Ee){return new Z.y(me=>{(function Q(Ee,me){var _e,et,oe,q;return(0,v.mG)(this,void 0,void 0,function*(){try{for(_e=(0,v.KL)(Ee);!(et=yield _e.next()).done;)if(me.next(et.value),me.closed)return}catch(de){oe={error:de}}finally{try{et&&!et.done&&(q=_e.return)&&(yield q.call(_e))}finally{if(oe)throw oe.error}}me.complete()})})(Ee,me).catch(_e=>me.error(_e))})}},403:(ke,ce,R)=>{R.d(ce,{x:()=>V});var v=R(961);function V(Z,he,Re,ve,Me){return new ae(Z,he,Re,ve,Me)}class ae extends v.Lv{constructor(he,Re,ve,Me,De,B){super(he),this.onFinalize=De,this.shouldUnsubscribe=B,this._next=Re?function(L){try{Re(L)}catch(ie){he.error(ie)}}:super._next,this._error=Me?function(L){try{Me(L)}catch(ie){he.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(L){he.error(L)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4:(ke,ce,R)=>{R.d(ce,{U:()=>ae});var v=R(482),V=R(403);function ae(Z,he){return(0,v.e)((Re,ve)=>{let Me=0;Re.subscribe((0,V.x)(ve,De=>{ve.next(Z.call(he,De,Me++))}))})}},189:(ke,ce,R)=>{R.d(ce,{J:()=>ae});var v=R(577),V=R(671);function ae(Z=1/0){return(0,v.z)(V.y,Z)}},577:(ke,ce,R)=>{R.d(ce,{z:()=>Me});var v=R(4),V=R(421),ae=R(482),Z=R(672),he=R(403),ve=R(576);function Me(De,B,L=1/0){return(0,ve.m)(B)?Me((ie,Ae)=>(0,v.U)((ne,ze)=>B(ie,ne,Ae,ze))((0,V.Xf)(De(ie,Ae))),L):("number"==typeof B&&(L=B),(0,ae.e)((ie,Ae)=>function Re(De,B,L,ie,Ae,ne,ze,ge){const Ne=[];let He=0,it=0,Q=!1;const Ee=()=>{Q&&!Ne.length&&!He&&B.complete()},me=et=>He<ie?_e(et):Ne.push(et),_e=et=>{ne&&B.next(et),He++;let oe=!1;(0,V.Xf)(L(et,it++)).subscribe((0,he.x)(B,q=>{null==Ae||Ae(q),ne?me(q):B.next(q)},()=>{oe=!0},void 0,()=>{if(oe)try{for(He--;Ne.length&&He<ie;){const q=Ne.shift();ze?(0,Z.f)(B,ze,()=>_e(q)):_e(q)}Ee()}catch(q){B.error(q)}}))};return De.subscribe((0,he.x)(B,me,()=>{Q=!0,Ee()})),()=>{null==ge||ge()}}(ie,Ae,De,L)))}},410:(ke,ce,R)=>{R.d(ce,{z:()=>v});const v={setTimeout(V,ae,...Z){const{delegate:he}=v;return(null==he?void 0:he.setTimeout)?he.setTimeout(V,ae,...Z):setTimeout(V,ae,...Z)},clearTimeout(V){const{delegate:ae}=v;return((null==ae?void 0:ae.clearTimeout)||clearTimeout)(V)},delegate:void 0}},202:(ke,ce,R)=>{R.d(ce,{h:()=>V});const V=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},822:(ke,ce,R)=>{R.d(ce,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},669:(ke,ce,R)=>{R.d(ce,{_6:()=>Re,jO:()=>Z,yG:()=>he});var v=R(576);function ae(ve){return ve[ve.length-1]}function Z(ve){return(0,v.m)(ae(ve))?ve.pop():void 0}function he(ve){return function V(ve){return ve&&(0,v.m)(ve.schedule)}(ae(ve))?ve.pop():void 0}function Re(ve,Me){return"number"==typeof ae(ve)?ve.pop():Me}},737:(ke,ce,R)=>{function v(V,ae){if(V){const Z=V.indexOf(ae);0<=Z&&V.splice(Z,1)}}R.d(ce,{P:()=>v})},888:(ke,ce,R)=>{function v(V){const Z=V(he=>{Error.call(he),he.stack=(new Error).stack});return Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z}R.d(ce,{d:()=>v})},806:(ke,ce,R)=>{R.d(ce,{x:()=>ae,O:()=>Z});var v=R(416);let V=null;function ae(he){if(v.v.useDeprecatedSynchronousErrorHandling){const Re=!V;if(Re&&(V={errorThrown:!1,error:null}),he(),Re){const{errorThrown:ve,error:Me}=V;if(V=null,ve)throw Me}}else he()}function Z(he){v.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=he)}},672:(ke,ce,R)=>{function v(V,ae,Z,he=0,Re=!1){const ve=ae.schedule(function(){Z(),Re?V.add(this.schedule(null,he)):this.unsubscribe()},he);if(V.add(ve),!Re)return ve}R.d(ce,{f:()=>v})},671:(ke,ce,R)=>{function v(V){return V}R.d(ce,{y:()=>v})},144:(ke,ce,R)=>{R.d(ce,{z:()=>v});const v=V=>V&&"number"==typeof V.length&&"function"!=typeof V},206:(ke,ce,R)=>{R.d(ce,{D:()=>V});var v=R(576);function V(ae){return Symbol.asyncIterator&&(0,v.m)(null==ae?void 0:ae[Symbol.asyncIterator])}},576:(ke,ce,R)=>{function v(V){return"function"==typeof V}R.d(ce,{m:()=>v})},670:(ke,ce,R)=>{R.d(ce,{c:()=>ae});var v=R(822),V=R(576);function ae(Z){return(0,V.m)(Z[v.L])}},495:(ke,ce,R)=>{R.d(ce,{T:()=>ae});var v=R(202),V=R(576);function ae(Z){return(0,V.m)(null==Z?void 0:Z[v.h])}},239:(ke,ce,R)=>{R.d(ce,{t:()=>V});var v=R(576);function V(ae){return(0,v.m)(null==ae?void 0:ae.then)}},260:(ke,ce,R)=>{R.d(ce,{Q:()=>ae,L:()=>Z});var v=R(655),V=R(576);function ae(he){return(0,v.FC)(this,arguments,function*(){const ve=he.getReader();try{for(;;){const{value:Me,done:De}=yield(0,v.qq)(ve.read());if(De)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(Me)}}finally{ve.releaseLock()}})}function Z(he){return(0,V.m)(null==he?void 0:he.getReader)}},482:(ke,ce,R)=>{R.d(ce,{A:()=>V,e:()=>ae});var v=R(576);function V(Z){return(0,v.m)(null==Z?void 0:Z.lift)}function ae(Z){return he=>{if(V(he))return he.lift(function(Re){try{return Z(Re,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},849:(ke,ce,R)=>{R.d(ce,{h:()=>ae});var v=R(416),V=R(410);function ae(Z){V.z.setTimeout(()=>{const{onUnhandledError:he}=v.v;if(!he)throw Z;he(Z)})}},532:(ke,ce,R)=>{function v(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(ce,{z:()=>v})},655:(ke,ce,R)=>{function Me(j,z,G,K){return new(G||(G=Promise))(function(pe,Le){function qe(It){try{Ge(K.next(It))}catch(wn){Le(wn)}}function xt(It){try{Ge(K.throw(It))}catch(wn){Le(wn)}}function Ge(It){It.done?pe(It.value):function Y(pe){return pe instanceof G?pe:new G(function(Le){Le(pe)})}(It.value).then(qe,xt)}Ge((K=K.apply(j,z||[])).next())})}function Ne(j){return this instanceof Ne?(this.v=j,this):new Ne(j)}function He(j,z,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,K=G.apply(j,z||[]),pe=[];return Y={},Le("next"),Le("throw"),Le("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function Le(Mt){K[Mt]&&(Y[Mt]=function(sn){return new Promise(function(pn,gr){pe.push([Mt,sn,pn,gr])>1||qe(Mt,sn)})})}function qe(Mt,sn){try{!function xt(Mt){Mt.value instanceof Ne?Promise.resolve(Mt.value.v).then(Ge,It):wn(pe[0][2],Mt)}(K[Mt](sn))}catch(pn){wn(pe[0][3],pn)}}function Ge(Mt){qe("next",Mt)}function It(Mt){qe("throw",Mt)}function wn(Mt,sn){Mt(sn),pe.shift(),pe.length&&qe(pe[0][0],pe[0][1])}}function Q(j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G,z=j[Symbol.asyncIterator];return z?z.call(j):(j=function ie(j){var z="function"==typeof Symbol&&Symbol.iterator,G=z&&j[z],K=0;if(G)return G.call(j);if(j&&"number"==typeof j.length)return{next:function(){return j&&K>=j.length&&(j=void 0),{value:j&&j[K++],done:!j}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")}(j),G={},K("next"),K("throw"),K("return"),G[Symbol.asyncIterator]=function(){return this},G);function K(pe){G[pe]=j[pe]&&function(Le){return new Promise(function(qe,xt){!function Y(pe,Le,qe,xt){Promise.resolve(xt).then(function(Ge){pe({value:Ge,done:qe})},Le)}(qe,xt,(Le=j[pe](Le)).done,Le.value)})}}}R.d(ce,{mG:()=>Me,qq:()=>Ne,FC:()=>He,KL:()=>Q})},223:(ke,ce,R)=>{R.d(ce,{deG:()=>ro,tb:()=>GD,AFp:()=>VD,ip1:()=>UD,CZH:()=>Bv,hGG:()=>g0,z2F:()=>Gv,sBO:()=>Jw,Sil:()=>Pw,_Vd:()=>cu,EJc:()=>xw,SBq:()=>bh,qLn:()=>Tl,vpe:()=>Ls,tBr:()=>g,XFs:()=>Oe,OlP:()=>nt,zs3:()=>Er,ZZ4:()=>Qv,aQg:()=>Jv,soG:()=>Uv,YKP:()=>iD,h0i:()=>td,PXZ:()=>Ww,R0b:()=>Yi,FiY:()=>y,Lbi:()=>WD,g9A:()=>$D,Qsj:()=>EE,FYo:()=>XC,JOm:()=>hi,tp0:()=>T,Rgc:()=>Ah,dDg:()=>KD,q4F:()=>tD,GfV:()=>eD,s_b:()=>Um,ifc:()=>Qt,eFA:()=>JD,G48:()=>Qw,X6Q:()=>Zw,_c5:()=>p0,VLi:()=>Vw,c2e:()=>zD,zSh:()=>If,wAp:()=>Ue,vHH:()=>_e,cg1:()=>ou,kL8:()=>Am,dqk:()=>S,sIi:()=>Hi,CqO:()=>om,QGY:()=>Aa,F4k:()=>sm,RDi:()=>$s,AaK:()=>ge,TTD:()=>Ga,xp6:()=>jr,uIk:()=>wt,Suo:()=>vD,Xpm:()=>Ei,lG2:()=>gu,Yz7:()=>jt,cJS:()=>Kr,oAB:()=>Xr,Yjl:()=>Po,Y36:()=>Sa,_UZ:()=>Yf,qZA:()=>Ac,TgZ:()=>Kl,EpF:()=>Zl,LFG:()=>Ht,$8M:()=>xi,$Z:()=>im,NdJ:()=>qf,CRH:()=>CD,Q6J:()=>Wf,iGM:()=>yD,MAs:()=>Yg,CHM:()=>Vo,LSH:()=>qu,YNc:()=>Ff,_uU:()=>pm,hij:()=>nu,AsE:()=>dh});var v=R(189),V=R(421),ae=R(515),Z=R(669),he=R(76),ve=R(579),Me=R(727),De=R(306),B=R(961),L=R(482);function Ae(t,n,...s){if(!0===n)return void t();if(!1===n)return;const a=new B.Hp({next:()=>{a.unsubscribe(),t()}});return n(...s).subscribe(a)}function ne(t){for(let n in t)if(t[n]===ne)return n;throw Error("Could not find renamed property on target object.")}function ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const s=n.indexOf("\n");return-1===s?n:n.substring(0,s)}function Ne(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const He=ne({__forward_ref__:ne});function it(t){return t.__forward_ref__=it,t.toString=function(){return ge(this())},t}function Q(t){return function Ee(t){return"function"==typeof t&&t.hasOwnProperty(He)&&t.__forward_ref__===it}(t)?t():t}class _e extends Error{constructor(n,s){super(function et(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,s)),this.code=n}}function oe(t){return"string"==typeof t?t:null==t?"":String(t)}function q(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():oe(t)}function G(t,n){const s=n?` in ${n}`:"";throw new _e(-201,`No provider for ${q(t)} found${s}`)}function gt(t,n){null==t&&function lt(t,n,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${n} <=Actual]`))}(n,t,null,"!=")}function jt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Kr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Vn(t){return tr(t,nr)||tr(t,gn)}function tr(t,n){return t.hasOwnProperty(n)?t[n]:null}function Zr(t){return t&&(t.hasOwnProperty(Ki)||t.hasOwnProperty(Tr))?t[Ki]:null}const nr=ne({\u0275prov:ne}),Ki=ne({\u0275inj:ne}),gn=ne({ngInjectableDef:ne}),Tr=ne({ngInjectorDef:ne});var Oe=(()=>((Oe=Oe||{})[Oe.Default=0]="Default",Oe[Oe.Host=1]="Host",Oe[Oe.Self=2]="Self",Oe[Oe.SkipSelf=4]="SkipSelf",Oe[Oe.Optional=8]="Optional",Oe))();let Ci;function Te(t){const n=Ci;return Ci=t,n}function We(t,n,s){const a=Vn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Oe.Optional?null:void 0!==n?n:void G(ge(t),"Injector")}function Gt(t){return{toString:t}.toString()}var Tt=(()=>((Tt=Tt||{})[Tt.OnPush=0]="OnPush",Tt[Tt.Default=1]="Default",Tt))(),Qt=(()=>{return(t=Qt||(Qt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Qt;var t})();const Ct="undefined"!=typeof globalThis&&globalThis,Di="undefined"!=typeof window&&window,x="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,S=Ct||"undefined"!=typeof global&&global||Di||x,re={},le=[],Be=ne({\u0275cmp:ne}),ft=ne({\u0275dir:ne}),mt=ne({\u0275pipe:ne}),rr=ne({\u0275mod:ne}),Ze=ne({\u0275fac:ne}),mn=ne({__NG_ELEMENT_ID__:ne});let Jr=0;function Ei(t){return Gt(()=>{const s={},a={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Tt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||le,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Qt.Emulated,id:"c",styles:t.styles||le,_:null,setInput:null,schemas:t.schemas||null,tView:null},u=t.directives,c=t.features,f=t.pipes;return a.id+=Jr++,a.inputs=pu(t.inputs,s),a.outputs=pu(t.outputs),c&&c.forEach(p=>p(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(js):null,a.pipeDefs=f?()=>("function"==typeof f?f():f).map(La):null,a})}function js(t){return Jt(t)||function ei(t){return t[ft]||null}(t)}function La(t){return function ir(t){return t[mt]||null}(t)}const Ba={};function Xr(t){return Gt(()=>{const n={type:t.type,bootstrap:t.bootstrap||le,declarations:t.declarations||le,imports:t.imports||le,exports:t.exports||le,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ba[t.id]=t.type),n})}function pu(t,n){if(null==t)return re;const s={};for(const a in t)if(t.hasOwnProperty(a)){let u=t[a],c=u;Array.isArray(u)&&(c=u[1],u=u[0]),s[u]=a,n&&(n[u]=c)}return s}const gu=Ei;function Po(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jt(t){return t[Be]||null}function Hn(t,n){const s=t[rr]||null;if(!s&&!0===n)throw new Error(`Type ${ge(t)} does not have '\u0275mod' property.`);return s}function xr(t){return Array.isArray(t)&&"object"==typeof t[1]}function Nt(t){return Array.isArray(t)&&!0===t[1]}function Va(t){return 0!=(8&t.flags)}function Fo(t){return 2==(2&t.flags)}function Xi(t){return 1==(1&t.flags)}function mr(t){return null!==t.template}function Rh(t){return 0!=(512&t[2])}function ts(t,n){return t.hasOwnProperty(Ze)?t[Ze]:null}class Wa{constructor(n,s,a){this.previousValue=n,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ga(){return za}function za(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wh),$h}function $h(){const t=ad(this),n=null==t?void 0:t.current;if(n){const s=t.previous;if(s===re)t.previous=n;else for(let a in n)s[a]=n[a];t.current=null,this.ngOnChanges(n)}}function Wh(t,n,s,a){const u=ad(t)||function vu(t,n){return t[yu]=n}(t,{previous:re,current:null}),c=u.current||(u.current={}),f=u.previous,p=this.declaredInputs[s],_=f[p];c[p]=new Wa(_&&_.currentValue,n,f===re),t[a]=n}Ga.ngInherit=!0;const yu="__ngSimpleChanges__";function ad(t){return t[yu]||null}let Ka;function $s(t){Ka=t}function kt(t){return!!t.listen}const Du={createRenderer:(t,n)=>function Za(){return void 0!==Ka?Ka:"undefined"!=typeof document?document:void 0}()};function Et(t){for(;Array.isArray(t);)t=t[0];return t}function yn(t,n){return Et(n[t.index])}function ss(t,n){return t.data[n]}function Xt(t,n){const s=n[t];return xr(s)?s:s[0]}function Gs(t){return 4==(4&t[2])}function Bo(t){return 128==(128&t[2])}function ii(t,n){return null==n?null:t[n]}function jo(t){t[18]=0}function Xa(t,n){t[5]+=n;let s=t,a=t[3];for(;null!==a&&(1===n&&1===s[5]||-1===n&&0===s[5]);)a[5]+=n,s=a,a=a[3]}const je={lFrame:il(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Uo(){return je.bindingsEnabled}function se(){return je.lFrame.lView}function st(){return je.lFrame.tView}function Vo(t){return je.lFrame.contextLView=t,t[8]}function Vt(){let t=bu();for(;null!==t&&64===t.type;)t=t.parent;return t}function bu(){return je.lFrame.currentTNode}function or(t,n){const s=je.lFrame;s.currentTNode=t,s.isParent=n}function qs(){return je.lFrame.isParent}function Ks(){return je.isInCheckNoChangesMode}function Ho(t){je.isInCheckNoChangesMode=t}function os(){return je.lFrame.bindingIndex++}function Au(t,n){const s=je.lFrame;s.bindingIndex=s.bindingRootIndex=t,rl(n)}function rl(t){je.lFrame.currentDirectiveIndex=t}function fd(){return je.lFrame.currentQueryIndex}function as(t){je.lFrame.currentQueryIndex=t}function Nr(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Wo(t,n,s){if(s&Oe.SkipSelf){let u=n,c=t;for(;!(u=u.parent,null!==u||s&Oe.Host||(u=Nr(c),null===u||(c=c[15],10&u.type))););if(null===u)return!1;n=u,t=c}const a=je.lFrame=ls();return a.currentTNode=n,a.lView=t,!0}function Go(t){const n=ls(),s=t[1];je.lFrame=n,n.currentTNode=s.firstChild,n.lView=t,n.tView=s,n.contextLView=t,n.bindingIndex=s.bindingStartIndex,n.inI18n=!1}function ls(){const t=je.lFrame,n=null===t?null:t.child;return null===n?il(t):n}function il(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function hd(){const t=je.lFrame;return je.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const sl=hd;function zo(){const t=hd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Cn(){return je.lFrame.selectedIndex}function Si(t){je.lFrame.selectedIndex=t}function Lt(){const t=je.lFrame;return ss(t.tView,t.selectedIndex)}function Zs(t,n){for(let s=n.directiveStart,a=n.directiveEnd;s<a;s++){const c=t.data[s].type.prototype,{ngAfterContentInit:f,ngAfterContentChecked:p,ngAfterViewInit:_,ngAfterViewChecked:C,ngOnDestroy:w}=c;f&&(t.contentHooks||(t.contentHooks=[])).push(-s,f),p&&((t.contentHooks||(t.contentHooks=[])).push(s,p),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,p)),_&&(t.viewHooks||(t.viewHooks=[])).push(-s,_),C&&((t.viewHooks||(t.viewHooks=[])).push(s,C),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,C)),null!=w&&(t.destroyHooks||(t.destroyHooks=[])).push(s,w)}}function Pu(t,n,s){Ou(t,n,3,s)}function Nu(t,n,s,a){(3&t[2])===s&&Ou(t,n,s,a)}function Qs(t,n){let s=t[2];(3&s)===n&&(s&=2047,s+=1,t[2]=s)}function Ou(t,n,s,a){const c=null!=a?a:-1,f=n.length-1;let p=0;for(let _=void 0!==a?65535&t[18]:0;_<f;_++)if("number"==typeof n[_+1]){if(p=n[_],null!=a&&p>=a)break}else n[_]<0&&(t[18]+=65536),(p<c||-1==c)&&(Yh(t,s,n,_),t[18]=(4294901760&t[18])+_+2),_++}function Yh(t,n,s,a){const u=s[a]<0,c=s[a+1],p=t[u?-s[a]:s[a]];if(u){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class zt{constructor(n,s,a){this.factory=n,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function cs(t,n,s){const a=kt(t);let u=0;for(;u<s.length;){const c=s[u];if("number"==typeof c){if(0!==c)break;u++;const f=s[u++],p=s[u++],_=s[u++];a?t.setAttribute(n,p,_,f):n.setAttributeNS(f,p,_)}else{const f=c,p=s[++u];ol(f)?a&&t.setProperty(n,f,p):a?t.setAttribute(n,f,p):n.setAttribute(f,p),u++}}return u}function ku(t){return 3===t||4===t||6===t}function ol(t){return 64===t.charCodeAt(0)}function ai(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let s=-1;for(let a=0;a<n.length;a++){const u=n[a];"number"==typeof u?s=u:0===s||St(t,s,u,null,-1===s||2===s?n[++a]:null)}}return t}function St(t,n,s,a,u){let c=0,f=t.length;if(-1===n)f=-1;else for(;c<t.length;){const p=t[c++];if("number"==typeof p){if(p===n){f=-1;break}if(p>n){f=c-1;break}}}for(;c<t.length;){const p=t[c];if("number"==typeof p)break;if(p===s){if(null===a)return void(null!==u&&(t[c+1]=u));if(a===t[c+1])return void(t[c+2]=u)}c++,null!==a&&c++,null!==u&&c++}-1!==f&&(t.splice(f,0,n),c=f+1),t.splice(c++,0,s),null!==a&&t.splice(c++,0,a),null!==u&&t.splice(c++,0,u)}function In(t){return-1!==t}function ds(t){return 32767&t}function fs(t,n){let s=function md(t){return t>>16}(t),a=n;for(;s>0;)a=a[15],s--;return a}let un=!0;function Yo(t){const n=un;return un=t,n}let Xs=0;function Ai(t,n){const s=ps(t,n);if(-1!==s)return s;const a=n[1];a.firstCreatePass&&(t.injectorIndex=n.length,hs(a.data,t),hs(n,null),hs(a.blueprint,null));const u=Ko(t,n),c=t.injectorIndex;if(In(u)){const f=ds(u),p=fs(u,n),_=p[1].data;for(let C=0;C<8;C++)n[c+C]=p[f+C]|_[f+C]}return n[c+8]=u,c}function hs(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ps(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ko(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,u=n;for(;null!==u;){const c=u[1],f=c.type;if(a=2===f?c.declTNode:1===f?u[6]:null,null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function li(t,n,s){!function eo(t,n,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(mn)&&(a=s[mn]),null==a&&(a=s[mn]=Xs++);const u=255&a;n.data[t+(u>>5)]|=1<<u}(t,n,s)}function to(t,n,s){if(s&Oe.Optional)return t;G(n,"NodeInjector")}function ui(t,n,s,a){if(s&Oe.Optional&&void 0===a&&(a=null),0==(s&(Oe.Self|Oe.Host))){const u=t[9],c=Te(void 0);try{return u?u.get(n,a,s&Oe.Optional):We(n,a,s&Oe.Optional)}finally{Te(c)}}return to(a,n,s)}function no(t,n,s,a=Oe.Default,u){if(null!==t){const c=function ul(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(mn)?t[mn]:void 0;return"number"==typeof n?n>=0?255&n:Zo:n}(s);if("function"==typeof c){if(!Wo(n,t,a))return a&Oe.Host?to(u,s,a):ui(n,s,a,u);try{const f=c(a);if(null!=f||a&Oe.Optional)return f;G(s)}finally{sl()}}else if("number"==typeof c){let f=null,p=ps(t,n),_=-1,C=a&Oe.Host?n[16][6]:null;for((-1===p||a&Oe.SkipSelf)&&(_=-1===p?Ko(t,n):n[p+8],-1!==_&&Jo(a,!1)?(f=n[1],p=ds(_),n=fs(_,n)):p=-1);-1!==p;){const w=n[1];if(Qo(c,p,w.data)){const I=_d(p,n,s,f,a,C);if(I!==Tn)return I}_=n[p+8],-1!==_&&Jo(a,n[1].data[p+8]===C)&&Qo(c,p,n)?(f=w,p=ds(_),n=fs(_,n)):p=-1}}}return ui(n,s,a,u)}const Tn={};function Zo(){return new Gn(Vt(),se())}function _d(t,n,s,a,u,c){const f=n[1],p=f.data[t+8],w=Wn(p,f,s,null==a?Fo(p)&&un:a!=f&&0!=(3&p.type),u&Oe.Host&&c===p);return null!==w?Mi(n,f,w,p):Tn}function Wn(t,n,s,a,u){const c=t.providerIndexes,f=n.data,p=1048575&c,_=t.directiveStart,w=c>>20,M=u?p+w:t.directiveEnd;for(let U=a?p:p+w;U<M;U++){const X=f[U];if(U<_&&s===X||U>=_&&X.type===s)return U}if(u){const U=f[_];if(U&&mr(U)&&U.type===s)return _}return null}function Mi(t,n,s,a){let u=t[s];const c=n.data;if(function us(t){return t instanceof zt}(u)){const f=u;f.resolving&&function de(t,n){const s=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new _e(-200,`Circular dependency in DI detected for ${t}${s}`)}(q(c[s]));const p=Yo(f.canSeeViewProviders);f.resolving=!0;const _=f.injectImpl?Te(f.injectImpl):null;Wo(t,a,Oe.Default);try{u=t[s]=f.factory(void 0,c,t,a),n.firstCreatePass&&s>=a.directiveStart&&function Zm(t,n,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:c}=n.type.prototype;if(a){const f=za(n);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,f),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,f)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,u),c&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,c),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,c))}(s,c[s],n)}finally{null!==_&&Te(_),Yo(p),f.resolving=!1,sl()}}return u}function Qo(t,n,s){return!!(s[n+(t>>5)]&1<<t)}function Jo(t,n){return!(t&Oe.Self||t&Oe.Host&&n)}class Gn{constructor(n,s){this._tNode=n,this._lView=s}get(n,s,a){return no(this._tNode,this._lView,n,a,s)}}function xi(t){return function ll(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const s=t.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const c=s[u];if(ku(c))break;if(0===c)u+=2;else if("number"==typeof c)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(c===n)return s[u+1];u+=2}}}return null}(Vt(),t)}const Ri="__parameters__";function An(t,n,s){return Gt(()=>{const a=function ea(t){return function(...s){if(t){const a=t(...s);for(const u in a)this[u]=a[u]}}}(n);function u(...c){if(this instanceof u)return a.apply(this,c),this;const f=new u(...c);return p.annotation=f,p;function p(_,C,w){const I=_.hasOwnProperty(Ri)?_[Ri]:Object.defineProperty(_,Ri,{value:[]})[Ri];for(;I.length<=w;)I.push(null);return(I[w]=I[w]||[]).push(f),_}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}class nt{constructor(n,s){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=jt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ro=new nt("AnalyzeForEntryComponents");function lr(t,n){void 0===n&&(n=t);for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?(n===t&&(n=t.slice(0,s)),lr(a,n)):n!==t&&n.push(a)}return n}function zn(t,n){t.forEach(s=>Array.isArray(s)?zn(s,n):n(s))}function Je(t,n,s){n>=t.length?t.push(s):t.splice(n,0,s)}function na(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}const oo={},_s="__NG_DI_FLAG__",vr="ngTempTokenPath",ia=/\n/gm,Ni="__source",tp=ne({provide:String,useValue:ne});let Oi;function sa(t){const n=Oi;return Oi=t,n}function Vu(t,n=Oe.Default){if(void 0===Oi)throw new _e(203,"");return null===Oi?We(t,void 0,n):Oi.get(t,n&Oe.Optional?null:void 0,n)}function Ht(t,n=Oe.Default){return(function Rt(){return Ci}()||Vu)(Q(t),n)}const Hu=Ht;function vs(t){const n=[];for(let s=0;s<t.length;s++){const a=Q(t[s]);if(Array.isArray(a)){if(0===a.length)throw new _e(900,"");let u,c=Oe.Default;for(let f=0;f<a.length;f++){const p=a[f],_=pl(p);"number"==typeof _?-1===_?u=p.token:c|=_:u=p}n.push(Ht(u,c))}else n.push(Ht(a))}return n}function oa(t,n){return t[_s]=n,t.prototype[_s]=n,t}function pl(t){return t[_s]}const g=oa(An("Inject",t=>({token:t})),-1),y=oa(An("Optional"),8),T=oa(An("SkipSelf"),4);class ml{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const i_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Id=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Zt=(()=>((Zt=Zt||{})[Zt.NONE=0]="NONE",Zt[Zt.HTML=1]="HTML",Zt[Zt.STYLE=2]="STYLE",Zt[Zt.SCRIPT=3]="SCRIPT",Zt[Zt.URL=4]="URL",Zt[Zt.RESOURCE_URL=5]="RESOURCE_URL",Zt))();function qu(t){const n=function El(){const t=se();return t&&t[12]}();return n?n.sanitize(Zt.URL,t)||"":function yl(t,n){const s=function t_(t){return t instanceof ml&&t.getTypeName()||null}(t);if(null!=s&&s!==n){if("ResourceURL"===s&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===n}(t,"URL")?function fi(t){return t instanceof ml?t.changingThisBreaksApplicationSecurity:t}(t):function Lr(t){return(t=String(t)).match(i_)||t.match(Id)?t:"unsafe:"+t}(oe(t))}const Rd="__ngContext__";function nn(t,n){t[Rd]=n}function Pd(t){const n=function bl(t){return t[Rd]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Od(t){return t.ngOriginalError}function y_(t,...n){t.error(...n)}class Tl{constructor(){this._console=console}handleError(n){const s=this._findOriginalError(n),a=function __(t){return t&&t.ngErrorLogger||y_}(n);a(this._console,"ERROR",n),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(n){let s=n&&Od(n);for(;s&&Od(s);)s=Od(s);return s||null}}const Ap=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(S))();function Br(t){return t instanceof Function?t():t}var hi=(()=>((hi=hi||{})[hi.Important=1]="Important",hi[hi.DashCase=2]="DashCase",hi))();function Qu(t,n){return undefined(t,n)}function Al(t){const n=t[3];return Nt(n)?n[3]:n}function Ld(t){return jn(t[13])}function Bd(t){return jn(t[4])}function jn(t){for(;null!==t&&!Nt(t);)t=t[4];return t}function fo(t,n,s,a,u){if(null!=a){let c,f=!1;Nt(a)?c=a:xr(a)&&(f=!0,a=a[0]);const p=Et(a);0===t&&null!==s?null==u?$d(n,s,p):ho(n,s,p,u||null,!0):1===t&&null!==s?ho(n,s,p,u||null,!0):2===t?function $p(t,n,s){const a=Xu(t,n);a&&function P_(t,n,s,a){kt(t)?t.removeChild(n,s,a):n.removeChild(s)}(t,a,n,s)}(n,p,f):3===t&&n.destroyNode(p),null!=c&&function qd(t,n,s,a,u){const c=s[7];c!==Et(s)&&fo(n,t,a,c,u);for(let p=10;p<s.length;p++){const _=s[p];da(_[1],_,t,n,a,c)}}(n,t,c,s,u)}}function jd(t,n,s){if(kt(t))return t.createElement(n,s);{const a=null!==s?function Ii(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?t.createElement(n):t.createElementNS(a,n)}}function x_(t,n){const s=t[9],a=s.indexOf(n),u=n[3];1024&n[2]&&(n[2]&=-1025,Xa(u,-1)),s.splice(a,1)}function Bi(t,n){if(t.length<=10)return;const s=10+n,a=t[s];if(a){const u=a[17];null!==u&&u!==t&&x_(u,a),n>0&&(t[s-1][4]=a[4]);const c=na(t,10+n);!function A_(t,n){da(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(a[1],a);const f=c[19];null!==f&&f.detachView(c[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Vd(t,n){if(!(256&n[2])){const s=n[11];kt(s)&&s.destroyNode&&da(t,n,s,3,null,null),function Op(t){let n=t[13];if(!n)return Hd(t[1],t);for(;n;){let s=null;if(xr(n))s=n[13];else{const a=n[10];a&&(s=a)}if(!s){for(;n&&!n[4]&&n!==t;)xr(n)&&Hd(n[1],n),n=n[3];null===n&&(n=t),xr(n)&&Hd(n[1],n),s=n&&n[4]}n=s}}(n)}}function Hd(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function kp(t,n){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const u=n[s[a]];if(!(u instanceof zt)){const c=s[a+1];if(Array.isArray(c))for(let f=0;f<c.length;f+=2){const p=u[c[f]],_=c[f+1];try{_.call(p)}finally{}}else try{c.call(u)}finally{}}}}(t,n),function R_(t,n){const s=t.cleanup,a=n[7];let u=-1;if(null!==s)for(let c=0;c<s.length-1;c+=2)if("string"==typeof s[c]){const f=s[c+1],p="function"==typeof f?f(n):Et(n[f]),_=a[u=s[c+2]],C=s[c+3];"boolean"==typeof C?p.removeEventListener(s[c],_,C):C>=0?a[u=C]():a[u=-C].unsubscribe(),c+=2}else{const f=a[u=s[c+1]];s[c].call(f)}if(null!==a){for(let c=u+1;c<a.length;c++)a[c]();n[7]=null}}(t,n),1===n[1].type&&kt(n[11])&&n[11].destroy();const s=n[17];if(null!==s&&Nt(n[3])){s!==n[3]&&x_(s,n);const a=n[19];null!==a&&a.detachView(t)}}}function Lp(t,n,s){return function Bp(t,n,s){let a=n;for(;null!==a&&40&a.type;)a=(n=a).parent;if(null===a)return s[0];if(2&a.flags){const u=t.data[a.directiveStart].encapsulation;if(u===Qt.None||u===Qt.Emulated)return null}return yn(a,s)}(t,n.parent,s)}function ho(t,n,s,a,u){kt(t)?t.insertBefore(n,s,a,u):n.insertBefore(s,a,u)}function $d(t,n,s){kt(t)?t.appendChild(n,s):n.appendChild(s)}function jp(t,n,s,a,u){null!==a?ho(t,n,s,a,u):$d(t,n,s)}function Xu(t,n){return kt(t)?t.parentNode(n):n.parentNode}let Gd=function Vp(t,n,s){return 40&t.type?yn(t,s):null};function ec(t,n,s,a){const u=Lp(t,a,n),c=n[11],p=function Up(t,n,s){return Gd(t,n,s)}(a.parent||n[6],a,n);if(null!=u)if(Array.isArray(s))for(let _=0;_<s.length;_++)jp(c,u,s[_],p,!1);else jp(c,u,s,p,!1)}function tc(t,n){if(null!==n){const s=n.type;if(3&s)return yn(n,t);if(4&s)return Es(-1,t[n.index]);if(8&s){const a=n.child;if(null!==a)return tc(t,a);{const u=t[n.index];return Nt(u)?Es(-1,u):Et(u)}}if(32&s)return Qu(n,t)()||Et(t[n.index]);{const a=Hp(t,n);return null!==a?Array.isArray(a)?a[0]:tc(Al(t[16]),a):tc(t,n.next)}}return null}function Hp(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Es(t,n){const s=10+t+1;if(s<n.length){const a=n[s],u=a[1].firstChild;if(null!==u)return tc(a,u)}return n[7]}function H(t,n,s,a,u,c,f){for(;null!=s;){const p=a[s.index],_=s.type;if(f&&0===n&&(p&&nn(Et(p),a),s.flags|=4),64!=(64&s.flags))if(8&_)H(t,n,s.child,a,u,c,!1),fo(n,t,u,p,c);else if(32&_){const C=Qu(s,a);let w;for(;w=C();)fo(n,t,u,w,c);fo(n,t,u,p,c)}else 16&_?Yd(t,n,a,s,u,c):fo(n,t,u,p,c);s=f?s.projectionNext:s.next}}function da(t,n,s,a,u,c){H(s,a,t.firstChild,n,u,c,!1)}function Yd(t,n,s,a,u,c){const f=s[16],_=f[6].projection[a.projection];if(Array.isArray(_))for(let C=0;C<_.length;C++)fo(n,t,u,_[C],c);else H(t,n,_,f[3],u,c,!0)}function Gp(t,n,s){kt(t)?t.setAttribute(n,"style",s):n.style.cssText=s}function Kd(t,n,s){kt(t)?""===s?t.removeAttribute(n,"class"):t.setAttribute(n,"class",s):n.className=s}function Zd(t,n,s){let a=t.length;for(;;){const u=t.indexOf(n,s);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const c=n.length;if(u+c===a||t.charCodeAt(u+c)<=32)return u}s=u+1}}const nc="ng-template";function ha(t,n,s){let a=0;for(;a<t.length;){let u=t[a++];if(s&&"class"===u){if(u=t[a],-1!==Zd(u.toLowerCase(),n,0))return!0}else if(1===u){for(;a<t.length&&"string"==typeof(u=t[a++]);)if(u.toLowerCase()===n)return!0;return!1}}return!1}function Qd(t){return 4===t.type&&t.value!==nc}function zp(t,n,s){return n===(4!==t.type||s?t.value:nc)}function xl(t,n,s){let a=4;const u=t.attrs||[],c=function Rl(t){for(let n=0;n<t.length;n++)if(ku(t[n]))return n;return t.length}(u);let f=!1;for(let p=0;p<n.length;p++){const _=n[p];if("number"!=typeof _){if(!f)if(4&a){if(a=2|1&a,""!==_&&!zp(t,_,s)||""===_&&1===n.length){if(Dn(a))return!1;f=!0}}else{const C=8&a?_:n[++p];if(8&a&&null!==t.attrs){if(!ha(t.attrs,C,s)){if(Dn(a))return!1;f=!0}continue}const I=Yp(8&a?"class":_,u,Qd(t),s);if(-1===I){if(Dn(a))return!1;f=!0;continue}if(""!==C){let M;M=I>c?"":u[I+1].toLowerCase();const U=8&a?M:null;if(U&&-1!==Zd(U,C,0)||2&a&&C!==M){if(Dn(a))return!1;f=!0}}}}else{if(!f&&!Dn(a)&&!Dn(_))return!1;if(f&&Dn(_))continue;f=!1,a=_|1&a}}return Dn(a)||f}function Dn(t){return 0==(1&t)}function Yp(t,n,s,a){if(null===n)return-1;let u=0;if(a||!s){let c=!1;for(;u<n.length;){const f=n[u];if(f===t)return u;if(3===f||6===f)c=!0;else{if(1===f||2===f){let p=n[++u];for(;"string"==typeof p;)p=n[++u];continue}if(4===f)break;if(0===f){u+=4;continue}}u+=c?1:2}return-1}return function Xd(t,n){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===n)return s;s++}return-1}(n,t)}function Jd(t,n,s=!1){for(let a=0;a<n.length;a++)if(xl(t,n[a],s))return!0;return!1}function En(t,n){return t?":not("+n.trim()+")":n}function F_(t){let n=t[0],s=1,a=2,u="",c=!1;for(;s<t.length;){let f=t[s];if("string"==typeof f)if(2&a){const p=t[++s];u+="["+f+(p.length>0?'="'+p+'"':"")+"]"}else 8&a?u+="."+f:4&a&&(u+=" "+f);else""!==u&&!Dn(f)&&(n+=En(c,u),u=""),a=f,c=c||!Dn(a);s++}return""!==u&&(n+=En(c,u)),n}const $e={};function jr(t){ws(st(),se(),Cn()+t,Ks())}function ws(t,n,s,a){if(!a)if(3==(3&n[2])){const c=t.preOrderCheckHooks;null!==c&&Pu(n,c,s)}else{const c=t.preOrderHooks;null!==c&&Nu(n,c,0,s)}Si(s)}function lg(t,n){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],c=s[a+1];if(-1!==c){const f=t.data[c];as(u),f.contentQueries(2,n[c],c)}}}function go(t,n,s,a,u,c,f,p,_,C){const w=n.blueprint.slice();return w[0]=u,w[2]=140|a,jo(w),w[3]=w[15]=t,w[8]=s,w[10]=f||t&&t[10],w[11]=p||t&&t[11],w[12]=_||t&&t[12]||null,w[9]=C||t&&t[9]||null,w[6]=c,w[16]=2==n.type?t[16]:w,w}function pa(t,n,s,a,u){let c=t.data[n];if(null===c)c=function ff(t,n,s,a,u){const c=bu(),f=qs(),_=t.data[n]=function hg(t,n,s,a,u,c){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?c:c&&c.parent,s,n,a,u);return null===t.firstChild&&(t.firstChild=_),null!==c&&(f?null==c.child&&null!==_.parent&&(c.child=_):null===c.next&&(c.next=_)),_}(t,n,s,a,u),function Su(){return je.lFrame.inI18n}()&&(c.flags|=64);else if(64&c.type){c.type=s,c.value=a,c.attrs=u;const f=function si(){const t=je.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();c.injectorIndex=null===f?-1:f.injectorIndex}return or(c,!0),c}function Vi(t,n,s,a){if(0===s)return-1;const u=n.length;for(let c=0;c<s;c++)n.push(a),t.blueprint.push(a),t.data.push(null);return u}function gi(t,n,s){Go(n);try{const a=t.viewQuery;null!==a&&Rn(1,a,s);const u=t.template;null!==u&&ug(t,n,u,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&lg(t,n),t.staticViewQueries&&Rn(2,t.viewQuery,s);const c=t.components;null!==c&&function Ss(t,n){for(let s=0;s<n.length;s++)Eg(t,n[s])}(n,c)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{n[2]&=-5,zo()}}function mo(t,n,s,a){const u=n[2];if(256==(256&u))return;Go(n);const c=Ks();try{jo(n),function Tu(t){return je.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&ug(t,n,s,2,a);const f=3==(3&u);if(!c)if(f){const C=t.preOrderCheckHooks;null!==C&&Pu(n,C,null)}else{const C=t.preOrderHooks;null!==C&&Nu(n,C,0,null),Qs(n,0)}if(function Q_(t){for(let n=Ld(t);null!==n;n=Bd(n)){if(!n[2])continue;const s=n[9];for(let a=0;a<s.length;a++){const u=s[a],c=u[3];0==(1024&u[2])&&Xa(c,1),u[2]|=1024}}}(n),function Dg(t){for(let n=Ld(t);null!==n;n=Bd(n))for(let s=10;s<n.length;s++){const a=n[s],u=a[1];Bo(a)&&mo(u,a,u.template,a[8])}}(n),null!==t.contentQueries&&lg(t,n),!c)if(f){const C=t.contentCheckHooks;null!==C&&Pu(n,C)}else{const C=t.contentHooks;null!==C&&Nu(n,C,1),Qs(n,1)}!function $_(t,n){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)Si(~u);else{const c=u,f=s[++a],p=s[++a];Au(f,c),p(2,n[c])}}}finally{Si(-1)}}(t,n);const p=t.components;null!==p&&function W_(t,n){for(let s=0;s<n.length;s++)J_(t,n[s])}(n,p);const _=t.viewQuery;if(null!==_&&Rn(2,_,a),!c)if(f){const C=t.viewCheckHooks;null!==C&&Pu(n,C)}else{const C=t.viewHooks;null!==C&&Nu(n,C,2),Qs(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),c||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Xa(n[3],-1))}finally{zo()}}function G_(t,n,s,a){const u=n[10],c=!Ks(),f=Gs(n);try{c&&!f&&u.begin&&u.begin(),f&&gi(t,n,a),mo(t,n,s,a)}finally{c&&!f&&u.end&&u.end()}}function ug(t,n,s,a,u){const c=Cn(),f=2&a;try{Si(-1),f&&n.length>20&&ws(t,n,20,Ks()),s(a,u)}finally{Si(c)}}function hf(t,n,s){!Uo()||(function Ol(t,n,s,a){const u=s.directiveStart,c=s.directiveEnd;t.firstCreatePass||Ai(s,n),nn(a,n);const f=s.initialInputs;for(let p=u;p<c;p++){const _=t.data[p],C=mr(_);C&&Z_(n,s,_);const w=Mi(n,t,p,s);nn(w,n),null!==f&&_o(0,p-u,w,_,0,f),C&&(Xt(s.index,n)[8]=w)}}(t,n,s,yn(s,n)),128==(128&s.flags)&&function yg(t,n,s){const a=s.directiveStart,u=s.directiveEnd,f=s.index,p=function nl(){return je.lFrame.currentDirectiveIndex}();try{Si(f);for(let _=a;_<u;_++){const C=t.data[_],w=n[_];rl(_),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Ot(C,w)}}finally{Si(-1),rl(p)}}(t,n,s))}function Nl(t,n,s=yn){const a=n.localNames;if(null!==a){let u=n.index+1;for(let c=0;c<a.length;c+=2){const f=a[c+1],p=-1===f?s(n,t):t[f];t[u++]=p}}}function pf(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=fc(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function fc(t,n,s,a,u,c,f,p,_,C){const w=20+a,I=w+u,M=function dg(t,n){const s=[];for(let a=0;a<n;a++)s.push(a<t?null:$e);return s}(w,I),U="function"==typeof C?C():C;return M[1]={type:t,blueprint:M,template:s,queries:null,viewQuery:p,declTNode:n,data:M.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:_,consts:U,incompleteFirstPass:!1}}function mf(t,n,s,a){const u=vc(n);null===s?u.push(a):(u.push(s),t.firstCreatePass&&wg(t).push(a,u.length-1))}function pg(t,n,s){for(let a in t)if(t.hasOwnProperty(a)){const u=t[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(n,u):s[a]=[n,u]}return s}function vt(t,n,s,a){let u=!1;if(Uo()){const c=function rt(t,n,s){const a=t.directiveRegistry;let u=null;if(a)for(let c=0;c<a.length;c++){const f=a[c];Jd(s,f.selectors,!1)&&(u||(u=[]),li(Ai(s,n),t,f.type),mr(f)?(xn(t,s),u.unshift(f)):u.push(f))}return u}(t,n,s),f=null===a?null:{"":-1};if(null!==c){u=!0,dr(s,t.data.length,c.length);for(let w=0;w<c.length;w++){const I=c[w];I.providersResolver&&I.providersResolver(I)}let p=!1,_=!1,C=Vi(t,n,c.length,null);for(let w=0;w<c.length;w++){const I=c[w];s.mergedAttrs=ai(s.mergedAttrs,I.hostAttrs),vg(t,s,n,C,I),_f(C,I,f),null!==I.contentQueries&&(s.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(s.flags|=128);const M=I.type.prototype;!p&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),p=!0),!_&&(M.ngOnChanges||M.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),_=!0),C++}!function gg(t,n){const a=n.directiveEnd,u=t.data,c=n.attrs,f=[];let p=null,_=null;for(let C=n.directiveStart;C<a;C++){const w=u[C],I=w.inputs,M=null===c||Qd(n)?null:yf(I,c);f.push(M),p=pg(I,C,p),_=pg(w.outputs,C,_)}null!==p&&(p.hasOwnProperty("class")&&(n.flags|=16),p.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=f,n.inputs=p,n.outputs=_}(t,s)}f&&function K_(t,n,s){if(n){const a=t.localNames=[];for(let u=0;u<n.length;u+=2){const c=s[n[u+1]];if(null==c)throw new _e(-301,!1);a.push(n[u],c)}}}(s,a,f)}return s.mergedAttrs=ai(s.mergedAttrs,s.attrs),u}function pc(t,n,s,a,u,c){const f=c.hostBindings;if(f){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const _=~n.index;(function q_(t){let n=t.length;for(;n>0;){const s=t[--n];if("number"==typeof s&&s<0)return s}return 0})(p)!=_&&p.push(_),p.push(a,u,f)}}function Ot(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function xn(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function _f(t,n,s){if(s){if(n.exportAs)for(let a=0;a<n.exportAs.length;a++)s[n.exportAs[a]]=t;mr(n)&&(s[""]=t)}}function dr(t,n,s){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+s,t.providerIndexes=n}function vg(t,n,s,a,u){t.data[a]=u;const c=u.factory||(u.factory=ts(u.type)),f=new zt(c,mr(u),null);t.blueprint[a]=f,s[a]=f,pc(t,n,0,a,Vi(t,s,u.hostVars,$e),u)}function Z_(t,n,s){const a=yn(n,t),u=pf(s),c=t[10],f=Xe(t,go(t,u,null,s.onPush?64:16,a,n,c,c.createRenderer(a,s),null,null));t[n.index]=f}function mi(t,n,s,a,u,c){const f=yn(t,n);!function gc(t,n,s,a,u,c,f){if(null==c)kt(t)?t.removeAttribute(n,u,s):n.removeAttribute(u);else{const p=null==f?oe(c):f(c,a||"",u);kt(t)?t.setAttribute(n,u,p,s):s?n.setAttributeNS(s,u,p):n.setAttribute(u,p)}}(n[11],f,c,t.value,s,a,u)}function _o(t,n,s,a,u,c){const f=c[n];if(null!==f){const p=a.setInput;for(let _=0;_<f.length;){const C=f[_++],w=f[_++],I=f[_++];null!==p?a.setInput(s,I,C,w):s[w]=I}}}function yf(t,n){let s=null,a=0;for(;a<n.length;){const u=n[a];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,t[u],n[a+1])),a+=2}else a+=2;else a+=4}return s}function Cg(t,n,s,a){return new Array(t,!0,!1,n,null,0,a,s,null,null)}function J_(t,n){const s=Xt(n,t);if(Bo(s)){const a=s[1];80&s[2]?mo(a,s,a.template,s[8]):s[5]>0&&vf(s)}}function vf(t){for(let a=Ld(t);null!==a;a=Bd(a))for(let u=10;u<a.length;u++){const c=a[u];if(1024&c[2]){const f=c[1];mo(f,c,f.template,c[8])}else c[5]>0&&vf(c)}const s=t[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Xt(s[a],t);Bo(u)&&u[5]>0&&vf(u)}}function Eg(t,n){const s=Xt(n,t),a=s[1];(function yo(t,n){for(let s=n.length;s<t.blueprint.length;s++)n.push(t.blueprint[s])})(a,s),gi(a,s,s[8])}function Xe(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function ga(t){for(;t;){t[2]|=64;const n=Al(t);if(Rh(t)&&!n)return t;t=n}return null}function Dr(t,n,s){const a=n[10];a.begin&&a.begin();try{mo(t,n,t.template,s)}catch(u){throw Ef(n,u),u}finally{a.end&&a.end()}}function Fl(t){!function yc(t){for(let n=0;n<t.components.length;n++){const s=t.components[n],a=Pd(s),u=a[1];G_(u,a,u.template,s)}}(t[8])}function Rn(t,n,s){as(0),n(t,s)}const Cf=(()=>Promise.resolve(null))();function vc(t){return t[7]||(t[7]=[])}function wg(t){return t.cleanup||(t.cleanup=[])}function Ef(t,n){const s=t[9],a=s?s.get(Tl,null):null;a&&a.handleError(n)}function wf(t,n,s,a,u){for(let c=0;c<s.length;){const f=s[c++],p=s[c++],_=n[f],C=t.data[f];null!==C.setInput?C.setInput(_,u,a,p):_[p]=u}}function Kn(t,n,s){const a=function is(t,n){return Et(n[t])}(n,t);!function Ju(t,n,s){kt(t)?t.setValue(n,s):n.textContent=s}(t[11],a,s)}function kl(t,n,s){let a=s?t.styles:null,u=s?t.classes:null,c=0;if(null!==n)for(let f=0;f<n.length;f++){const p=n[f];"number"==typeof p?c=p:1==c?u=Ne(u,p):2==c&&(a=Ne(a,p+": "+n[++f]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=u:t.classesWithoutHost=u}const bf=new nt("INJECTOR",-1);class At{get(n,s=oo){if(s===oo){const a=new Error(`NullInjectorError: No provider for ${ge(n)}!`);throw a.name="NullInjectorError",a}return s}}const If=new nt("Set Injector scope."),Ll={},Cc={};let Bl;function vo(){return void 0===Bl&&(Bl=new At),Bl}function _i(t,n=null,s=null,a){const u=ma(t,n,s,a);return u._resolveInjectorDefTypes(),u}function ma(t,n=null,s=null,a){return new Qe(t,s,n||vo(),a)}class Qe{constructor(n,s,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];s&&zn(s,p=>this.processProvider(p,n,s)),zn([n],p=>this.processInjectorType(p,[],c)),this.records.set(bf,Ms(void 0,this));const f=this.records.get(If);this.scope=null!=f?f.value:null,this.source=u||("object"==typeof n?null:ge(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,s=oo,a=Oe.Default){this.assertNotDestroyed();const u=sa(this),c=Te(void 0);try{if(!(a&Oe.SkipSelf)){let p=this.records.get(n);if(void 0===p){const _=function Ag(t){return"function"==typeof t||"object"==typeof t&&t instanceof nt}(n)&&Vn(n);p=_&&this.injectableDefInScope(_)?Ms(Tf(n),Ll):null,this.records.set(n,p)}if(null!=p)return this.hydrate(n,p)}return(a&Oe.Self?vo():this.parent).get(n,s=a&Oe.Optional&&s===oo?null:s)}catch(f){if("NullInjectorError"===f.name){if((f[vr]=f[vr]||[]).unshift(ge(n)),u)throw f;return function aa(t,n,s,a){const u=t[vr];throw n[Ni]&&u.unshift(n[Ni]),t.message=function gl(t,n,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let u=ge(n);if(Array.isArray(n))u=n.map(ge).join(" -> ");else if("object"==typeof n){let c=[];for(let f in n)if(n.hasOwnProperty(f)){let p=n[f];c.push(f+":"+("string"==typeof p?JSON.stringify(p):ge(p)))}u=`{${c.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${t.replace(ia,"\n  ")}`}("\n"+t.message,u,s,a),t.ngTokenPath=u,t[vr]=null,t}(f,n,"R3InjectorError",this.source)}throw f}finally{Te(c),sa(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((a,u)=>n.push(ge(u))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processInjectorType(n,s,a){if(!(n=Q(n)))return!1;let u=Zr(n);const c=null==u&&n.ngModule||void 0,f=void 0===c?n:c,p=-1!==a.indexOf(f);if(void 0!==c&&(u=Zr(c)),null==u)return!1;if(null!=u.imports&&!p){let w;a.push(f);try{zn(u.imports,I=>{this.processInjectorType(I,s,a)&&(void 0===w&&(w=[]),w.push(I))})}finally{}if(void 0!==w)for(let I=0;I<w.length;I++){const{ngModule:M,providers:U}=w[I];zn(U,X=>this.processProvider(X,M,U||le))}}this.injectorDefTypes.add(f);const _=ts(f)||(()=>new f);this.records.set(f,Ms(_,Ll));const C=u.providers;if(null!=C&&!p){const w=n;zn(C,I=>this.processProvider(I,w,C))}return void 0!==c&&void 0!==n.providers}processProvider(n,s,a){let u=xs(n=Q(n))?n:Q(n&&n.provide);const c=function ty(t,n,s){return Ig(t)?Ms(void 0,t.useValue):Ms(function Bt(t,n,s){let a;if(xs(t)){const u=Q(t);return ts(u)||Tf(u)}if(Ig(t))a=()=>Q(t.useValue);else if(function _a(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...vs(t.deps||[]));else if(function Sf(t){return!(!t||!t.useExisting)}(t))a=()=>Ht(Q(t.useExisting));else{const u=Q(t&&(t.useClass||t.provide));if(!function Sg(t){return!!t.deps}(t))return ts(u)||Tf(u);a=()=>new u(...vs(t.deps))}return a}(t),Ll)}(n);if(xs(n)||!0!==n.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Ms(void 0,Ll,!0),f.factory=()=>vs(f.multi),this.records.set(u,f)),u=n,f.multi.push(n)}this.records.set(u,c)}hydrate(n,s){return s.value===Ll&&(s.value=Cc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ny(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(n){if(!n.providedIn)return!1;const s=Q(n.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Tf(t){const n=Vn(t),s=null!==n?n.factory:ts(t);if(null!==s)return s;if(t instanceof nt)throw new _e(204,!1);if(t instanceof Function)return function jl(t){const n=t.length;if(n>0)throw function ur(t,n){const s=[];for(let a=0;a<t;a++)s.push(n);return s}(n,"?"),new _e(204,!1);const s=function vi(t){const n=t&&(t[nr]||t[gn]);if(n){const s=function qt(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),n}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new _e(204,!1)}function Ms(t,n,s=!1){return{factory:t,value:n,multi:s?[]:void 0}}function Ig(t){return null!==t&&"object"==typeof t&&tp in t}function xs(t){return"function"==typeof t}let Er=(()=>{class t{static create(s,a){var u;if(Array.isArray(s))return _i({name:""},a,s,"");{const c=null!==(u=s.name)&&void 0!==u?u:"";return _i({name:c},s.parent,s.providers,c)}}}return t.THROW_IF_NOT_FOUND=oo,t.NULL=new At,t.\u0275prov=jt({token:t,providedIn:"any",factory:()=>Ht(bf)}),t.__NG_ELEMENT_ID__=-1,t})();function Lg(t,n){Zs(Pd(t)[1],Vt())}let Vr=null;function Ea(){if(!Vr){const t=S.Symbol;if(t&&t.iterator)Vr=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<n.length;++s){const a=n[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Vr=a)}}}return Vr}function Hi(t){return!!wa(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ea()in t)}function wa(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function rn(t,n,s){return!Object.is(t[n],s)&&(t[n]=s,!0)}function wt(t,n,s,a){const u=se();return rn(u,os(),n)&&(st(),mi(Lt(),u,t,n,s,a)),wt}function Rs(t,n,s,a,u,c){const p=function fr(t,n,s,a){const u=rn(t,n,s);return rn(t,n+1,a)||u}(t,function Rr(){return je.lFrame.bindingIndex}(),s,u);return function Pr(t){const n=je.lFrame,s=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,s}(2),p?n+oe(s)+a+oe(u)+c:$e}function Ff(t,n,s,a,u,c,f,p){const _=se(),C=st(),w=t+20,I=C.firstCreatePass?function ly(t,n,s,a,u,c,f,p,_){const C=n.consts,w=pa(n,t,4,f||null,ii(C,p));vt(n,s,w,ii(C,_)),Zs(n,w);const I=w.tViews=fc(2,w,a,u,c,n.directiveRegistry,n.pipeRegistry,null,n.schemas,C);return null!==n.queries&&(n.queries.template(n,w),I.queries=n.queries.embeddedTView(w)),w}(w,C,_,n,s,a,u,c,f):C.data[w];or(I,!1);const M=_[11].createComment("");ec(C,_,M,I),nn(M,_),Xe(_,_[w]=Cg(M,_,M,I)),Xi(I)&&hf(C,_,I),null!=f&&Nl(_,I,p)}function Yg(t){return function ri(t,n){return t[n]}(function cd(){return je.lFrame.contextLView}(),20+t)}function Sa(t,n=Oe.Default){const s=se();return null===s?Ht(t,n):no(Vt(),s,Q(t),n)}function im(){throw new Error("invalid")}function Wf(t,n,s){const a=se();return rn(a,os(),n)&&function qn(t,n,s,a,u,c,f,p){const _=yn(n,s);let w,C=n.inputs;!p&&null!=C&&(w=C[a])?(wf(t,s,w,a,u),Fo(n)&&function hc(t,n){const s=Xt(n,t);16&s[2]||(s[2]|=64)}(s,n.index)):3&n.type&&(a=function mg(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=f?f(u,n.value||"",a):u,kt(c)?c.setProperty(_,a,u):ol(a)||(_.setProperty?_.setProperty(a,u):_[a]=u))}(st(),Lt(),a,t,n,a[11],s,!1),Wf}function Gf(t,n,s,a,u){const f=u?"class":"style";wf(t,s,n.inputs[f],f,a)}function Kl(t,n,s,a){const u=se(),c=st(),f=20+t,p=u[11],_=u[f]=jd(p,n,function Km(){return je.lFrame.currentNamespace}()),C=c.firstCreatePass?function zf(t,n,s,a,u,c,f){const p=n.consts,C=pa(n,t,2,u,ii(p,c));return vt(n,s,C,ii(p,f)),null!==C.attrs&&kl(C,C.attrs,!1),null!==C.mergedAttrs&&kl(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(f,c,u,0,n,s,a):c.data[f];or(C,!0);const w=C.mergedAttrs;null!==w&&cs(p,_,w);const I=C.classes;null!==I&&Kd(p,_,I);const M=C.styles;return null!==M&&Gp(p,_,M),64!=(64&C.flags)&&ec(c,u,_,C),0===function wu(){return je.lFrame.elementDepthCount}()&&nn(_,u),function zs(){je.lFrame.elementDepthCount++}(),Xi(C)&&(hf(c,u,C),function cg(t,n,s){if(Va(n)){const u=n.directiveEnd;for(let c=n.directiveStart;c<u;c++){const f=t.data[c];f.contentQueries&&f.contentQueries(1,s[c],c)}}}(c,C,u)),null!==a&&Nl(u,C),Kl}function Ac(){let t=Vt();qs()?function tl(){je.lFrame.isParent=!1}():(t=t.parent,or(t,!1));const n=t;!function Ys(){je.lFrame.elementDepthCount--}();const s=st();return s.firstCreatePass&&(Zs(s,t),Va(t)&&s.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Js(t){return 0!=(16&t.flags)}(n)&&Gf(s,n,se(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function gd(t){return 0!=(32&t.flags)}(n)&&Gf(s,n,se(),n.stylesWithoutHost,!1),Ac}function Yf(t,n,s,a){return Kl(t,n,s,a),Ac(),Yf}function Zl(){return se()}function Aa(t){return!!t&&"function"==typeof t.then}function sm(t){return!!t&&"function"==typeof t.subscribe}const om=sm;function qf(t,n,s,a){const u=se(),c=st(),f=Vt();return function am(t,n,s,a,u,c,f,p){const _=Xi(a),w=t.firstCreatePass&&wg(t),I=n[8],M=vc(n);let U=!0;if(3&a.type||p){const Ce=yn(a,n),Se=p?p(Ce):Ce,te=M.length,Ve=p?ut=>p(Et(ut[a.index])):a.index;if(kt(s)){let ut=null;if(!p&&_&&(ut=function Zf(t,n,s,a){const u=t.cleanup;if(null!=u)for(let c=0;c<u.length-1;c+=2){const f=u[c];if(f===s&&u[c+1]===a){const p=n[7],_=u[c+2];return p.length>_?p[_]:null}"string"==typeof f&&(c+=2)}return null}(t,n,u,a.index)),null!==ut)(ut.__ngLastListenerFn__||ut).__ngNextListenerFn__=c,ut.__ngLastListenerFn__=c,U=!1;else{c=Io(a,n,I,c,!1);const bt=s.listen(Se,u,c);M.push(c,bt),w&&w.push(u,Ve,te,te+1)}}else c=Io(a,n,I,c,!0),Se.addEventListener(u,c,f),M.push(c),w&&w.push(u,Ve,te,f)}else c=Io(a,n,I,c,!1);const X=a.outputs;let fe;if(U&&null!==X&&(fe=X[u])){const Ce=fe.length;if(Ce)for(let Se=0;Se<Ce;Se+=2){const qr=n[fe[Se]][fe[Se+1]].subscribe(c),fu=M.length;M.push(c,qr),w&&w.push(u,a.index,fu,-(fu+1))}}}(c,u,u[11],f,t,n,!!s,a),qf}function Wi(t,n,s,a){try{return!1!==s(a)}catch(u){return Ef(t,u),!1}}function Io(t,n,s,a,u){return function c(f){if(f===Function)return a;const p=2&t.flags?Xt(t.index,n):n;0==(32&n[2])&&ga(p);let _=Wi(n,0,a,f),C=c.__ngNextListenerFn__;for(;C;)_=Wi(n,0,C,f)&&_,C=C.__ngNextListenerFn__;return u&&!1===_&&(f.preventDefault(),f.returnValue=!1),_}}function pm(t,n=""){const s=se(),a=st(),u=t+20,c=a.firstCreatePass?pa(a,u,1,n,null):a.data[u],f=s[u]=function Ml(t,n){return kt(t)?t.createText(n):t.createTextNode(n)}(s[11],n);ec(a,s,f,c),or(c,!1)}function nu(t,n,s){const a=se(),u=function yi(t,n,s,a){return rn(t,os(),s)?n+oe(s)+a:$e}(a,t,n,s);return u!==$e&&Kn(a,Cn(),u),nu}function dh(t,n,s,a,u){const c=se(),f=Rs(c,t,n,s,a,u);return f!==$e&&Kn(c,Cn(),f),dh}const ks=void 0;var Tm=["en",[["a","p"],["AM","PM"],ks],[["AM","PM"],ks,ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ks,"{1} 'at' {0}",ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Im(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let zi={};function ou(t){const n=function Mm(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=zc(n);if(s)return s;const a=n.split("-")[0];if(s=zc(a),s)return s;if("en"===a)return Tm;throw new Error(`Missing locale data for the locale "${t}".`)}function Am(t){return ou(t)[Ue.PluralCase]}function zc(t){return t in zi||(zi[t]=S.ng&&S.ng.common&&S.ng.common.locales&&S.ng.common.locales[t]),zi[t]}var Ue=(()=>((Ue=Ue||{})[Ue.LocaleId=0]="LocaleId",Ue[Ue.DayPeriodsFormat=1]="DayPeriodsFormat",Ue[Ue.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ue[Ue.DaysFormat=3]="DaysFormat",Ue[Ue.DaysStandalone=4]="DaysStandalone",Ue[Ue.MonthsFormat=5]="MonthsFormat",Ue[Ue.MonthsStandalone=6]="MonthsStandalone",Ue[Ue.Eras=7]="Eras",Ue[Ue.FirstDayOfWeek=8]="FirstDayOfWeek",Ue[Ue.WeekendRange=9]="WeekendRange",Ue[Ue.DateFormat=10]="DateFormat",Ue[Ue.TimeFormat=11]="TimeFormat",Ue[Ue.DateTimeFormat=12]="DateTimeFormat",Ue[Ue.NumberSymbols=13]="NumberSymbols",Ue[Ue.NumberFormats=14]="NumberFormats",Ue[Ue.CurrencyCode=15]="CurrencyCode",Ue[Ue.CurrencySymbol=16]="CurrencySymbol",Ue[Ue.CurrencyName=17]="CurrencyName",Ue[Ue.Currencies=18]="Currencies",Ue[Ue.Directionality=19]="Directionality",Ue[Ue.PluralCase=20]="PluralCase",Ue[Ue.ExtraData=21]="ExtraData",Ue))();const Nn="en-US";let Na=Nn;class _t{}class uu{resolveComponentFactory(n){throw function Xn(t){const n=Error(`No component factory found for ${ge(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let cu=(()=>{class t{}return t.NULL=new uu,t})();function CE(){return ed(Vt(),se())}function ed(t,n){return new bh(yn(t,n))}let bh=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=CE,t})();function DE(t){return t instanceof bh?t.nativeElement:t}class XC{}let EE=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function bE(){const t=se(),s=Xt(Vt().index,t);return function wE(t){return t[11]}(xr(s)?s:t)}(),t})(),IE=(()=>{class t{}return t.\u0275prov=jt({token:t,providedIn:"root",factory:()=>null}),t})();class eD{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const tD=new eD("13.2.7"),Ev={};function Bm(t,n,s,a,u=!1){for(;null!==s;){const c=n[s.index];if(null!==c&&a.push(Et(c)),Nt(c))for(let p=10;p<c.length;p++){const _=c[p],C=_[1].firstChild;null!==C&&Bm(_[1],_,C,a)}const f=s.type;if(8&f)Bm(t,n,s.child,a);else if(32&f){const p=Qu(s,n);let _;for(;_=p();)a.push(_)}else if(16&f){const p=Hp(n,s);if(Array.isArray(p))a.push(...p);else{const _=Al(n[16]);Bm(_[1],_,p,a,!0)}}s=u?s.projectionNext:s.next}return a}class Ih{constructor(n,s){this._lView=n,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,s=n[1];return Bm(s,n,s.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Nt(n)){const s=n[8],a=s?s.indexOf(this):-1;a>-1&&(Bi(n,a),na(s,a))}this._attachedToViewContainer=!1}Vd(this._lView[1],this._lView)}onDestroy(n){mf(this._lView[1],this._lView,null,n)}markForCheck(){ga(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ur(t,n,s){Ho(!0);try{Dr(t,n,s)}finally{Ho(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new _e(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function M_(t,n){da(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _e(902,"");this._appRef=n}}class TE extends Ih{constructor(n){super(n),this._view=n}detectChanges(){Fl(this._view)}checkNoChanges(){!function X_(t){Ho(!0);try{Fl(t)}finally{Ho(!1)}}(this._view)}get context(){return null}}class nD extends cu{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const s=Jt(n);return new wv(s,this.ngModule)}}function rD(t){const n=[];for(let s in t)t.hasOwnProperty(s)&&n.push({propName:t[s],templateName:s});return n}class wv extends _t{constructor(n,s){super(),this.componentDef=n,this.ngModule=s,this.componentType=n.type,this.selector=function rc(t){return t.map(F_).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return rD(this.componentDef.inputs)}get outputs(){return rD(this.componentDef.outputs)}create(n,s,a,u){const c=(u=u||this.ngModule)?function AE(t,n){return{get:(s,a,u)=>{const c=t.get(s,Ev,u);return c!==Ev||a===Ev?c:n.get(s,a,u)}}}(n,u.injector):n,f=c.get(XC,Du),p=c.get(IE,null),_=f.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",w=a?function gf(t,n,s){if(kt(t))return t.selectRootElement(n,s===Qt.ShadowDom);let a="string"==typeof n?t.querySelector(n):n;return a.textContent="",a}(_,a,this.componentDef.encapsulation):jd(f.createRenderer(null,this.componentDef),C,function SE(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(C)),I=this.componentDef.onPush?576:528,M=function kg(t,n){return{components:[],scheduler:t||Ap,clean:Cf,playerHandler:n||null,flags:0}}(),U=fc(0,null,null,1,0,null,null,null,null,null),X=go(null,U,M,I,null,null,f,_,p,c);let fe,Ce;Go(X);try{const Se=function Ec(t,n,s,a,u,c){const f=s[1];s[20]=t;const _=pa(f,20,2,"#host",null),C=_.mergedAttrs=n.hostAttrs;null!==C&&(kl(_,C,!0),null!==t&&(cs(u,t,C),null!==_.classes&&Kd(u,t,_.classes),null!==_.styles&&Gp(u,t,_.styles)));const w=a.createRenderer(t,n),I=go(s,pf(n),null,n.onPush?64:16,s[20],_,a,w,c||null,null);return f.firstCreatePass&&(li(Ai(_,s),f,n.type),xn(f,_),dr(_,s.length,1)),Xe(s,I),s[20]=I}(w,this.componentDef,X,f,_);if(w)if(a)cs(_,w,["ng-version",tD.full]);else{const{attrs:te,classes:Ve}=function k_(t){const n=[],s=[];let a=1,u=2;for(;a<t.length;){let c=t[a];if("string"==typeof c)2===u?""!==c&&n.push(c,t[++a]):8===u&&s.push(c);else{if(!Dn(u))break;u=c}a++}return{attrs:n,classes:s}}(this.componentDef.selectors[0]);te&&cs(_,w,te),Ve&&Ve.length>0&&Kd(_,w,Ve.join(" "))}if(Ce=ss(U,20),void 0!==s){const te=Ce.projection=[];for(let Ve=0;Ve<this.ngContentSelectors.length;Ve++){const ut=s[Ve];te.push(null!=ut?Array.from(ut):null)}}fe=function Fg(t,n,s,a,u){const c=s[1],f=function As(t,n,s){const a=Vt();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),vg(t,a,n,Vi(t,n,1,null),s));const u=Mi(n,t,a.directiveStart,a);nn(u,n);const c=yn(a,n);return c&&nn(c,n),u}(c,s,n);if(a.components.push(f),t[8]=f,u&&u.forEach(_=>_(f,n)),n.contentQueries){const _=Vt();n.contentQueries(1,f,_.directiveStart)}const p=Vt();return!c.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Si(p.index),pc(s[1],p,0,p.directiveStart,p.directiveEnd,n),Ot(n,f)),f}(Se,this.componentDef,X,M,[Lg]),gi(U,X,null)}finally{zo()}return new xE(this.componentType,fe,ed(Ce,X),X,Ce)}}class xE extends class Ye{}{constructor(n,s,a,u,c){super(),this.location=a,this._rootLView=u,this._tNode=c,this.instance=s,this.hostView=this.changeDetectorRef=new TE(u),this.componentType=n}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class td{}class iD{}const nd=new Map;class aD extends td{constructor(n,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nD(this);const a=Hn(n);this._bootstrapComponents=Br(a.bootstrap),this._r3Injector=ma(n,s,[{provide:td,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],ge(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,s=Er.THROW_IF_NOT_FOUND,a=Oe.Default){return n===Er||n===td||n===bf?this:this._r3Injector.get(n,s,a)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class bv extends iD{constructor(n){super(),this.moduleType=n,null!==Hn(n)&&function PE(t){const n=new Set;!function s(a){const u=Hn(a,!0),c=u.id;null!==c&&(function sD(t,n,s){if(n&&n!==s)throw new Error(`Duplicate module registered for ${t} - ${ge(n)} vs ${ge(n.name)}`)}(c,nd.get(c),a),nd.set(c,a));const f=Br(u.imports);for(const p of f)n.has(p)||(n.add(p),s(p))}(t)}(n)}create(n){return new aD(this.moduleType,n)}}function Iv(t){return n=>{setTimeout(t,void 0,n)}}const Ls=class ZE extends ve.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,s,a){var u,c,f;let p=n,_=s||(()=>null),C=a;if(n&&"object"==typeof n){const I=n;p=null===(u=I.next)||void 0===u?void 0:u.bind(I),_=null===(c=I.error)||void 0===c?void 0:c.bind(I),C=null===(f=I.complete)||void 0===f?void 0:f.bind(I)}this.__isAsync&&(_=Iv(_),p&&(p=Iv(p)),C&&(C=Iv(C)));const w=super.subscribe({next:p,error:_,complete:C});return n instanceof Me.w0&&n.add(w),w}};function QE(){return this._results[Ea()]()}class Tv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ea(),a=Tv.prototype;a[s]||(a[s]=QE)}get changes(){return this._changes||(this._changes=new Ls)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,s){return this._results.reduce(n,s)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,s){const a=this;a.dirty=!1;const u=lr(n);(this._changesDetected=!function vd(t,n,s){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],c=n[a];if(s&&(u=s(u),c=s(c)),c!==u)return!1}return!0}(a._results,u,s))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ah=(()=>{class t{}return t.__NG_ELEMENT_ID__=ew,t})();const JE=Ah,XE=class extends JE{constructor(n,s,a){super(),this._declarationLView=n,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(n){const s=this._declarationTContainer.tViews,a=go(this._declarationLView,s,n,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(a[19]=c.createEmbeddedView(s)),gi(s,a,n),new Ih(a)}};function ew(){return jm(Vt(),se())}function jm(t,n){return 4&t.type?new XE(n,t,ed(t,n)):null}let Um=(()=>{class t{}return t.__NG_ELEMENT_ID__=tw,t})();function tw(){return gD(Vt(),se())}const nw=Um,hD=class extends nw{constructor(n,s,a){super(),this._lContainer=n,this._hostTNode=s,this._hostLView=a}get element(){return ed(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ko(this._hostTNode,this._hostLView);if(In(n)){const s=fs(n,this._hostLView),a=ds(n);return new Gn(s[1].data[a+8],s)}return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const s=pD(this._lContainer);return null!==s&&s[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,s,a){const u=n.createEmbeddedView(s||{});return this.insert(u,a),u}createComponent(n,s,a,u,c){const f=n&&!function ta(t){return"function"==typeof t}(n);let p;if(f)p=s;else{const I=s||{};p=I.index,a=I.injector,u=I.projectableNodes,c=I.ngModuleRef}const _=f?n:new wv(Jt(n)),C=a||this.parentInjector;if(!c&&null==_.ngModule){const M=(f?C:this.parentInjector).get(td,null);M&&(c=M)}const w=_.create(C,u,void 0,c);return this.insert(w.hostView,p),w}insert(n,s){const a=n._lView,u=a[1];if(function en(t){return Nt(t[3])}(a)){const w=this.indexOf(n);if(-1!==w)this.detach(w);else{const I=a[3],M=new hD(I,I[6],I[3]);M.detach(M.indexOf(n))}}const c=this._adjustIndex(s),f=this._lContainer;!function Fp(t,n,s,a){const u=10+a,c=s.length;a>0&&(s[u-1][4]=n),a<c-10?(n[4]=s[u],Je(s,10+a,n)):(s.push(n),n[4]=null),n[3]=s;const f=n[17];null!==f&&s!==f&&function Ud(t,n){const s=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===s?t[9]=[n]:s.push(n)}(f,n);const p=n[19];null!==p&&p.insertView(t),n[2]|=128}(u,a,f,c);const p=Es(c,f),_=a[11],C=Xu(_,f[7]);return null!==C&&function Np(t,n,s,a,u,c){a[0]=u,a[6]=n,da(t,a,s,1,u,c)}(u,f[6],_,a,C,p),n.attachToViewContainerRef(),Je(Sv(f),c,n),n}move(n,s){return this.insert(n,s)}indexOf(n){const s=pD(this._lContainer);return null!==s?s.indexOf(n):-1}remove(n){const s=this._adjustIndex(n,-1),a=Bi(this._lContainer,s);a&&(na(Sv(this._lContainer),s),Vd(a[1],a))}detach(n){const s=this._adjustIndex(n,-1),a=Bi(this._lContainer,s);return a&&null!=na(Sv(this._lContainer),s)?new Ih(a):null}_adjustIndex(n,s=0){return null==n?this.length+s:n}};function pD(t){return t[8]}function Sv(t){return t[8]||(t[8]=[])}function gD(t,n){let s;const a=n[t.index];if(Nt(a))s=a;else{let u;if(8&t.type)u=Et(a);else{const c=n[11];u=c.createComment("");const f=yn(t,n);ho(c,Xu(c,f),u,function Wd(t,n){return kt(t)?t.nextSibling(n):n.nextSibling}(c,f),!1)}n[t.index]=s=Cg(a,n,u,t),Xe(n,s)}return new hD(s,t,n)}class Av{constructor(n){this.queryList=n,this.matches=null}clone(){return new Av(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const s=n.queries;if(null!==s){const a=null!==n.contentQueries?n.contentQueries[0]:s.length,u=[];for(let c=0;c<a;c++){const f=s.getByIndex(c);u.push(this.queries[f.indexInDeclarationView].clone())}return new Mv(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let s=0;s<this.queries.length;s++)null!==wD(n,s).matches&&this.queries[s].setDirty()}}class mD{constructor(n,s,a=null){this.predicate=n,this.flags=s,this.read=a}}class xv{constructor(n=[]){this.queries=n}elementStart(n,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(n,s)}elementEnd(n){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(n)}embeddedTView(n){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,c=this.getByIndex(a).embeddedTView(n,u);c&&(c.indexInDeclarationView=a,null!==s?s.push(c):s=[c])}return null!==s?new xv(s):null}template(n,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(n,s)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Rv{constructor(n,s=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(n,s){this.isApplyingToNode(s)&&this.matchTNode(n,s)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,s){this.elementStart(n,s)}embeddedTView(n,s){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,s),new Rv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=n.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(n,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const c=a[u];this.matchTNodeWithReadOption(n,s,sw(s,c)),this.matchTNodeWithReadOption(n,s,Wn(s,n,c,!1,!1))}else a===Ah?4&s.type&&this.matchTNodeWithReadOption(n,s,-1):this.matchTNodeWithReadOption(n,s,Wn(s,n,a,!1,!1))}matchTNodeWithReadOption(n,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===bh||u===Um||u===Ah&&4&s.type)this.addMatch(s.index,-2);else{const c=Wn(s,n,u,!1,!1);null!==c&&this.addMatch(s.index,c)}else this.addMatch(s.index,a)}}addMatch(n,s){null===this.matches?this.matches=[n,s]:this.matches.push(n,s)}}function sw(t,n){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===n)return s[a+1];return null}function aw(t,n,s,a){return-1===s?function ow(t,n){return 11&t.type?ed(t,n):4&t.type?jm(t,n):null}(n,t):-2===s?function lw(t,n,s){return s===bh?ed(n,t):s===Ah?jm(n,t):s===Um?gD(n,t):void 0}(t,n,a):Mi(t,t[1],s,n)}function _D(t,n,s,a){const u=n[19].queries[a];if(null===u.matches){const c=t.data,f=s.matches,p=[];for(let _=0;_<f.length;_+=2){const C=f[_];p.push(C<0?null:aw(n,c[C],f[_+1],s.metadata.read))}u.matches=p}return u.matches}function Pv(t,n,s,a){const u=t.queries.getByIndex(s),c=u.matches;if(null!==c){const f=_D(t,n,u,s);for(let p=0;p<c.length;p+=2){const _=c[p];if(_>0)a.push(f[p/2]);else{const C=c[p+1],w=n[-_];for(let I=10;I<w.length;I++){const M=w[I];M[17]===M[3]&&Pv(M[1],M,C,a)}if(null!==w[9]){const I=w[9];for(let M=0;M<I.length;M++){const U=I[M];Pv(U[1],U,C,a)}}}}}return a}function yD(t){const n=se(),s=st(),a=fd();as(a+1);const u=wD(s,a);if(t.dirty&&Gs(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const c=u.crossesNgTemplate?Pv(s,n,a,[]):_D(s,n,u,a);t.reset(c,DE),t.notifyOnChanges()}return!0}return!1}function vD(t,n,s,a){const u=st();if(u.firstCreatePass){const c=Vt();(function ED(t,n,s){null===t.queries&&(t.queries=new xv),t.queries.track(new Rv(n,s))})(u,new mD(n,s,a),c.index),function dw(t,n){const s=t.contentQueries||(t.contentQueries=[]);n!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,n)}(u,t),2==(2&s)&&(u.staticContentQueries=!0)}!function DD(t,n,s){const a=new Tv(4==(4&s));mf(t,n,a,a.destroy),null===n[19]&&(n[19]=new Mv),n[19].queries.push(new Av(a))}(u,se(),s)}function CD(){return function cw(t,n){return t[19].queries[n].queryList}(se(),fd())}function wD(t,n){return t.queries.getByIndex(n)}function $m(...t){}const UD=new nt("Application Initializer");let Bv=(()=>{class t{constructor(s){this.appInits=s,this.resolve=$m,this.reject=$m,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const c=this.appInits[u]();if(Aa(c))s.push(c);else if(om(c)){const f=new Promise((p,_)=>{c.subscribe({complete:p,error:_})});s.push(f)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Ht(UD,8))},t.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const VD=new nt("AppId",{providedIn:"root",factory:function HD(){return`${jv()}${jv()}${jv()}`}});function jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $D=new nt("Platform Initializer"),WD=new nt("Platform ID"),GD=new nt("appBootstrapListener");let zD=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=jt({token:t,factory:t.\u0275fac}),t})();const Uv=new nt("LocaleId",{providedIn:"root",factory:()=>Hu(Uv,Oe.Optional|Oe.SkipSelf)||function Mw(){return"undefined"!=typeof $localize&&$localize.locale||Nn}()}),xw=new nt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rw{constructor(n,s){this.ngModuleFactory=n,this.componentFactories=s}}let Pw=(()=>{class t{compileModuleSync(s){return new bv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),c=Br(Hn(s).declarations).reduce((f,p)=>{const _=Jt(p);return _&&f.push(new wv(_)),f},[]);return new Rw(a,c)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ow=(()=>Promise.resolve(0))();function Vv(t){"undefined"==typeof Zone?Ow.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Yi{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ls(!1),this.onMicrotaskEmpty=new Ls(!1),this.onStable=new Ls(!1),this.onError=new Ls(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function Fw(){let t=S.requestAnimationFrame,n=S.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Bw(t){const n=()=>{!function Lw(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(S,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$v(t),t.isCheckStableRunning=!0,Hv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$v(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,c,f,p)=>{try{return YD(t),s.invokeTask(u,c,f,p)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||t.shouldCoalesceRunChangeDetection)&&n(),qD(t)}},onInvoke:(s,a,u,c,f,p,_)=>{try{return YD(t),s.invoke(u,c,f,p,_)}finally{t.shouldCoalesceRunChangeDetection&&n(),qD(t)}},onHasTask:(s,a,u,c)=>{s.hasTask(u,c),a===u&&("microTask"==c.change?(t._hasPendingMicrotasks=c.microTask,$v(t),Hv(t)):"macroTask"==c.change&&(t.hasPendingMacrotasks=c.macroTask))},onHandleError:(s,a,u,c)=>(s.handleError(u,c),t.runOutsideAngular(()=>t.onError.emit(c)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,s,a){return this._inner.run(n,s,a)}runTask(n,s,a,u){const c=this._inner,f=c.scheduleEventTask("NgZoneEvent: "+u,n,kw,$m,$m);try{return c.runTask(f,s,a)}finally{c.cancelTask(f)}}runGuarded(n,s,a){return this._inner.runGuarded(n,s,a)}runOutsideAngular(n){return this._outer.run(n)}}const kw={};function Hv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $v(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function YD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qD(t){t._nesting--,Hv(t)}class jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ls,this.onMicrotaskEmpty=new Ls,this.onStable=new Ls,this.onError=new Ls}run(n,s,a){return n.apply(s,a)}runGuarded(n,s,a){return n.apply(s,a)}runOutsideAngular(n){return n()}runTask(n,s,a,u){return n.apply(s,a)}}let KD=(()=>{class t{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let c=-1;a&&a>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(f=>f.timeoutId!==c),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:c,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,u){return[]}}return t.\u0275fac=function(s){return new(s||t)(Ht(Yi))},t.\u0275prov=jt({token:t,factory:t.\u0275fac}),t})(),ZD=(()=>{class t{constructor(){this._applications=new Map,Wv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Wv.findTestabilityInTree(this,s,a)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=jt({token:t,factory:t.\u0275fac}),t})();class Uw{addToWindow(n){}findTestabilityInTree(n,s,a){return null}}function Vw(t){Wv=t}let qi,Wv=new Uw;const QD=new nt("AllowMultipleToken");class Ww{constructor(n,s){this.name=n,this.token=s}}function JD(t,n,s=[]){const a=`Platform: ${n}`,u=new nt(a);return(c=[])=>{let f=XD();if(!f||f.injector.get(QD,!1))if(t)t(s.concat(c).concat({provide:u,useValue:!0}));else{const p=s.concat(c).concat({provide:u,useValue:!0},{provide:If,useValue:"platform"});!function Gw(t){if(qi&&!qi.destroyed&&!qi.injector.get(QD,!1))throw new _e(400,"");qi=t.get(eE);const n=t.get($D,null);n&&n.forEach(s=>s())}(Er.create({providers:p,name:a}))}return function zw(t){const n=XD();if(!n)throw new _e(401,"");return n}()}}function XD(){return qi&&!qi.destroyed?qi:null}let eE=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const p=function Yw(t,n){let s;return s="noop"===t?new jw:("zone.js"===t?void 0:t)||new Yi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),_=[{provide:Yi,useValue:p}];return p.run(()=>{const C=Er.create({providers:_,parent:this.injector,name:s.moduleType.name}),w=s.create(C),I=w.injector.get(Tl,null);if(!I)throw new _e(402,"");return p.runOutsideAngular(()=>{const M=p.onError.subscribe({next:U=>{I.handleError(U)}});w.onDestroy(()=>{zv(this._modules,w),M.unsubscribe()})}),function qw(t,n,s){try{const a=s();return Aa(a)?a.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw n.runOutsideAngular(()=>t.handleError(a)),a}}(I,p,()=>{const M=w.injector.get(Bv);return M.runInitializers(),M.donePromise.then(()=>(function FC(t){gt(t,"Expected localeId to be defined"),"string"==typeof t&&(Na=t.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Uv,Nn)||Nn),this._moduleDoBootstrap(w),w))})})}bootstrapModule(s,a=[]){const u=tE({},a);return function Hw(t,n,s){const a=new bv(s);return Promise.resolve(a)}(0,0,s).then(c=>this.bootstrapModuleFactory(c,u))}_moduleDoBootstrap(s){const a=s.injector.get(Gv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new _e(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Ht(Er))},t.\u0275prov=jt({token:t,factory:t.\u0275fac}),t})();function tE(t,n){return Array.isArray(n)?n.reduce(tE,t):Object.assign(Object.assign({},t),n)}let Gv=(()=>{class t{constructor(s,a,u,c,f){this._zone=s,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new De.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new De.y(C=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{w.unsubscribe(),I.unsubscribe()}});this.isStable=function Re(...t){const n=(0,Z.yG)(t),s=(0,Z._6)(t,1/0),a=t;return a.length?1===a.length?(0,V.Xf)(a[0]):(0,v.J)(s)((0,he.D)(a,n)):ae.E}(p,_.pipe(function ie(t={}){const{connector:n=(()=>new ve.x),resetOnError:s=!0,resetOnComplete:a=!0,resetOnRefCountZero:u=!0}=t;return c=>{let f,p,_,C=0,w=!1,I=!1;const M=()=>{null==p||p.unsubscribe(),p=void 0},U=()=>{M(),f=_=void 0,w=I=!1},X=()=>{const fe=f;U(),null==fe||fe.unsubscribe()};return(0,L.e)((fe,Ce)=>{C++,!I&&!w&&M();const Se=_=null!=_?_:n();Ce.add(()=>{C--,0===C&&!I&&!w&&(p=Ae(X,u))}),Se.subscribe(Ce),!f&&C>0&&(f=new B.Hp({next:te=>Se.next(te),error:te=>{I=!0,M(),p=Ae(U,s,te),Se.error(te)},complete:()=>{w=!0,M(),p=Ae(U,a),Se.complete()}}),(0,V.Xf)(fe).subscribe(f))})(c)}}()))}bootstrap(s,a){if(!this._initStatus.done)throw new _e(405,"");let u;u=s instanceof _t?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(u.componentType);const c=function $w(t){return t.isBoundToModule}(u)?void 0:this._injector.get(td),p=u.create(Er.NULL,[],a||u.selector,c),_=p.location.nativeElement,C=p.injector.get(KD,null),w=C&&p.injector.get(ZD);return C&&w&&w.registerApplication(_,C),p.onDestroy(()=>{this.detachView(p.hostView),zv(this.components,p),w&&w.unregisterApplication(_)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new _e(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;zv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(GD,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(s){return new(s||t)(Ht(Yi),Ht(Er),Ht(Tl),Ht(cu),Ht(Bv))},t.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function zv(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}let rE=!0,iE=!1;function Zw(){return iE=!0,rE}function Qw(){if(iE)throw new Error("Cannot enable prod mode after platform setup.");rE=!1}let Jw=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xw,t})();function Xw(t){return function e0(t,n,s){if(Fo(t)&&!s){const a=Xt(t.index,n);return new Ih(a,a)}return 47&t.type?new Ih(n[16],n):null}(Vt(),se(),16==(16&t))}class lE{constructor(){}supports(n){return Hi(n)}create(n){return new a0(n)}}const o0=(t,n)=>n;class a0{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||o0}forEachItem(n){let s;for(s=this._itHead;null!==s;s=s._next)n(s)}forEachOperation(n){let s=this._itHead,a=this._removalsHead,u=0,c=null;for(;s||a;){const f=!a||s&&s.currentIndex<cE(a,u,c)?s:a,p=cE(f,u,c),_=f.currentIndex;if(f===a)u--,a=a._nextRemoved;else if(s=s._next,null==f.previousIndex)u++;else{c||(c=[]);const C=p-u,w=_-u;if(C!=w){for(let M=0;M<C;M++){const U=M<c.length?c[M]:c[M]=0,X=U+M;w<=X&&X<C&&(c[M]=U+1)}c[f.previousIndex]=w-C}}p!==_&&n(f,p,_)}}forEachPreviousItem(n){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachMovedItem(n){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}forEachIdentityChange(n){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)n(s)}diff(n){if(null==n&&(n=[]),!Hi(n))throw new _e(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,c,f,s=this._itHead,a=!1;if(Array.isArray(n)){this.length=n.length;for(let p=0;p<this.length;p++)c=n[p],f=this._trackByFn(p,c),null!==s&&Object.is(s.trackById,f)?(a&&(s=this._verifyReinsertion(s,c,f,p)),Object.is(s.item,c)||this._addIdentityChange(s,c)):(s=this._mismatch(s,c,f,p),a=!0),s=s._next}else u=0,function ay(t,n){if(Array.isArray(t))for(let s=0;s<t.length;s++)n(t[s]);else{const s=t[Ea()]();let a;for(;!(a=s.next()).done;)n(a.value)}}(n,p=>{f=this._trackByFn(u,p),null!==s&&Object.is(s.trackById,f)?(a&&(s=this._verifyReinsertion(s,p,f,u)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,f,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,s,a,u){let c;return null===n?c=this._itTail:(c=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._reinsertAfter(n,c,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._moveAfter(n,c,u)):n=this._addAfter(new l0(s,a),c,u),n}_verifyReinsertion(n,s,a,u){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==c?n=this._reinsertAfter(c,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const s=n._next;this._addToRemovals(this._unlink(n)),n=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,c=n._nextRemoved;return null===u?this._removalsHead=c:u._nextRemoved=c,null===c?this._removalsTail=u:c._prevRemoved=u,this._insertAfter(n,s,a),this._addToMoves(n,a),n}_moveAfter(n,s,a){return this._unlink(n),this._insertAfter(n,s,a),this._addToMoves(n,a),n}_addAfter(n,s,a){return this._insertAfter(n,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,s,a){const u=null===s?this._itHead:s._next;return n._next=u,n._prev=s,null===u?this._itTail=n:u._prev=n,null===s?this._itHead=n:s._next=n,null===this._linkedRecords&&(this._linkedRecords=new uE),this._linkedRecords.put(n),n.currentIndex=a,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const s=n._prev,a=n._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,n}_addToMoves(n,s){return n.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,s){return n.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class l0{constructor(n,s){this.item=n,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class u0{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,n))return a;return null}remove(n){const s=n._prevDup,a=n._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class uE{constructor(){this.map=new Map}put(n){const s=n.trackById;let a=this.map.get(s);a||(a=new u0,this.map.set(s,a)),a.add(n)}get(n,s){const u=this.map.get(n);return u?u.get(n,s):null}remove(n){const s=n.trackById;return this.map.get(s).remove(n)&&this.map.delete(s),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cE(t,n,s){const a=t.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+n+u}class dE{constructor(){}supports(n){return n instanceof Map||wa(n)}create(){return new c0}}class c0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let s;for(s=this._mapHead;null!==s;s=s._next)n(s)}forEachPreviousItem(n){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)n(s)}forEachChangedItem(n){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}diff(n){if(n){if(!(n instanceof Map||wa(n)))throw new _e(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(n,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const c=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,c)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,s){if(n){const a=n._prev;return s._next=n,s._prev=a,n._prev=s,a&&(a._next=s),n===this._mapHead&&(this._mapHead=s),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(n,s){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,s);const c=u._prev,f=u._next;return c&&(c._next=f),f&&(f._prev=c),u._next=null,u._prev=null,u}const a=new d0(n);return this._records.set(n,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,s){Object.is(s,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=s,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,s){n instanceof Map?n.forEach(s):Object.keys(n).forEach(a=>s(n[a],a))}}class d0{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fE(){return new Qv([new lE])}let Qv=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||fE()),deps:[[t,new T,new y]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new _e(901,"")}}return t.\u0275prov=jt({token:t,providedIn:"root",factory:fE}),t})();function hE(){return new Jv([new dE])}let Jv=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||hE()),deps:[[t,new T,new y]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new _e(901,"")}}return t.\u0275prov=jt({token:t,providedIn:"root",factory:hE}),t})();const p0=JD(null,"core",[{provide:WD,useValue:"unknown"},{provide:eE,deps:[Er]},{provide:ZD,deps:[]},{provide:zD,deps:[]}]);let g0=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Ht(Gv))},t.\u0275mod=Xr({type:t}),t.\u0275inj=Kr({}),t})()},681:(ke,ce,R)=>{R.r(ce),R.d(ce,{FirebaseError:()=>Z.ZR,SDK_VERSION:()=>jt,_DEFAULT_ENTRY_NAME:()=>xt,_addComponent:()=>Mt,_addOrOverwriteComponent:()=>sn,_apps:()=>It,_clearComponents:()=>lt,_components:()=>wn,_getProvider:()=>gr,_registerComponent:()=>pn,_removeServiceInstance:()=>gt,deleteApp:()=>tr,getApp:()=>Kr,getApps:()=>Vn,initializeApp:()=>ka,onLog:()=>Zr,registerVersion:()=>qt,setLogLevel:()=>nr});var v=R(861),V=R(859),ae=R(877),Z=R(90),he=R(766);class Re{constructor(F){this.container=F}getPlatformInfoString(){return this.container.getProviders().map(P=>{if(function ve(S){const F=S.getComponent();return"VERSION"===(null==F?void 0:F.type)}(P)){const re=P.getImmediate();return`${re.library}/${re.version}`}return null}).filter(P=>P).join(" ")}}const Me="@firebase/app",B=new ae.Yd("@firebase/app"),xt="[DEFAULT]",Ge={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},It=new Map,wn=new Map;function Mt(S,F){try{S.container.addComponent(F)}catch(P){B.debug(`Component ${F.name} failed to register with FirebaseApp ${S.name}`,P)}}function sn(S,F){S.container.addOrOverwriteComponent(F)}function pn(S){const F=S.name;if(wn.has(F))return B.debug(`There were multiple attempts to register component ${F}.`),!1;wn.set(F,S);for(const P of It.values())Mt(P,S);return!0}function gr(S,F){const P=S.container.getProvider("heartbeat").getImmediate({optional:!0});return P&&P.triggerHeartbeat(),S.container.getProvider(F)}function gt(S,F,P=xt){gr(S,F).clearInstance(P)}function lt(){wn.clear()}const er=new Z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hu{constructor(F,P,re){this._isDeleted=!1,this._options=Object.assign({},F),this._config=Object.assign({},P),this._name=P.name,this._automaticDataCollectionEnabled=P.automaticDataCollectionEnabled,this._container=re,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(F){this.checkDestroyed(),this._automaticDataCollectionEnabled=F}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(F){this._isDeleted=F}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const jt="9.9.3";function ka(S,F={}){"object"!=typeof F&&(F={name:F});const P=Object.assign({name:xt,automaticDataCollectionEnabled:!1},F),re=P.name;if("string"!=typeof re||!re)throw er.create("bad-app-name",{appName:String(re)});const le=It.get(re);if(le){if((0,Z.vZ)(S,le.options)&&(0,Z.vZ)(P,le.config))return le;throw er.create("duplicate-app",{appName:re})}const Be=new V.H0(re);for(const mt of wn.values())Be.addComponent(mt);const ft=new hu(S,P,Be);return It.set(re,ft),ft}function Kr(S=xt){const F=It.get(S);if(!F)throw er.create("no-app",{appName:S});return F}function Vn(){return Array.from(It.values())}function tr(S){return vi.apply(this,arguments)}function vi(){return(vi=(0,v.Z)(function*(S){const F=S.name;It.has(F)&&(It.delete(F),yield Promise.all(S.container.getProviders().map(P=>P.delete())),S.isDeleted=!0)})).apply(this,arguments)}function qt(S,F,P){var re;let le=null!==(re=Ge[S])&&void 0!==re?re:S;P&&(le+=`-${P}`);const Be=le.match(/\s|\//),ft=F.match(/\s|\//);if(Be||ft){const mt=[`Unable to register library "${le}" with version "${F}":`];return Be&&mt.push(`library name "${le}" contains illegal characters (whitespace or "/")`),Be&&ft&&mt.push("and"),ft&&mt.push(`version name "${F}" contains illegal characters (whitespace or "/")`),void B.warn(mt.join(" "))}pn(new V.wA(`${le}-version`,()=>({library:le,version:F}),"VERSION"))}function Zr(S,F){if(null!==S&&"function"!=typeof S)throw er.create("invalid-log-argument");(0,ae.Am)(S,F)}function nr(S){(0,ae.Ub)(S)}const Tr="firebase-heartbeat-store";let Oe=null;function Ci(){return Oe||(Oe=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(S,F)=>{0===F&&S.createObjectStore(Tr)}}).catch(S=>{throw er.create("idb-open",{originalErrorMessage:S.message})})),Oe}function Te(){return(Te=(0,v.Z)(function*(S){var F;try{return(yield Ci()).transaction(Tr).objectStore(Tr).get(Gt(S))}catch(P){if(P instanceof Z.ZR)B.warn(P.message);else{const re=er.create("idb-get",{originalErrorMessage:null===(F=P)||void 0===F?void 0:F.message});B.warn(re.message)}}})).apply(this,arguments)}function We(S,F){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,v.Z)(function*(S,F){var P;try{const le=(yield Ci()).transaction(Tr,"readwrite");return yield le.objectStore(Tr).put(F,Gt(S)),le.done}catch(re){if(re instanceof Z.ZR)B.warn(re.message);else{const le=er.create("idb-set",{originalErrorMessage:null===(P=re)||void 0===P?void 0:P.message});B.warn(le.message)}}})).apply(this,arguments)}function Gt(S){return`${S.name}!${S.options.appId}`}class on{constructor(F){this.container=F,this._heartbeatsCache=null;const P=this.container.getProvider("app").getImmediate();this._storage=new Di(P),this._heartbeatsCachePromise=this._storage.read().then(re=>(this._heartbeatsCache=re,re))}triggerHeartbeat(){var F=this;return(0,v.Z)(function*(){const re=F.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),le=Qt();if(null===F._heartbeatsCache&&(F._heartbeatsCache=yield F._heartbeatsCachePromise),F._heartbeatsCache.lastSentHeartbeatDate!==le&&!F._heartbeatsCache.heartbeats.some(Be=>Be.date===le))return F._heartbeatsCache.heartbeats.push({date:le,agent:re}),F._heartbeatsCache.heartbeats=F._heartbeatsCache.heartbeats.filter(Be=>{const ft=new Date(Be.date).valueOf();return Date.now()-ft<=2592e6}),F._storage.overwrite(F._heartbeatsCache)})()}getHeartbeatsHeader(){var F=this;return(0,v.Z)(function*(){if(null===F._heartbeatsCache&&(yield F._heartbeatsCachePromise),null===F._heartbeatsCache||0===F._heartbeatsCache.heartbeats.length)return"";const P=Qt(),{heartbeatsToSend:re,unsentEntries:le}=function Ct(S,F=1024){const P=[];let re=S.slice();for(const le of S){const Be=P.find(ft=>ft.agent===le.agent);if(Be){if(Be.dates.push(le.date),x(P)>F){Be.dates.pop();break}}else if(P.push({agent:le.agent,dates:[le.date]}),x(P)>F){P.pop();break}re=re.slice(1)}return{heartbeatsToSend:P,unsentEntries:re}}(F._heartbeatsCache.heartbeats),Be=(0,Z.L)(JSON.stringify({version:2,heartbeats:re}));return F._heartbeatsCache.lastSentHeartbeatDate=P,le.length>0?(F._heartbeatsCache.heartbeats=le,yield F._storage.overwrite(F._heartbeatsCache)):(F._heartbeatsCache.heartbeats=[],F._storage.overwrite(F._heartbeatsCache)),Be})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Di{constructor(F){this.app=F,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,Z.hl)()&&(0,Z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var F=this;return(0,v.Z)(function*(){return(yield F._canUseIndexedDBPromise)&&(yield function Rt(S){return Te.apply(this,arguments)}(F.app))||{heartbeats:[]}})()}overwrite(F){var P=this;return(0,v.Z)(function*(){var re;if(yield P._canUseIndexedDBPromise){const Be=yield P.read();return We(P.app,{lastSentHeartbeatDate:null!==(re=F.lastSentHeartbeatDate)&&void 0!==re?re:Be.lastSentHeartbeatDate,heartbeats:F.heartbeats})}})()}add(F){var P=this;return(0,v.Z)(function*(){var re;if(yield P._canUseIndexedDBPromise){const Be=yield P.read();return We(P.app,{lastSentHeartbeatDate:null!==(re=F.lastSentHeartbeatDate)&&void 0!==re?re:Be.lastSentHeartbeatDate,heartbeats:[...Be.heartbeats,...F.heartbeats]})}})()}}function x(S){return(0,Z.L)(JSON.stringify({version:2,heartbeats:S})).length}!function N(S){pn(new V.wA("platform-logger",F=>new Re(F),"PRIVATE")),pn(new V.wA("heartbeat",F=>new on(F),"PRIVATE")),qt(Me,"0.7.31",S),qt(Me,"0.7.31","esm2017"),qt("fire-js","")}("")},859:(ke,ce,R)=>{R.d(ce,{wA:()=>ae,H0:()=>Me});var v=R(861),V=R(90);class ae{constructor(B,L,ie){this.name=B,this.instanceFactory=L,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const Z="[DEFAULT]";class he{constructor(B,L){this.name=B,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const L=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(L)){const ie=new V.BH;if(this.instancesDeferred.set(L,ie),this.isInitialized(L)||this.shouldAutoInitialize())try{const Ae=this.getOrInitializeService({instanceIdentifier:L});Ae&&ie.resolve(Ae)}catch(Ae){}}return this.instancesDeferred.get(L).promise}getImmediate(B){var L;const ie=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ae=null!==(L=null==B?void 0:B.optional)&&void 0!==L&&L;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(ne){if(Ae)return null;throw ne}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ve(De){return"EAGER"===De.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(L){}for(const[L,ie]of this.instancesDeferred.entries()){const Ae=this.normalizeInstanceIdentifier(L);try{const ne=this.getOrInitializeService({instanceIdentifier:Ae});ie.resolve(ne)}catch(ne){}}}}clearInstance(B=Z){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,v.Z)(function*(){const L=Array.from(B.instances.values());yield Promise.all([...L.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...L.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=Z){return this.instances.has(B)}getOptions(B=Z){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:L={}}=B,ie=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ae=this.getOrInitializeService({instanceIdentifier:ie,options:L});for(const[ne,ze]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(ne)&&ze.resolve(Ae);return Ae}onInit(B,L){var ie;const Ae=this.normalizeInstanceIdentifier(L),ne=null!==(ie=this.onInitCallbacks.get(Ae))&&void 0!==ie?ie:new Set;ne.add(B),this.onInitCallbacks.set(Ae,ne);const ze=this.instances.get(Ae);return ze&&B(ze,Ae),()=>{ne.delete(B)}}invokeOnInitCallbacks(B,L){const ie=this.onInitCallbacks.get(L);if(ie)for(const Ae of ie)try{Ae(B,L)}catch(ne){}}getOrInitializeService({instanceIdentifier:B,options:L={}}){let ie=this.instances.get(B);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(De=B,De===Z?void 0:De),options:L}),this.instances.set(B,ie),this.instancesOptions.set(B,L),this.invokeOnInitCallbacks(ie,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,ie)}catch(Ae){}var De;return ie||null}normalizeInstanceIdentifier(B=Z){return this.component?this.component.multipleInstances?B:Z:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const L=this.getProvider(B.name);if(L.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);L.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const L=new he(B,this);return this.providers.set(B,L),L}getProviders(){return Array.from(this.providers.values())}}},877:(ke,ce,R)=>{R.d(ce,{in:()=>V,Yd:()=>ve,Ub:()=>Me,Am:()=>De});const v=[];var V=(()=>{return(B=V||(V={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",V;var B})();const ae={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},Z=V.INFO,he={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Re=(B,L,...ie)=>{if(L<B.logLevel)return;const Ae=(new Date).toISOString(),ne=he[L];if(!ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[ne](`[${Ae}]  ${B.name}:`,...ie)};class ve{constructor(L){this.name=L,this._logLevel=Z,this._logHandler=Re,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in V))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?ae[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...L),this._logHandler(this,V.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...L),this._logHandler(this,V.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,V.INFO,...L),this._logHandler(this,V.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,V.WARN,...L),this._logHandler(this,V.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...L),this._logHandler(this,V.ERROR,...L)}}function Me(B){v.forEach(L=>{L.setLogLevel(B)})}function De(B,L){for(const ie of v){let Ae=null;L&&L.level&&(Ae=ae[L.level]),ie.userLogHandler=null===B?null:(ne,ze,...ge)=>{const Ne=ge.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch(it){return null}}).filter(He=>He).join(" ");ze>=(null!=Ae?Ae:ne.logLevel)&&B({level:V[ze].toLowerCase(),message:Ne,args:ge,type:ne.name})}}}},766:(ke,ce,R)=>{R.d(ce,{Lj:()=>Ee,X3:()=>Q});var v=R(861);let ae,Z;const ve=new WeakMap,Me=new WeakMap,De=new WeakMap,B=new WeakMap,L=new WeakMap;let ne={get(q,de,j){if(q instanceof IDBTransaction){if("done"===de)return Me.get(q);if("objectStoreNames"===de)return q.objectStoreNames||De.get(q);if("store"===de)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return He(q[de])},set:(q,de,j)=>(q[de]=j,!0),has:(q,de)=>q instanceof IDBTransaction&&("done"===de||"store"===de)||de in q};function Ne(q){return"function"==typeof q?function ge(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Re(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...de){return q.apply(it(this),de),He(ve.get(this))}:function(...de){return He(q.apply(it(this),de))}:function(de,...j){const z=q.call(it(this),de,...j);return De.set(z,de.sort?de.sort():[de]),He(z)}}(q):(q instanceof IDBTransaction&&function Ae(q){if(Me.has(q))return;const de=new Promise((j,z)=>{const G=()=>{q.removeEventListener("complete",K),q.removeEventListener("error",Y),q.removeEventListener("abort",Y)},K=()=>{j(),G()},Y=()=>{z(q.error||new DOMException("AbortError","AbortError")),G()};q.addEventListener("complete",K),q.addEventListener("error",Y),q.addEventListener("abort",Y)});Me.set(q,de)}(q),((q,de)=>de.some(j=>q instanceof j))(q,function he(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,ne):q)}function He(q){if(q instanceof IDBRequest)return function ie(q){const de=new Promise((j,z)=>{const G=()=>{q.removeEventListener("success",K),q.removeEventListener("error",Y)},K=()=>{j(He(q.result)),G()},Y=()=>{z(q.error),G()};q.addEventListener("success",K),q.addEventListener("error",Y)});return de.then(j=>{j instanceof IDBCursor&&ve.set(j,q)}).catch(()=>{}),L.set(de,q),de}(q);if(B.has(q))return B.get(q);const de=Ne(q);return de!==q&&(B.set(q,de),L.set(de,q)),de}const it=q=>L.get(q);function Q(q,de,{blocked:j,upgrade:z,blocking:G,terminated:K}={}){const Y=indexedDB.open(q,de),pe=He(Y);return z&&Y.addEventListener("upgradeneeded",Le=>{z(He(Y.result),Le.oldVersion,Le.newVersion,He(Y.transaction))}),j&&Y.addEventListener("blocked",()=>j()),pe.then(Le=>{K&&Le.addEventListener("close",()=>K()),G&&Le.addEventListener("versionchange",()=>G())}).catch(()=>{}),pe}function Ee(q,{blocked:de}={}){const j=indexedDB.deleteDatabase(q);return de&&j.addEventListener("blocked",()=>de()),He(j).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],_e=["put","add","delete","clear"],et=new Map;function oe(q,de){if(!(q instanceof IDBDatabase)||de in q||"string"!=typeof de)return;if(et.get(de))return et.get(de);const j=de.replace(/FromIndex$/,""),z=de!==j,G=_e.includes(j);if(!(j in(z?IDBIndex:IDBObjectStore).prototype)||!G&&!me.includes(j))return;const K=function(){var Y=(0,v.Z)(function*(pe,...Le){const qe=this.transaction(pe,G?"readwrite":"readonly");let xt=qe.store;return z&&(xt=xt.index(Le.shift())),(yield Promise.all([xt[j](...Le),G&&qe.done]))[0]});return function(Le){return Y.apply(this,arguments)}}();return et.set(de,K),K}!function ze(q){ne=q(ne)}(q=>_E(mE({},q),{get:(de,j,z)=>oe(de,j)||q.get(de,j,z),has:(de,j)=>!!oe(de,j)||q.has(de,j)}))},861:(ke,ce,R)=>{function v(ae,Z,he,Re,ve,Me,De){try{var B=ae[Me](De),L=B.value}catch(ie){return void he(ie)}B.done?Z(L):Promise.resolve(L).then(Re,ve)}function V(ae){return function(){var Z=this,he=arguments;return new Promise(function(Re,ve){var Me=ae.apply(Z,he);function De(L){v(Me,Re,ve,De,B,"next",L)}function B(L){v(Me,Re,ve,De,B,"throw",L)}De(void 0)})}}R.d(ce,{Z:()=>V})}},ke=>{ke(ke.s=832)}]);